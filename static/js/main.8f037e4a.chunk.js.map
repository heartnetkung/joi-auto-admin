{"version":3,"sources":["editor/screens/editor-tool/constants.js","editor/screens/editor-tool/views/menu.js","editor/screens/editor-tool/views/styles.js","editor/screens/editor-tool/views/menu-form.js","editor/screens/editor-tool/right-panel-views/code-blocks.js","lib/table/row_menu.js","lib/table/table_menu.js","lib/table/logic.js","lib/shared/file_upload.js","lib/table/other_menu.js","lib/shared/hook.js","lib/table/index.js","lib/controller/util.js","lib/formik/logic.js","lib/formik/submit_line.js","lib/formik/components/barcode.js","lib/formik/components/cascader_static.js","lib/formik/components/cascader_async.js","lib/formik/components/file_upload.js","lib/formik/field.js","lib/joi/error_message.js","lib/joi/prepare_joi.js","lib/assets/fallback_image.js","lib/formik/components/col_image.js","lib/joi/joi_wrapper.js","lib/formik/field_array.js","lib/formik/inner_form.js","lib/formik/form.js","lib/controller/header.js","lib/controller/edit_modal.js","lib/shared/xlsx.js","lib/joi/serialize2.js","lib/controller/excel_error_modal.js","lib/controller/index.js","lib/controller/open_form_modal.js","editor/logic/util.js","editor/logic/custom_component.js","editor/logic/lookup_label.js","editor/logic/joi_line.js","editor/logic/chance.js","editor/logic/template.js","editor/logic/index.js","editor/screens/editor-tool/logic.js","editor/screens/editor-tool/right-panel-views/index.js","editor/screens/editor-tool/left-panel-views/data-field.js","editor/screens/editor-tool/left-panel-views/styles.js","editor/screens/editor-tool/left-panel-views/logic.js","editor/screens/editor-tool/left-panel-views/conditional_field.js","editor/screens/editor-tool/left-panel-views/setting.js","editor/screens/editor-tool/left-panel-views/form-fields.js","editor/screens/editor-tool/left-panel-views/index.js","editor/screens/editor-tool/styles.js","editor/screens/editor-tool/views/panel.js","editor/screens/editor-tool/views/hooks.js","editor/screens/editor-tool/index.js","editor/index.js","index.js"],"names":["MENU","MENU_FORM","SETTINGS","SETTINGS2","MenuView","props","currentMenu","setCurrentMenu","onClick","e","current","key","selectedKeys","mode","style","float","flexDirection","minWidth","marginRight","Item","rowMenu","display","marginBottom","button","rightPanel","flex","borderRadius","padding","overflow","position","MenuFormView","onClearForm","onEventClick","type","styles","ghost","block","danger","RenderCodeBlocks","text","container","useRef","useEffect","span","querySelector","ref","language","theme","dracula","RowMenu","buttons","record","updateDataAtRow","map","action","index","NOOP","label","defaultProps","TableMenu","deleteButtonLabel","createButtonLabel","selectedRows","onCreate","onDelete","setSelectedRows","otherMenu","tableButtons","data","onDelete2","useCallback","a","textAlign","margin","length","icon","DeleteOutlined","i","lookupSelectedRow","PlusOutlined","overlay","placement","selectedSet","Set","filter","has","_id","sorter","b","dataIndex","this","_","get","onFilter","value","render","addFilter","column","filters","chain","join","identity","uniq","sortBy","ans","disableSorting","bind","disableFilter","FileUploader","handleFile","children","accept","props2","omit","hiddenFileInput","event","click","onChange","target","files","OtherMenu","onDownloadExcel","onUploadExcel","onExampleExcel","downloadExcelLabel","uploadExcelLabel","exampleExcelLabel","DownloadOutlined","UploadOutlined","EyeOutlined","useAPI","func","loadingInit","manualComplete","useState","loading","apiState","setApiState","setData","apply","useModal","visible","setVisible","onClose","usePersistFn","fn","fnRef","persistFn","args","TableComp","schema","rowButtons","onEdit","paginationSize","tableScroll","columns","useMemo","cellHide","rowButtons2","unshift","EditOutlined","width","push","title","rowSelection","selectedRowKeys","smallScreen","window","innerWidth","isMatch","setMatch","listener","matches","mediaQuery","matchMedia","addListener","removeListener","useMaxWidth","tableScroll2","x","y","tableStyle","undefined","Math","min","opacity","dataSource","pagination","defaultPageSize","scroll","rowKey","alert","content","Modal","success","error","message","appendId","nanoid","touchAll","context","validateForm","errors","Object","keys","setTouched","setNestedObjectValues","SubmitLine","steps","currentStep","prevStep","nextStep","submitButtonLabel","resetButtonLabel","useFormikContext","touch","executed","submitStyle","next","submitCount","isValid","isSubmitting","setTimeout","touchFirstSubmit","marginTop","disabled","OMIT_FIELDS","Text","Typography","BarcodeLine","name","itemName","size","CloseOutlined","shape","marginLeft","Barcode","loadBarcodeName","values","setFieldValue","inputValue","setInputValue","barcodes","itemNames","queue","Promise","all","results","newItemNames","ii","onKeyDown","preventDefault","newName","temp","validator","newValue","remove","CascaderStatic","names","fieldNames","notFound","options","cascaderOptions","nft","notFoundText","options2","setOptions2","l","v","c","setValue","diffValue","convertNames","appendNotFoundText","params","syncFromOtherFields","showSearch","path","some","toLowerCase","indexOf","forEach","displayRender","labels","value2","names2","Array","isArray","nodeArray","isLeaf","node","newNode","find","theValue","lastValue","traverse","CascaderAsync","fetchData","cascaderFetchData","childrenField","valueField","setOptions","setLoading","initValue","queues","slice","currentValue","currentResult","j","jj","loadData","selectedOptions","lastOption","newNodes","dropdownRender","FileUpload","multiple","dataType","uploadFileType","uploadFile","uploadFileInit","fileListState","setFileListState","abortRef","AbortController","urlToFileList","abort","onUpload","onSuccess","onError","file","uploadURL","signal","aborted","status","uri","split","url","URL","createObjectURL","console","onChangeFile","info","newFileList","fileList","response","listFile","renderHelper","listType","customRequest","noop","encodeURIComponent","pop","MonthPicker","Raw","Field","fieldType","required","validate","meta","labelCol","wrapperCol","colSpan","offset","className","containerStyle","onFieldRender","appendDivider","placeholder","showTime","Password","TextArea","valid","entries","k","Option","format","defaultValue","moment","errorTranslation","errorObj","limit","getErrorMessage","test","replace","found","prepare","joiObj","describeObj","devMode","strPaths","otherPaths","flags","presence","fork","optional","allow","handleDevMode","metas","fieldHide","handleFieldHide","fixEmptyString","append","Joi","any","IMAGE_FALLBACK","ColImage","src","fallback","PreviewGroup","item","toString","OMIT_META","MEMO_OPTION","promise","primitive","JoiWrapper","isSchema","Error","describe","formSpec","handleCellShow","toDefaultValues","defaultValues","set","JoiField","hasCellShow","cellShow","spec","field","getMeta","guessFieldType","_extractedSchema","getExtractedSchema","getDefaultValue","getColumn","twoColumn","step","default","extract","pattern","email","scheme","$this","cellFormat","cellWidth","m","p1","p2","p3","maxWidth","whiteSpace","textOverflow","href","rel","numeral","Date","only","validLabel","memo","rawError","details","getUploadUrl","firebaseConfig","FieldArray","arrayValues","random","arraySchema","$_terms","items","_singleRules","max","gutter","align","MinusCircleOutlined","removeRow","fontSize","fromPairs","inlineStyle","InnerForm","inline","isInline","isPreviousLeft","hasNext","calculateSpan","Step","Steps","CombinedForm","onSubmit","initialValues","setStep","useSteps","onSubmit2","postData","actions","pick","formProp","colon","justify","Title","Paragraph","Header","description","small","headerContainerStyle","titleStyle","descriptionStyle","level","EditModal","isEdit","createHeader","editHeader","initialValue","centered","footer","onCancel","maskClosable","showIcon","tableToExcel","dataArray","fileName","handleNested","worksheet","utils","json_to_sheet","dateNF","workbook","book_new","book_append_sheet","writeFile","excelToTable","fileObject","res","rej","reader","FileReader","onload","result","read","firstSheet","Sheets","SheetNames","sheet_to_json","parse","onerror","readAsBinaryString","obj","isObject","prototype","call","ALLOWED_TYPES","PICKED_TYPES","serializeTable","table","makeFormSpec","header","makeHeader","rowData","makeBodyRow","fullName","getTimeFormat","prefix","subSpec","formSpec2","table2","prefix2","ans2","mapValues","assign","tzOffset","deserializeTable","deserializeRow","mapError","SerializeError","excelRow","trim","parseFloat","toDate","setFullYear","setDate","setMonth","newHours","getHours","getTimezoneOffset","getDate","setHours","attempt","abortEarly","line","captureStackTrace","constructor","COLUMNS","ExcelErrorModal","ExclamationCircleFilled","color","INITIAL_FORM_STATUS","Controller","getMany","createMany","updateOne","deleteMany","uploadPreviewUrl","disableSuccessModal","querySchema","disableExcelDownload","disableExcelUpload","editModalData","setEditModalData","excelError","setExcelError","getManyStatus","doGetMany","deleteStatus","doDelete","editModalControl","excelModalControl","schema2","querySchema2","tableData","ids","originalData","unset","returnData","setSubmitting","then","catch","onQuery","query","open","focus","rawExcel","newRows","newData","getOne","FormModal","setError","raw","isObj","regex","showRaw","softEval","Function","str","DependentComp","values2","JSON","stringify","AsyncDropdown","fetchChoices","choices","setChoices","remap","optionFilterProp","filterOption","input","option","THAddress","selector","document","querySelectorAll","classList","add","addEventListener","removeEventListener","ColorPicker","background","onChangeComplete","hex","disableAlpha","trigger","lookupLabel","makeJoiLine","editor","settings","newFieldType","suffix","Comp","allowClear","object","string","note","require","concat","extraMargin","columnWidth","conditional","original","joiList","joi","makeObject","toSource","makeString","makeExtraJoiLines","extend","$notFound","chance","randomData","editors","count","seed","newRandom","Chance","getChance","editorToChance","specObj","protocol","wait","ms","renderJoi","isComp","extraJoiLines","renderProps","canCreate","canUpdate","canDelete","rowButtonExample","SmileOutlined","extras","renderTemplate","reactImport","formikAntdImport","reactString","renderImport","renderFunction","genChanceString","isJson","prettier","parser","plugins","parserBabel","editorSchemaInner","_fieldType","number","boolean","columnHide","array","editorSchema1","strip","unique","editorSchema2","makeJoiObj","App","OMIT_SETTING","cleanFormBeforeTrans","settingSteps","row","stepValue","findIndex","findStep","colWidth","parseInt","cleanColWidth","cleanDefault","validateSchema","RightPanelView","view","editors2","cfLine","cloneDeep","editorKey","keyBy","dropdown","equal","handleCfLines","codeText","generateId","floor","getInitRowField","rowField","getInitRowQuerySchema","rowQuerySchema","getSingleRowQuerySchema","disabledSorting","disabledDefaultSet","disabledPlaceholderSet","placeholderDefault","checkbox","fieldOptions","columnOptions","fieldTree","queryFieldTree","Wrapper1","Wrapper2","gray","layoutMargin","VerticalSpacer","rowInput","createOptions","getHeader","makeLine","allLines","filterField","lines","OPTIONS","ConditionalField","formState","setSettingState","settingState","setLines","editLine","newLines","splice","dropdowns","fields","CloseCircleOutlined","conditionalField","RenderSetting","logic","optionsStep","onChangeField","newSettings","onChangeSteps","state","numberOfStep","onChangeFieldQuerySchema","makeCheckboxValue","allChoices","onCheckboxChange","trueChoices","newState","Group","overlayInnerStyle","QuestionCircleOutlined","st","si","paddingTop","onChangeInputSteps","checked","onChangeConditionalField","onChangeCheckboxQuery","defaultActiveKey","accordion","qs","qi","Panel","extra","UpOutlined","onMoveUp","stopPropagation","DownOutlined","onMoveDown","onDeleteQuerySchema","FormFields","setFormState","dataFieldOptions","dataColumnOptions","onSetDefaultStep","allInputs","setAttribute","newForm","rowForm","s","onChangeConfig","newOptionConfig","dataOptions","defaultConfig","keyDiffOptions","difference","onDeleteField","height","lineHeight","isNil","LeftPanelView","otherProps","panelColor","LayoutContainer","panelContainer","justifyContent","resizableContainer","cursor","leftPanelContainer","backgroundColor","border","rightPanelContainer","rightPanelContainer2","brandingText","top","githubStar","verticalAlign","githubText","MIN_WIDTH","PanelView","leftView","rightView","rightViewStyle","menu","bottomBar","currentView","splitPanelRef","leftPanelRef","isDragging","setIsDragging","separatorXPosition","setSeparatorXPosition","leftPanelWidth","setLeftPanelWidth","setSize","useLayoutEffect","updateSize","innerHeight","useWindowSize","windowHeight","showError","setShowError","onMouseMove","onTouchMove","onMouseUp","isValidate","onMove","clientX","touches","newLeftWidth","splitPaneWidth","clientWidth","alignItems","CheckCircleTwoTone","twoToneColor","CloseCircleTwoTone","paddingLeft","maxHeight","defaultSize","OTHER_ELEM_SIZE","onMouseDown","innerStyles","EditorScreen","currentMenuState","setCurrentMenuState","currentMenuFormState","setCurrentMenuFormState","tableSettingProps","setTableSettingProps","schemaProps","setSchemaProps","schemaValidateState","setSchemaValidateState","debounceTableTrans","debounceSchemaTrans","debounce","setting","newSetting","omitSetting","frameBorder","scrolling","stepOptions","getSingleRow","RenderScreen","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8f037e4a.chunk.js","sourcesContent":["export const MENU = {\n  ui: \"UI\",\n  code: \"Code\",\n};\n\nexport const MENU_FORM = {\n  form: \"Fields\",\n  setting: \"Settings\",\n};\n\nexport const SETTINGS = [\n  \"canCreate\",\n  \"canUpdate\",\n  \"canDelete\",\n];\n\nexport const SETTINGS2 = [\n  \"disableExcelDownload\",\n  \"disableExcelUpload\",\n  \"rowButtonExample\",\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Menu } from \"antd\";\nimport { MENU } from \"../constants\";\n\nconst MenuView = (props) => {\n  const { currentMenu, setCurrentMenu } = props;\n\n  const onEventClick = (e) => {\n    setCurrentMenu({ current: e.key });\n  };\n\n  return (\n    <Menu\n      onClick={onEventClick}\n      selectedKeys={[currentMenu.current]}\n      mode=\"horizontal\"\n      style={{ float: \"right\", flexDirection: 'row-reverse', minWidth: 150, marginRight: 5 }}\n    >\n      <Menu.Item key={MENU.code}>{MENU.code}</Menu.Item>\n      <Menu.Item key={MENU.ui}>{MENU.ui}</Menu.Item>\n    </Menu>\n  );\n};\n\nMenuView.propTypes = {\n  currentMenu: PropTypes.object.isRequired,\n  setCurrentMenu: PropTypes.func.isRequired,\n};\n\nexport default MenuView;\n","export const rowMenu = {\n  display: \"flex\",\n  marginBottom: \"1rem\",\n};\n\nexport const button = {\n  marginRight: \"1rem\",\n};\n\nexport const rightPanel = {\n  flex: 1,\n  borderRadius: 8,\n  marginRight: 6,\n  marginBottom: 6,\n  padding: \"2rem 1rem\",\n  overflow: \"auto\",\n  position: \"relative\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"antd\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"./styles\";\n\nconst MenuFormView = (props) => {\n  const { currentMenu, setCurrentMenu, onClearForm } = props;\n\n  const onEventClick = (type) => {\n    setCurrentMenu({ current: type });\n  };\n\n  return (\n    <div style={styles.rowMenu}>\n      <Button\n        type=\"primary\"\n        ghost={currentMenu?.current !== MENU_FORM.form}\n        block\n        onClick={() => onEventClick(MENU_FORM.form)}\n      >\n        {MENU_FORM.form}\n      </Button>\n      <Button\n        type=\"primary\"\n        ghost={currentMenu?.current !== MENU_FORM.setting}\n        block\n        style={styles.button}\n        onClick={() => onEventClick(MENU_FORM.setting)}\n      >\n        {MENU_FORM.setting}\n      </Button>\n      <Button type=\"dashed\" danger onClick={onClearForm}>\n        Reset\n      </Button>\n    </div>\n  );\n};\n\nMenuFormView.propTypes = {\n  currentMenu: PropTypes.object.isRequired,\n  setCurrentMenu: PropTypes.func.isRequired,\n  onClearForm: PropTypes.func.isRequired,\n};\n\nexport default MenuFormView;\n","import React, { useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CopyBlock, dracula } from \"react-code-blocks\";\n\nconst RenderCodeBlocks = (props) => {\n  const { text } = props;\n\n  //hack: remove unwanted style from child node\n  const container = useRef(null);\n  useEffect(() => {\n    if (!container.current) return;\n    var span = container.current.querySelector(\":scope>div>span\");\n    if (span) span.style.padding = null;\n  }, [container]);\n\n  return (\n    <div ref={container}>\n      <CopyBlock text={text} language=\"jsx\" theme={dracula} />\n    </div>\n  );\n};\n\nRenderCodeBlocks.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default RenderCodeBlocks;\n","import { Button, Space } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst RowMenu = (props) => {\n\tconst { buttons, record, updateDataAtRow } = props;\n\n\treturn (\n\t\t<Space>\n\t\t\t{buttons.map((action, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t{...action}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\taction.onClick\n\t\t\t\t\t\t\t\t? () => action.onClick(record, updateDataAtRow)\n\t\t\t\t\t\t\t\t: NOOP\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{action.label}\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Space>\n\t);\n};\n\nRowMenu.propTypes = {\n\tbuttons: PropTypes.array.isRequired,\n\trecord: PropTypes.any.isRequired,\n\tupdateDataAtRow: PropTypes.func,\n};\n\nRowMenu.defaultProps = {\n\tupdateDataAtRow: null,\n};\n\nconst NOOP = () => {};\n\nexport default RowMenu;\n","import { Button, Space, Dropdown } from \"antd\";\nimport { DeleteOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport { useCallback } from \"react\";\nimport React from \"react\";\n\nconst TableMenu = (props) => {\n\tconst { deleteButtonLabel, createButtonLabel, selectedRows } = props;\n\tconst { onCreate, onDelete, setSelectedRows, otherMenu } = props;\n\tconst { tableButtons, updateDataAtRow, data } = props;\n\n\tconst onDelete2 = useCallback(async () => {\n\t\tawait onDelete(selectedRows);\n\t\tsetSelectedRows([]);\n\t}, [selectedRows, onDelete, setSelectedRows]);\n\n\treturn (\n\t\t<div style={{ textAlign: \"right\", margin: 10 }}>\n\t\t\t<Space>\n\t\t\t\t{!!selectedRows.length && onDelete && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\tonClick={onDelete2}\n\t\t\t\t\t\ticon={<DeleteOutlined />}\n\t\t\t\t\t>\n\t\t\t\t\t\t{deleteButtonLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{!!selectedRows.length &&\n\t\t\t\t\ttableButtons.map((a, i) => (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t{...a}\n\t\t\t\t\t\t\tkey={i + \"\"}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\ta.onClick(\n\t\t\t\t\t\t\t\t\tlookupSelectedRow(selectedRows, data),\n\t\t\t\t\t\t\t\t\tupdateDataAtRow\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tsetSelectedRows([]);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{a.label}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t))}\n\t\t\t\t{!selectedRows.length && onCreate && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\tonClick={onCreate}\n\t\t\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\t\t>\n\t\t\t\t\t\t{createButtonLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{otherMenu && (\n\t\t\t\t\t<Dropdown overlay={otherMenu} placement=\"bottomRight\">\n\t\t\t\t\t\t<Button></Button>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t)}\n\t\t\t</Space>\n\t\t</div>\n\t);\n};\n\nconst lookupSelectedRow = (selectedRows, data) => {\n\tconst selectedSet = new Set(selectedRows);\n\treturn data.filter((a) => selectedSet.has(a._id));\n};\n\nTableMenu.propTypes = {\n\tselectedRows: PropTypes.array.isRequired,\n\tsetSelectedRows: PropTypes.func.isRequired,\n\tcreateButtonLabel: PropTypes.string,\n\tdeleteButtonLabel: PropTypes.string,\n\totherMenu: PropTypes.node,\n\tonCreate: PropTypes.func,\n\tonDelete: PropTypes.func,\n\ttableButtons: PropTypes.array.isRequired,\n\tupdateDataAtRow: PropTypes.func.isRequired,\n\tdata: PropTypes.array,\n};\nTableMenu.defaultProps = {\n\tcreateButtonLabel: \"\",\n\tdeleteButtonLabel: \"\",\n\tonCreate: null,\n\tonDelete: null,\n\totherMenu: null,\n\tdata: [],\n};\n\nexport default TableMenu;\n","import _ from \"lodash\";\n\nconst sorter = function (a, b) {\n  var { dataIndex } = this;\n  return _.get(a, dataIndex) > _.get(b, dataIndex) ? -1 : 1;\n};\n\nconst onFilter = function (value, record) {\n  var { dataIndex, render } = this;\n  if (render) return render(record[dataIndex]) === value;\n  return record[dataIndex] === value;\n};\n\nexport const addFilter = (data) => {\n  return (column) => {\n    var filters = _.chain(data)\n      .map(column.dataIndex.join(\".\"))\n      .map(column.render || _.identity)\n      .uniq()\n      .sortBy()\n      .map((a) => ({ text: a, value: a }))\n      .value();\n    var ans = { ...column };\n    if (!column.disableSorting) ans.sorter = sorter.bind(ans);\n    if (filters.length < 50 && filters.length && !column.disableFilter) {\n      ans.onFilter = onFilter.bind(ans);\n      ans.filters = filters;\n    }\n    return ans;\n  };\n};\n","import { useRef } from \"react\";\nimport { Button } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport React from 'react';\n\nconst FileUploader = (props) => {\n\tconst { handleFile, children, accept } = props;\n\n\tconst props2 = _.omit(props, [\"handleFile\", \"children\"]);\n\tconst hiddenFileInput = useRef(null);\n\tconst handleClick = (event) => hiddenFileInput.current.click();\n\tconst handleChange = (event) => handleFile(event.target.files[0]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button {...props2} onClick={handleClick}>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t\t<input\n\t\t\t\taccept={accept}\n\t\t\t\ttype=\"file\"\n\t\t\t\tref={hiddenFileInput}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t/>\n\t\t</>\n\t);\n};\nFileUploader.propTypes = {\n\thandleFile: PropTypes.func.isRequired,\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t]).isRequired,\n\taccept: PropTypes.string.isRequired /*example: \".xlsx\"*/,\n};\n\nexport default FileUploader;\n","import {\n\tDownloadOutlined,\n\tUploadOutlined,\n\tEyeOutlined,\n} from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport { Menu, Button } from \"antd\";\nimport FileUpload from \"../shared/file_upload\";\nimport React from 'react';\n\nconst OtherMenu = (props) => {\n\tconst { onDownloadExcel, onUploadExcel, onExampleExcel } = props;\n\tconst { downloadExcelLabel, uploadExcelLabel, exampleExcelLabel } = props;\n\n\treturn (\n\t\t<Menu>\n\t\t\t{onDownloadExcel && (\n\t\t\t\t<Menu.Item key=\"1\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={onDownloadExcel}\n\t\t\t\t\t\ticon={<DownloadOutlined />}\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{downloadExcelLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t\t{onUploadExcel && (\n\t\t\t\t<Menu.Item key=\"2\">\n\t\t\t\t\t<FileUpload\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\thandleFile={onUploadExcel}\n\t\t\t\t\t\ticon={<UploadOutlined />}\n\t\t\t\t\t\taccept=\".xlsx\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{uploadExcelLabel}\n\t\t\t\t\t</FileUpload>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t\t{onExampleExcel && (\n\t\t\t\t<Menu.Item key=\"3\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={onExampleExcel}\n\t\t\t\t\t\ticon={<EyeOutlined />}\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{exampleExcelLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t</Menu>\n\t);\n};\nOtherMenu.propTypes = {\n\tonDownloadExcel: PropTypes.func,\n\tonUploadExcel: PropTypes.func,\n\tonExampleExcel: PropTypes.func,\n\tdownloadExcelLabel: PropTypes.string,\n\tuploadExcelLabel: PropTypes.string,\n\texampleExcelLabel: PropTypes.string,\n};\nOtherMenu.defaultProps = {\n\tonDownloadExcel: null,\n\tonUploadExcel: null,\n\tonExampleExcel: null,\n\tdownloadExcelLabel: \" Excel\",\n\tuploadExcelLabel: \" Excel\",\n\texampleExcelLabel: \" Excel \",\n};\n\nexport default OtherMenu;\n","import { useState, useRef, useEffect } from \"react\";\n\nexport const useAPI = (func, loadingInit, manualComplete) => {\n\tconst [apiState, setApiState] = useState({\n\t\tloading: !!loadingInit,\n\t\tdata: null,\n\t});\n\tconst setData = (data) => setApiState({ loading: false, data });\n\n\tconst doRun = async function (a, b) {\n\t\tsetApiState((a) => ({ loading: true, data: a.data }));\n\t\ttry {\n\t\t\tvar data = await func.apply(null, arguments);\n\t\t\tif (!manualComplete) setData(data);\n\t\t\treturn data;\n\t\t} catch (e) {\n\t\t\tsetApiState((a) => ({ loading: false, data: null }));\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\treturn [apiState, doRun, setData];\n};\n\nexport const useModal = () => {\n\tconst [visible, setVisible] = useState(false);\n\tconst onClose = () => setVisible(false);\n\treturn { visible, onClose, setVisible };\n};\n\nexport const usePersistFn = (fn) => {\n\tconst fnRef = useRef(fn);\n\tfnRef.current = fn;\n\n\tconst persistFn = useRef();\n\tif (!persistFn.current)\n\t\tpersistFn.current = function (...args) {\n\t\t\treturn fnRef.current.apply(this, args);\n\t\t};\n\n\treturn persistFn.current;\n};\n\nexport const useMaxWidth = (width) => {\n\tconst [isMatch, setMatch] = useState(window.innerWidth <= width);\n\tconst listener = (a) => setMatch(a.matches);\n\t/* eslint-disable react-hooks/exhaustive-deps */\n\tuseEffect(() => {\n\t\tvar mediaQuery = window.matchMedia(`(max-width: ${width}px)`);\n\t\tmediaQuery.addListener(listener);\n\t\treturn () => mediaQuery.removeListener(listener);\n\t}, []);\n\treturn isMatch;\n};\n","import { Table, Row } from \"antd\";\nimport { useState, useMemo } from \"react\";\nimport { EditOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport RowMenu from \"./row_menu\";\nimport TableMenu from \"./table_menu\";\nimport { addFilter } from \"./logic\";\nimport OtherMenu from \"./other_menu\";\nimport { useMaxWidth } from \"../shared/hook\";\nimport React from \"react\";\n\nconst TableComp = (props) => {\n  const { data, schema, rowButtons, onEdit, paginationSize } = props;\n  const { onDelete, onCreate, tableScroll, updateDataAtRow } = props;\n  const { loading, onDownloadExcel, onUploadExcel, onExampleExcel } = props;\n  const { tableButtons } = props;\n\n  const [selectedRows, setSelectedRows] = useState([]);\n\n  const columns = useMemo(() => {\n    var ans = schema.columns\n      .map(addFilter(data))\n      .filter((column) => !column.cellHide);\n\n    var rowButtons2 = [...rowButtons];\n    if (onEdit)\n      rowButtons2.unshift({ icon: <EditOutlined />, onClick: onEdit });\n\n    if (rowButtons2.length) {\n      const render = (text, record) => (\n        <RowMenu\n          buttons={rowButtons2}\n          record={record}\n          updateDataAtRow={updateDataAtRow}\n        />\n      );\n      const width = 60 * rowButtons2.length + 20;\n      ans.push({ title: \"\", width, render });\n    }\n\n    return ans;\n  }, [schema, data, rowButtons, onEdit, updateDataAtRow]);\n\n  const rowSelection = (onDelete || tableButtons.length) && {\n    selectedRowKeys: selectedRows,\n    onChange: setSelectedRows,\n  };\n\n  const smallScreen = useMaxWidth(575);\n  const tableScroll2 = smallScreen ? { x: true, y: true } : tableScroll;\n  const tableStyle = smallScreen\n    ? undefined\n    : { minWidth: Math.min(columns.length * 130, 800) };\n\n  return (\n    <>\n      <div style={{ opacity: loading ? 0.5 : 1 }}>\n        <TableMenu\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          onDelete={onDelete}\n          onCreate={onCreate}\n          tableButtons={tableButtons}\n          updateDataAtRow={updateDataAtRow}\n          data={data}\n          otherMenu={\n            !onDownloadExcel && !onUploadExcel && !onExampleExcel ? null : (\n              <OtherMenu\n                onDownloadExcel={onDownloadExcel}\n                onUploadExcel={onUploadExcel}\n                onExampleExcel={onExampleExcel}\n              />\n            )\n          }\n        />\n      </div>\n      <Row>\n        <Table\n          loading={loading}\n          columns={columns}\n          dataSource={data}\n          pagination={{ defaultPageSize: paginationSize }}\n          scroll={tableScroll2}\n          rowSelection={rowSelection}\n          rowKey=\"_id\"\n          style={tableStyle}\n        />\n      </Row>\n    </>\n  );\n};\n\nTableComp.propTypes = {\n  rowButtons: PropTypes.array,\n  tableButtons: PropTypes.array,\n  onCreate: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func,\n  schema: PropTypes.object.isRequired,\n  paginationSize: PropTypes.number,\n  tableScroll: PropTypes.object,\n  loading: PropTypes.bool,\n  onDownloadExcel: PropTypes.func,\n  onUploadExcel: PropTypes.func,\n  onExampleExcel: PropTypes.func,\n  updateDataAtRow: PropTypes.func,\n};\n\nTableComp.defaultProps = {\n  rowButtons: [],\n  tableButtons: [],\n  onDelete: null,\n  onCreate: null,\n  onEdit: null,\n  paginationSize: 20,\n  tableScroll: { y: 600, x: true },\n  loading: false,\n  onDownloadExcel: null,\n  onUploadExcel: null,\n  onExampleExcel: null,\n  updateDataAtRow: null,\n};\n\nexport default TableComp;\n","import { Modal } from \"antd\";\nimport { nanoid } from \"nanoid\";\n\nexport const alert = {\n\tsuccess: (content) => Modal.success({ content }),\n\terror: (e) => Modal.error({ content: e.message || e + \"\" }),\n};\n\nexport const appendId = (a) => {\n\tif (a._id === undefined) return { ...a, _id: nanoid() };\n\treturn a;\n};\n","import { useState } from \"react\";\nimport { setNestedObjectValues } from \"formik\";\n\nexport const calculateSpan = (formSpec, isInline) => {\n\tif (isInline) return formSpec.map((a) => ({ ...a, colSpan: -1 }));\n\n\tvar ans = [];\n\tvar isPreviousLeft = false;\n\tfor (var i = 0, ii = formSpec.length; i < ii; i++) {\n\t\tvar current = formSpec[i];\n\t\tif (!current.twoColumn) {\n\t\t\tans.push(current);\n\t\t\tisPreviousLeft = false;\n\t\t} else if (isPreviousLeft === false) {\n\t\t\t//left\n\t\t\tvar hasNext = formSpec[i + 1]?.twoColumn;\n\t\t\tans.push({\n\t\t\t\t...current,\n\t\t\t\tcolSpan: hasNext ? 12 : 24,\n\t\t\t\tlabelCol: hasNext ? { span: 8 } : { span: 4 },\n\t\t\t\twrapperCol: hasNext ? { span: 14 } : { span: 7 },\n\t\t\t});\n\t\t\tisPreviousLeft = true;\n\t\t} else {\n\t\t\t//right\n\t\t\tans.push({\n\t\t\t\t...current,\n\t\t\t\tcolSpan: 12,\n\t\t\t\tlabelCol: { span: 5 },\n\t\t\t\twrapperCol: { span: 15 },\n\t\t\t\tclassName: \"right-column-label\",\n\t\t\t});\n\t\t\tisPreviousLeft = false;\n\t\t}\n\t}\n\treturn ans;\n};\n\nexport const useSteps = (steps) => {\n\tconst [currentStep, setStep] = useState(steps.length ? 0 : -1);\n\tconst nextStep = () =>\n\t\tcurrentStep < steps.length - 1 && setStep(currentStep + 1);\n\tconst prevStep = () => currentStep > 0 && setStep(currentStep - 1);\n\treturn { nextStep, prevStep, currentStep };\n};\n\nexport const touchAll = async (context) => {\n\tconst errors = await context.validateForm();\n\tif (Object.keys(errors).length === 0) return true;\n\telse context.setTouched(setNestedObjectValues(errors, true));\n};\n\nexport const touchFirstSubmit = (context, ref) => {\n\tconst { executed } = ref.current;\n\tif (!context.submitCount || executed) return;\n\tif (context.isValid || context.isSubmitting) return;\n\n\tref.current.executed = true;\n\tsetTimeout(() =>\n\t\tcontext.setTouched(setNestedObjectValues(context.errors, true))\n\t);\n};\n","import React from \"react\";\nimport { SubmitButton, ResetButton } from \"formik-antd\";\nimport { useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Space, Button } from \"antd\";\nimport { useRef } from \"react\";\nimport { touchAll, touchFirstSubmit } from \"./logic\";\n\nconst SubmitLine = (props) => {\n\tconst { steps, currentStep, prevStep, nextStep } = props;\n\tconst { submitButtonLabel, resetButtonLabel } = props;\n\n\tconst context = useFormikContext();\n\tconst touch = useRef({ executed: false });\n\tconst submitStyle =\n\t\tsteps.length - 1 <= currentStep ? undefined : { display: \"none\" };\n\n\tconst next = async () => {\n\t\tconst success = await touchAll(context);\n\t\tif (success) nextStep();\n\t};\n\n\ttouchFirstSubmit(context, touch);\n\n\treturn (\n\t\t<center style={steps.length ? { marginTop: 10 } : null}>\n\t\t\t<Space>\n\t\t\t\t{steps.length && currentStep ? (\n\t\t\t\t\t<Button onClick={prevStep}></Button>\n\t\t\t\t) : null}\n\t\t\t\t{steps.length && steps.length - 1 > currentStep ? (\n\t\t\t\t\t<Button type=\"primary\" onClick={next}>\n\t\t\t\t\t\t\n\t\t\t\t\t</Button>\n\t\t\t\t) : null}\n\t\t\t\t{!steps.length ? (\n\t\t\t\t\t<ResetButton>{resetButtonLabel}</ResetButton>\n\t\t\t\t) : null}\n\t\t\t\t<SubmitButton\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tstyle={submitStyle}\n\t\t\t\t\tdisabled={false}\n\t\t\t\t>\n\t\t\t\t\t{submitButtonLabel}\n\t\t\t\t</SubmitButton>\n\t\t\t</Space>\n\t\t</center>\n\t);\n};\n\nSubmitLine.propTypes = {\n\tcurrentStep: PropTypes.number.isRequired,\n\tprevStep: PropTypes.func.isRequired,\n\tnextStep: PropTypes.func.isRequired,\n\tsteps: PropTypes.array.isRequired,\n\tresetButtonLabel: PropTypes.string,\n\tsubmitButtonLabel: PropTypes.string,\n};\n\nSubmitLine.defaultProps = {\n\tresetButtonLabel: \"\",\n\tsubmitButtonLabel: \"\",\n};\n\nexport default SubmitLine;\n","import PropTypes from \"prop-types\";\nimport { Input as FInput } from \"formik-antd\";\nimport _ from \"lodash\";\nimport React, { useState, useEffect } from \"react\";\nimport { Typography, Divider, Col, Row, Button, Input } from \"antd\";\nimport { CloseOutlined } from \"@ant-design/icons\";\nimport { usePersistFn } from \"../../shared/hook\";\nimport { useFormikContext } from \"formik\";\n\nconst OMIT_FIELDS = [\"loadBarcodeName\"];\nconst { Text } = Typography;\n\nconst Barcode = (props) => {\n  const { loadBarcodeName, name } = props;\n  const { values, setFieldValue } = useFormikContext();\n\n  const [inputValue, setInputValue] = useState(\"\");\n  const barcodes = _.get(values, name) || [];\n  const itemNames = _.get(values, \"$\" + name);\n\n  useEffect(() => {\n    (async () => {\n      try {\n        var queue = barcodes.map((a) => loadBarcodeName(a));\n        var results = await Promise.all(queue);\n        var newItemNames = {};\n        for (var i = 0, ii = queue.length; i < ii; i++)\n          newItemNames[barcodes[i]] = results[i] || \"\";\n        setFieldValue(\"$\" + name, newItemNames, false);\n      } catch (e) {}\n    })();\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, []);\n\n  const onKeyDown = usePersistFn(async (event) => {\n    if (event.key !== \"Enter\") return;\n    setFieldValue(name, [...barcodes, inputValue], false);\n    setInputValue(\"\");\n    event.preventDefault();\n    if (itemNames?.[inputValue]) return;\n\n    var temp;\n    try {\n      var newName = await loadBarcodeName(inputValue);\n      temp = { ...itemNames, [inputValue]: newName || \"\" };\n      setFieldValue(\"$\" + name, temp, false);\n    } catch (e) {\n      temp = { ...itemNames, [inputValue]: \"\" };\n      setFieldValue(\"$\" + name, temp, false);\n    }\n  });\n\n  const remove = (index) => {\n    var newValue = _.filter(barcodes, (a, i) => i !== index);\n    setFieldValue(name, newValue, false);\n  };\n\n  return (\n    <>\n      <Input\n        {..._.omit(props, OMIT_FIELDS)}\n        onKeyDown={onKeyDown}\n        validator={null}\n        name={null}\n        value={inputValue}\n        onChange={(event) => setInputValue(event.target.value)}\n      />\n      <Divider />\n      {barcodes.map((a, i) => (\n        <BarcodeLine\n          key={i + \"\"}\n          name={name + `[${i}]`}\n          itemName={itemNames?.[a]}\n          onClick={() => remove(i)}\n        />\n      ))}\n    </>\n  );\n};\n\nBarcode.propTypes = {\n  loadBarcodeName: PropTypes.func.isRequired,\n  name: PropTypes.string.isRequired,\n};\n\nconst BarcodeLine = (props) => {\n  const { name, itemName, onClick } = props;\n\n  return (\n    <>\n      <Row>\n        <Col span={8}>\n          <FInput\n            disabled={true}\n            size=\"small\"\n            style={{ marginBottom: 5 }}\n            name={name}\n          />\n        </Col>\n        <Col span={16}>\n          <Button\n            icon={<CloseOutlined />}\n            size=\"small\"\n            shape=\"circle\"\n            style={{ marginLeft: 20 }}\n            onClick={onClick}\n          />\n          <Text style={{ marginLeft: 20 }}>{itemName}</Text>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default Barcode;\n","import _ from \"lodash\";\nimport React, { useEffect, useState } from \"react\";\nimport { useFormikContext } from \"formik\";\nimport { Cascader } from \"antd\";\nimport PropTypes from \"prop-types\";\n\nconst CascaderStatic = (props) => {\n\tconst { names, fieldNames, name, notFound } = props;\n\tconst { cascaderOptions: options, notFoundText: nft } = props;\n\tconst { setFieldValue, values } = useFormikContext();\n\tconst [options2, setOptions2] = useState([]);\n\tconst { label: l, value: v, children: c } = fieldNames;\n\tconst [value, setValue] = useState([]);\n\tconst diffValue = convertNames(names, []).map((a) => _.get(values, a));\n\n\tconst syncToOtherFields = (value) => {\n\t\tvar notFound = false;\n\t\tconvertNames(names, value).forEach((a, i) => {\n\t\t\tif (!a) return;\n\t\t\tif (value[i] === nft) {\n\t\t\t\tnotFound = true;\n\t\t\t\tsetFieldValue(a, \"\", false);\n\t\t\t} else setFieldValue(a, value[i], false);\n\t\t});\n\t\tif (notFound) setFieldValue(name + \".$notFound\", true, false);\n\t};\n\n\tconst filter = (inputValue, path) =>\n\t\tpath.some(\n\t\t\t(a) => a[l].toLowerCase().indexOf(inputValue.toLowerCase()) > -1\n\t\t);\n\n\tuseEffect(() => {\n\t\tif (!notFound) setOptions2(options);\n\t\telse setOptions2(appendNotFoundText(options, l, c, v, nft));\n\t}, [notFound, options, l, c, v, nft]);\n\n\tuseEffect(() => {\n\t\tvar params = [value, values, names, options, l, c, v, nft];\n\t\tvar data = syncFromOtherFields(...params);\n\t\tsetValue(data.ans);\n\t\tif (data.notFound && data.ans.length)\n\t\t\tsetFieldValue(name + \".$notFound\", true, false);\n\t\t/* eslint-disable react-hooks/exhaustive-deps */\n\t}, [...diffValue, options, l, c, v, nft]);\n\n\tconst displayRender = (labels) => {\n\t\tif (!value.length) return null;\n\t\tconst value2 = [];\n\t\tconst names2 = convertNames(names, value);\n\t\tfor (let i = 0, ii = value.length; i < ii; i++)\n\t\t\tif (names2[i]) value2.push(labels[i] || value[i]);\n\t\treturn value2.join(\" / \");\n\t};\n\n\treturn (\n\t\t<Cascader\n\t\t\t{..._.omit(props, [\n\t\t\t\t\"names\",\n\t\t\t\t\"notFound\",\n\t\t\t\t\"notFoundText\",\n\t\t\t\t\"cascaderOptions\",\n\t\t\t])}\n\t\t\toptions={options2}\n\t\t\tshowSearch={{ filter }}\n\t\t\tonChange={syncToOtherFields}\n\t\t\tdisplayRender={displayRender}\n\t\t\tfieldNames={fieldNames}\n\t\t\tvalue={value}\n\t\t\tname={name + \".$value\"}\n\t\t/>\n\t);\n};\n\nconst convertNames = (names, value) => {\n\tif (Array.isArray(names)) return names;\n\tvar ans = [];\n\tans[value.length ? value.length - 1 : 0] = names;\n\treturn ans;\n};\n\nconst appendNotFoundText = (nodeArray, l, c, v, nft) => {\n\tvar ans = [];\n\tvar isLeaf = false;\n\tfor (var node of nodeArray) {\n\t\tvar newNode = { ...node };\n\t\tif (node[c]) newNode[c] = appendNotFoundText(node[c], l, c, v, nft);\n\t\telse isLeaf = true;\n\t\tans.push(newNode);\n\t}\n\tif (isLeaf) ans.push({ [l]: nft, [v]: nft });\n\treturn ans;\n};\n\nconst syncFromOtherFields = (value, values, names, node, l, c, v, nft) => {\n\tvar notFound = false;\n\tvar ans = [];\n\n\tif (Array.isArray(names)) {\n\t\tnames.forEach((name, i) => {\n\t\t\tvar newNode = node.find((a) => a[v] === _.get(values, name));\n\t\t\tif (!newNode) notFound = true;\n\t\t\telse if (newNode[c]) node = newNode[c];\n\t\t});\n\t\tnames.forEach((name, i) => {\n\t\t\tconst theValue = _.get(values, name);\n\t\t\tif (!name || !theValue) return;\n\t\t\tans[i] = theValue === nft ? \"\" : theValue;\n\t\t});\n\t\tif (notFound && (!ans.length || ans[0] === undefined)) notFound = false;\n\t} else {\n\t\tvar lastValue = _.get(values, names);\n\t\tvar traverse = (nodeArray, path) => {\n\t\t\tfor (var node of nodeArray) {\n\t\t\t\tif (node[v] === lastValue) {\n\t\t\t\t\tans = [...path, node[v]];\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (node[c]) {\n\t\t\t\t\tvar ret = traverse(node[c], [...path, node[v]]);\n\t\t\t\t\tif (!ret) return false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t};\n\t\tnotFound = traverse(node, []);\n\t}\n\treturn { ans, notFound };\n};\n\nCascaderStatic.propTypes = {\n\tname: PropTypes.string.isRequired,\n\tnotFound: PropTypes.bool,\n\tnotFoundText: PropTypes.string,\n\tnames: PropTypes.oneOfType([PropTypes.string, PropTypes.array]).isRequired,\n\tfieldNames: PropTypes.object,\n\tcascaderOptions: PropTypes.array.isRequired,\n};\n\nCascaderStatic.defaultProps = {\n\tnotFound: false,\n\tnotFoundText: \"\",\n\tfieldNames: undefined,\n};\n\nexport default CascaderStatic;\n","import _ from \"lodash\";\nimport React, { useEffect, useState } from \"react\";\nimport { Cascader } from \"formik-antd\";\nimport PropTypes from \"prop-types\";\nimport { Spin } from \"antd\";\nimport { useFormikContext } from \"formik\";\n\nconst CascaderAsync = (props) => {\n\tconst { cascaderFetchData: fetchData, fieldNames, name } = props;\n\tconst childrenField = fieldNames?.children || \"children\";\n\tconst valueField = fieldNames?.value || \"value\";\n\tconst [options, setOptions] = useState([]);\n\tconst [loading, setLoading] = useState(false);\n\tconst { values } = useFormikContext();\n\n\t// fetch heirarchy of data for the initial value\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tsetLoading(true);\n\t\t\tvar ans = [];\n\t\t\ttry {\n\t\t\t\tvar initValue = _.get(values, name);\n\t\t\t\tif (!Array.isArray(initValue)) initValue = [];\n\n\t\t\t\tvar queues = [fetchData([])];\n\t\t\t\tfor (let i = 0, ii = initValue.length - 1; i < ii; i++)\n\t\t\t\t\tqueues.push(fetchData(initValue.slice(0, i + 1)));\n\t\t\t\tvar results = await Promise.all(queues);\n\t\t\t\tans = results[0];\n\n\t\t\t\tfor (let i = 0, ii = initValue.length - 1; i < ii; i++) {\n\t\t\t\t\tvar currentValue = initValue[i];\n\t\t\t\t\tvar currentResult = results[i];\n\t\t\t\t\tvar node = null;\n\t\t\t\t\tfor (var j = 0, jj = currentResult.length; j < jj; j++)\n\t\t\t\t\t\tif (currentResult[j][valueField] === currentValue) {\n\t\t\t\t\t\t\tnode = currentResult[j];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\tif (!node) break;\n\t\t\t\t\tnode[childrenField] = results[i + 1];\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t\tsetOptions(ans);\n\t\t\tsetLoading(false);\n\t\t})();\n\t\t/* eslint-disable react-hooks/exhaustive-deps */\n\t}, []);\n\n\tconst loadData = async (selectedOptions) => {\n\t\tconst lastOption = selectedOptions[selectedOptions.length - 1];\n\t\tlastOption.loading = true;\n\t\ttry {\n\t\t\tconst newNodes = await fetchData(\n\t\t\t\tselectedOptions.map((a) => a[valueField])\n\t\t\t);\n\t\t\tif (Array.isArray(newNodes)) lastOption[childrenField] = newNodes;\n\t\t} catch (e) {}\n\t\tlastOption.loading = false;\n\t\tsetOptions([...options]);\n\t};\n\n\tconst dropdownRender = (a) => {\n\t\tif (!loading) return a;\n\t\treturn (\n\t\t\t<center style={{ minWidth: 150, padding: 20 }}>\n\t\t\t\t<Spin />\n\t\t\t</center>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Cascader\n\t\t\t{..._.omit(props, [\"cascaderFetchData\"])}\n\t\t\toptions={options}\n\t\t\tloadData={loadData}\n\t\t\tdropdownRender={dropdownRender}\n\t\t/>\n\t);\n};\n\nCascaderAsync.propTypes = {\n\tcascaderFetchData: PropTypes.func.isRequired,\n\tname: PropTypes.string.isRequired,\n\tfieldNames: PropTypes.object,\n};\n\nCascaderAsync.defaultProps = {\n\tfieldNames: undefined,\n};\n\nexport default CascaderAsync;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { FieldArray, useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Upload, Button } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { alert } from \"../../controller/util\";\nimport { usePersistFn } from \"../../shared/hook\";\nimport _ from \"lodash\";\n\nconst FileUpload = (props) => {\n  const { name, label, multiple, accept, dataType, disabled } = props;\n  const { uploadFileType, uploadFile, uploadFileInit } = props;\n  const [fileListState, setFileListState] = useState([]);\n  const { values, setFieldValue } = useFormikContext();\n  const abortRef = useRef(null);\n  if (abortRef.current === null) abortRef.current = new AbortController();\n\n  useEffect(() => {\n    let value = _.get(values, name);\n    if (typeof value === \"string\") value = [value];\n    if (Array.isArray(value)) setFileListState(value.map(urlToFileList));\n    uploadFileInit();\n    return () => abortRef.current.abort();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [name]);\n\n  const onUpload = usePersistFn(async (options) => {\n    const { onSuccess, onError, file } = options;\n    if (!file) return;\n\n    try {\n      const uploadURL = await uploadFile(file);\n      if (!abortRef.current.signal.aborted)\n        onSuccess({\n          status: 200,\n          uri: uploadURL.split(/[#?]/)[0],\n          url: URL.createObjectURL(file),\n        });\n    } catch (error) {\n      console.error(error);\n      onError({});\n      alert.error(\"\");\n    }\n  });\n\n  const onChangeFile = usePersistFn((info) => {\n    let newFileList = info.fileList.slice(multiple ? 0 : -1);\n    newFileList = newFileList.map((file) => {\n      if (file.response) {\n        file.uri = file.response.uri;\n        file.url = file.response.url;\n      }\n      return file;\n    });\n    setFileListState(newFileList);\n\n    let listFile = newFileList.map((a) => a.uri).filter((a) => !!a);\n    if (dataType === \"string\") listFile = listFile[0];\n    setFieldValue(name, listFile, false);\n  });\n\n  const renderHelper = usePersistFn(() => {\n    return (\n      <>\n        <Upload\n          name={name}\n          listType={uploadFileType === \"image\" ? \"picture\" : null}\n          multiple={multiple}\n          accept={accept}\n          fileList={fileListState}\n          onChange={onChangeFile}\n          customRequest={onUpload}\n          disabled={disabled}\n        >\n          <Button icon={<UploadOutlined />} disabled={disabled}>\n            {label}\n          </Button>\n        </Upload>\n      </>\n    );\n  });\n\n  return <FieldArray name={name} render={renderHelper} />;\n};\n\nFileUpload.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  multiple: PropTypes.bool,\n  accept: PropTypes.string,\n  uploadFile: PropTypes.func.isRequired,\n  uploadFileInit: PropTypes.func,\n  uploadFileType: PropTypes.oneOf([\"image\", \"file\"]).isRequired,\n  dataType: PropTypes.oneOf([\"string\", \"array\"]).isRequired,\n  disabled: PropTypes.bool,\n};\n\nFileUpload.defaultProps = {\n  label: \"\",\n  multiple: false,\n  accept: \"*\",\n  disabled: false,\n  uploadFileInit: _.noop,\n};\n\nconst urlToFileList = (a) => ({\n  name: encodeURIComponent(a.split(/[#?]/)[0].split(/\\//).pop()),\n  url: a,\n  uri: a,\n});\n\nexport default FileUpload;\n","import PropTypes from \"prop-types\";\nimport * as Raw from \"formik-antd\";\nimport Barcode from \"./components/barcode\";\nimport CascaderStatic from \"./components/cascader_static\";\nimport CascaderAsync from \"./components/cascader_async\";\nimport FileUpload from \"./components/file_upload\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { Col, Divider } from \"antd\";\n\nconst { MonthPicker } = Raw.DatePicker;\n\nconst Field = (props) => {\n\tconst { fieldType, label, required, name, validate, meta } = props;\n\tconst { labelCol, wrapperCol, colSpan, offset, className } = props;\n\tconst { containerStyle, onFieldRender, type, appendDivider } = props;\n\tconst props2 = { ...meta, name };\n\n\treturn (\n\t\t<>\n\t\t\t<Col\n\t\t\t\tspan={colSpan || 24}\n\t\t\t\toffset={offset}\n\t\t\t\tclassName={className}\n\t\t\t\tstyle={containerStyle}\n\t\t\t>\n\t\t\t\t<Raw.Form.Item\n\t\t\t\t\tlabel={label}\n\t\t\t\t\trequired={required}\n\t\t\t\t\tname={name}\n\t\t\t\t\tvalidate={validate}\n\t\t\t\t\tlabelCol={labelCol}\n\t\t\t\t\twrapperCol={wrapperCol}\n\t\t\t\t>\n\t\t\t\t\t{fieldType === \"Custom\" &&\n\t\t\t\t\t\tonFieldRender &&\n\t\t\t\t\t\tonFieldRender(props2)}\n\t\t\t\t\t{fieldType === \"Barcode\" && (\n\t\t\t\t\t\t<Barcode\n\t\t\t\t\t\t\tplaceholder=\" Enter  a001\"\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"CascaderAsync\" && (\n\t\t\t\t\t\t<CascaderAsync {...props2} />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"CascaderStatic\" && (\n\t\t\t\t\t\t<CascaderStatic {...props2} />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"Checkbox\" && <Raw.Checkbox {...props2} />}\n\t\t\t\t\t{fieldType === \"DatePicker\" && (\n\t\t\t\t\t\t<Raw.DatePicker\n\t\t\t\t\t\t\tplaceholder={\n\t\t\t\t\t\t\t\tmeta.showTime\n\t\t\t\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"MonthPicker\" && (\n\t\t\t\t\t\t<MonthPicker\n\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"Input\" && <Raw.Input {...props2} />}\n\t\t\t\t\t{fieldType === \"InputEmail\" && (\n\t\t\t\t\t\t<Raw.Input {...props2} type=\"email\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"InputNumber\" && (\n\t\t\t\t\t\t<Raw.InputNumber\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"InputURL\" && (\n\t\t\t\t\t\t<Raw.Input {...props2} type=\"url\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"InputPhone\" && (\n\t\t\t\t\t\t<Raw.Input\n\t\t\t\t\t\t\tplaceholder=\" 0811111111\"\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"InputPassword\" && (\n\t\t\t\t\t\t<Raw.Input.Password {...props2} />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"TextArea\" && (\n\t\t\t\t\t\t<Raw.Input.TextArea {...props2} />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"Select\" && (\n\t\t\t\t\t\t<Raw.Select\n\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\tstyle={{ ...props2.style, textAlign: \"left\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{props2.valid &&\n\t\t\t\t\t\t\t\tObject.entries(props2.valid).map(([k, v]) => (\n\t\t\t\t\t\t\t\t\t<Raw.Select.Option key={k} value={k}>\n\t\t\t\t\t\t\t\t\t\t{v}\n\t\t\t\t\t\t\t\t\t</Raw.Select.Option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Raw.Select>\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"Switch\" && <Raw.Switch {...props2} />}\n\t\t\t\t\t{fieldType === \"FileUpload\" && (\n\t\t\t\t\t\t<FileUpload {...props2} dataType={type} />\n\t\t\t\t\t)}\n\t\t\t\t\t{fieldType === \"TimePicker\" && (\n\t\t\t\t\t\t<Raw.TimePicker\n\t\t\t\t\t\t\tformat=\"HH:mm\"\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t\tdefaultValue={\n\t\t\t\t\t\t\t\ttypeof props2.defaultValue === \"string\"\n\t\t\t\t\t\t\t\t\t? moment(props2.defaultValue, \"HH:mm\")\n\t\t\t\t\t\t\t\t\t: props2.defaultValue\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Raw.Form.Item>\n\t\t\t</Col>\n\t\t\t{appendDivider && (\n\t\t\t\t<Col span={20} offset={2}>\n\t\t\t\t\t<Divider style={{ marginBottom: 40, marginTop: 14 }} />{\" \"}\n\t\t\t\t</Col>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nField.propTypes = {\n\tfieldType: PropTypes.oneOf([\n\t\t\"Barcode\",\n\t\t\"Checkbox\",\n\t\t\"DatePicker\",\n\t\t\"MonthPicker\",\n\t\t\"Input\",\n\t\t\"InputNumber\",\n\t\t\"InputPhone\",\n\t\t\"InputEmail\",\n\t\t\"InputURL\",\n\t\t\"InputPassword\",\n\t\t\"TextArea\",\n\t\t\"Select\",\n\t\t\"Switch\",\n\t\t\"FileUpload\",\n\t\t\"Custom\",\n\t\t\"CascaderStatic\",\n\t\t\"CascaderAsync\",\n\t\t\"TimePicker\",\n\t]).isRequired,\n\tname: PropTypes.string.isRequired,\n\tvalidate: PropTypes.func.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\trequired: PropTypes.bool.isRequired,\n\tmeta: PropTypes.object.isRequired,\n\tcolSpan: PropTypes.number,\n\toffset: PropTypes.number,\n\tlabelCol: PropTypes.object,\n\twrapperCol: PropTypes.object,\n\tclassName: PropTypes.string,\n\tcontainerStyle: PropTypes.object,\n\tonFieldRender: PropTypes.func,\n\tappendDivider: PropTypes.bool,\n};\nField.defaultProps = {\n\tlabelCol: undefined,\n\twrapperCol: undefined,\n\tcolSpan: undefined,\n\toffset: undefined,\n\tclassName: undefined,\n\tcontainerStyle: undefined,\n\tonFieldRender: undefined,\n\tappendDivider: false,\n};\n\nexport default Field;\n","const errorTranslation = {\n\t\"any.required\": \"\",\n\t\"string.empty\": \"\",\n\t\"string.uri\": \"URL \",\n\t\"string.min\": (errorObj) =>\n\t\t` ${errorObj.context.limit} `,\n\t\"string.max\": (errorObj) =>\n\t\t` ${errorObj.context.limit} `,\n\t\"string.email\": \"\",\n\t\"number.base\": \"\",\n\t\"date.base\": \"\",\n};\n\nexport const getErrorMessage = (errorObj, label) => {\n\tlabel = label || errorObj?.context?.label;\n\n\tvar { message, type, context } = errorObj;\n\tif (type === \"any.custom\") return context?.error?.message;\n\tif (/[-]/.test(message.replace(/\"[^\"]+\"/g, \"\"))) return message;\n\tif (/pattern/.test(type) && label)\n\t\tif (/fails to match the required pattern/.test(message))\n\t\t\treturn `${label}`;\n\t\telse return message;\n\n\tvar found = errorTranslation[type];\n\tif (!found && label) return `${label} (${message})`;\n\tif (!found) return ` (${message})`;\n\n\tif (typeof found === \"string\") return found;\n\treturn found(errorObj);\n};\n","import Joi from \"joi/lib/index\";\n\n// https://stackoverflow.com/questions/42370881/allow-string-to-be-null-or-empty-in-joi-and-express-validation\n// https://github.com/sideway/joi/issues/482\nexport const fixEmptyString = (joiObj, describeObj) => {\n\tconst strPaths = [];\n\tconst traverse = (node, path) => {\n\t\tif (node?.flags?.label && node?.flags?.presence !== \"required\")\n\t\t\tif (node?.type === \"string\") strPaths.push(path);\n\n\t\tvar keys = node.keys;\n\t\tif (keys) for (var key in keys) traverse(keys[key], [...path, key]);\n\t};\n\n\ttraverse(describeObj, []);\n\treturn joiObj.fork(strPaths, (schema) => schema.allow(\"\", null));\n};\n\nexport const handleDevMode = (joiObj, describeObj) => {\n\tconst strPaths = [];\n\tconst otherPaths = [];\n\tconst traverse = (node, path) => {\n\t\tif (node?.flags?.label && node?.flags?.presence) {\n\t\t\tdelete node.flags.presence;\n\t\t\tif (node?.type === \"string\") strPaths.push(path);\n\t\t\telse otherPaths.push(path);\n\t\t}\n\n\t\tvar keys = node.keys;\n\t\tif (keys) for (var key in keys) traverse(keys[key], [...path, key]);\n\t};\n\n\ttraverse(describeObj, []);\n\treturn joiObj\n\t\t.fork(otherPaths, (a) => a.optional().allow(null))\n\t\t.fork(strPaths, (a) => a.optional().allow(\"\", null));\n};\n\nexport const handleFieldHide = (joiObj, describeObj) => {\n\tconst strPaths = [];\n\tconst otherPaths = [];\n\tconst traverse = (node, path) => {\n\t\tif (node?.flags?.label && node?.metas?.[0]?.fieldHide) {\n\t\t\tif (node?.type === \"string\") strPaths.push(path);\n\t\t\telse otherPaths.push(path);\n\t\t}\n\n\t\tvar keys = node.keys;\n\t\tif (keys) for (var key in keys) traverse(keys[key], [...path, key]);\n\t};\n\n\ttraverse(describeObj, []);\n\treturn joiObj\n\t\t.fork(otherPaths, (a) => a.optional().allow(null))\n\t\t.fork(strPaths, (a) => a.optional().allow(\"\", null));\n};\n\nexport const prepare = (joiObj, describeObj, devMode) => {\n\tif (devMode) joiObj = handleDevMode(joiObj, describeObj);\n\telse {\n\t\tjoiObj = fixEmptyString(joiObj, describeObj);\n\t\tjoiObj = handleFieldHide(joiObj, describeObj);\n\t}\n\treturn joiObj.append({ _id: Joi.any() });\n};\n","export const IMAGE_FALLBACK =\n  \"data:image/png;base64,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\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Image } from \"antd\";\nimport { IMAGE_FALLBACK } from \"../../assets/fallback_image\";\n\nconst ColImage = (props) => {\n  const { src, width } = props;\n\n  if (typeof src === \"string\")\n    return <Image src={src} width={width} fallback={IMAGE_FALLBACK} />;\n\n  if (!Array.isArray(src))\n    return <Image src=\"error\" width={width} fallback={IMAGE_FALLBACK} />;\n\n  return (\n    <Image.PreviewGroup>\n      {src.map((item, index) => (\n        <Image\n          key={index.toString()}\n          src={item}\n          width={width}\n          style={{ padding: \"0 0.5rem 0.5rem 0\" }}\n          fallback={IMAGE_FALLBACK}\n        />\n      ))}\n    </Image.PreviewGroup>\n  );\n};\n\nColImage.propTypes = {\n  src: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n  width: PropTypes.number,\n};\n\nColImage.defaultProps = {\n  width: 100,\n};\n\nexport default ColImage;\n","import Joi from \"joi/lib/index\";\nimport { getErrorMessage } from \"./error_message\";\nimport _ from \"lodash\";\nimport numeral from \"numeral\";\nimport moment from \"moment\";\nimport { prepare } from \"./prepare_joi\";\nimport React from \"react\";\nimport ColImage from \"../formik/components/col_image\";\nimport memo from \"memoizee\";\n\nconst OMIT_META = [\n\t\"twoColumn\",\n\t\"defaultValue\",\n\t\"fieldType\",\n\t\"validLabel\",\n\t\"cellFormat\",\n\t\"cellWidth\",\n\t\"cellEllipsis\",\n\t\"cellHide\",\n\t\"fieldHide\",\n\t\"containerStyle\",\n\t\"step\",\n\t\"disableSorting\",\n\t\"disableFilter\",\n\t\"onFieldRender\",\n\t\"appendDivider\",\n];\n\nconst MEMO_OPTION = { promise: true, primitive: true };\n\nclass JoiWrapper {\n\tconstructor(joiObj, devMode) {\n\t\tif (!Joi.isSchema(joiObj)) throw new Error(\"Invalid Joi Object\");\n\n\t\tthis.describe = joiObj.describe();\n\t\tthis.joiObj = prepare(joiObj, this.describe, devMode);\n\t\tthis.formSpec = [];\n\t\ttraverse(this.describe, [], this.formSpec, this.joiObj);\n\t\thandleCellShow(this.formSpec);\n\t\tthis.columns = this.formSpec.map((a) => a.column);\n\t\tthis.toDefaultValues = this.toDefaultValues.bind(this);\n\t}\n\n\ttoDefaultValues() {\n\t\tif (!this.defaultValues) {\n\t\t\tvar ans = (this.defaultValues = {});\n\t\t\tfor (var { name, defaultValue } of this.formSpec) {\n\t\t\t\tif (typeof defaultValue === \"function\")\n\t\t\t\t\tdefaultValue = defaultValue();\n\t\t\t\tif (defaultValue !== undefined) _.set(ans, name, defaultValue);\n\t\t\t}\n\t\t}\n\t\treturn this.defaultValues;\n\t}\n}\n\nconst traverse = (node, path, ans, joiObj) => {\n\tif (node?.flags?.label) ans.push(new JoiField(node, path, joiObj));\n\n\tvar keys = node.keys;\n\tif (keys)\n\t\tfor (var key in keys) traverse(keys[key], [...path, key], ans, joiObj);\n};\n\nconst handleCellShow = (formSpec) => {\n\tvar hasCellShow = false;\n\tfor (var item of formSpec)\n\t\tif (item.meta.cellShow) {\n\t\t\thasCellShow = true;\n\t\t\tbreak;\n\t\t}\n\n\tif (hasCellShow)\n\t\tfor (var spec of formSpec)\n\t\t\tif (spec.meta.cellShow) delete spec.meta.cellShow;\n\t\t\telse spec.column.cellHide = true;\n};\n\nclass JoiField {\n\tconstructor(field, path, joiObj) {\n\t\tvar meta = this.getMeta(field);\n\n\t\tthis.required = field?.flags?.presence === \"required\";\n\t\tthis.label = field?.flags?.label;\n\t\tthis.name = path.join(\".\");\n\t\tthis.fieldType = guessFieldType(field, meta);\n\t\tthis._extractedSchema = this.getExtractedSchema(joiObj, path);\n\t\tthis.validate = this.validate.bind(this);\n\t\tthis.type = field.type;\n\t\tthis.defaultValue = this.getDefaultValue(field, this.fieldType);\n\t\tthis.column = this.getColumn(meta, this);\n\n\t\t//remove excess data from meta\n\t\tthis.twoColumn = meta.twoColumn;\n\t\tthis.fieldHide = meta.fieldHide;\n\t\tthis.containerStyle = meta.containerStyle;\n\t\tthis.step = meta.step;\n\t\tthis.onFieldRender = meta.onFieldRender;\n\t\tthis.appendDivider = meta.appendDivider;\n\t\tthis.meta = _.omit(meta, OMIT_META);\n\t}\n\n\tgetDefaultValue(field, fieldType) {\n\t\tvar ans = field?.flags?.default;\n\t\tif (fieldType === \"TimePicker\") return moment(ans, \"HH:mm\");\n\t\treturn ans;\n\t}\n\n\tgetExtractedSchema(joiObj, path) {\n\t\tvar { fieldType } = this;\n\t\tvar ans = joiObj.extract(path);\n\t\tif (fieldType === \"InputPhone\")\n\t\t\treturn ans.pattern(/^0([2]|[6]|[0-9][0-9])[0-9]{7}$/);\n\t\tif (fieldType === \"InputEmail\") return ans.email();\n\t\tif (fieldType === \"InputURL\")\n\t\t\treturn ans.uri({ scheme: [\"http\", \"https\"] });\n\t\treturn ans;\n\t}\n\n\tgetColumn(meta, $this) {\n\t\tvar { fieldType, type, label, name } = $this;\n\t\tvar ans = {\n\t\t\trender: meta.cellFormat,\n\t\t\twidth: meta.cellWidth,\n\t\t\tcellHide: meta.cellHide,\n\t\t\tdisableSorting: meta.disableSorting,\n\t\t\tdisableFilter: meta.disableFilter,\n\t\t\ttitle: label,\n\t\t\tdataIndex: name.split(\".\"),\n\t\t\tkey: name,\n\t\t\ttype,\n\t\t\tfieldType,\n\t\t};\n\n\t\tif (!ans.width) {\n\t\t\tif (type === \"number\") ans.width = 80;\n\t\t\telse if (type === \"date\" && !meta.showTime) ans.width = 130;\n\t\t\telse if (fieldType === \"FileUpload\") ans.width = 150;\n\t\t\telse if (fieldType === \"InputURL\") ans.width = 250;\n\t\t\telse if (fieldType === \"TextArea\") ans.width = 250;\n\t\t}\n\n\t\tif (!ans.render) {\n\t\t\tif (fieldType === \"Select\") ans.render = (a) => meta.valid[a];\n\t\t\telse if (fieldType === \"InputPhone\")\n\t\t\t\tans.render = (a) => {\n\t\t\t\t\tif (typeof a !== \"string\") return null;\n\t\t\t\t\treturn a.replace(\n\t\t\t\t\t\t/(\\d{2,3})(\\d{3})(\\d{4})/,\n\t\t\t\t\t\t(m, p1, p2, p3) => [p1, p2, p3].join(\"-\")\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\telse if (fieldType === \"TextArea\")\n\t\t\t\tans.render = (a) => {\n\t\t\t\t\tif (typeof a !== \"string\") return null;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tmaxWidth: 250,\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttitle={a + \"\"}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{a}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\telse if (\n\t\t\t\tfieldType === \"InputURL\" ||\n\t\t\t\t(fieldType === \"FileUpload\" && meta.uploadFileType !== \"image\")\n\t\t\t) {\n\t\t\t\tans.render = (a) => {\n\t\t\t\t\tif (typeof a !== \"string\") return null;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tmaxWidth: 200,\n\t\t\t\t\t\t\t\tdisplay: \"block\",\n\t\t\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttitle={a + \"\"}\n\t\t\t\t\t\t\thref={a}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{a}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\t} else if (\n\t\t\t\tfieldType === \"FileUpload\" &&\n\t\t\t\tmeta.uploadFileType === \"image\"\n\t\t\t)\n\t\t\t\tans.render = (a) => <ColImage src={a} />;\n\t\t\telse if (fieldType === \"CascaderAsync\")\n\t\t\t\tans.render = (a) => (Array.isArray(a) ? a.join(\" / \") : null);\n\t\t\telse if (fieldType === \"FieldArray\")\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\tArray.isArray(a) ? `${a.length} ` : null;\n\t\t\telse if (type === \"number\")\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\ttypeof a === \"number\" ? numeral(a).format(\"0,0\") : null;\n\t\t\telse if (type === \"boolean\")\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\ttypeof a !== \"boolean\" ? null : a ? \"\" : \"\";\n\t\t\telse if (type === \"date\") {\n\t\t\t\tvar format = meta.showTime ? \"YYYY-MM-DD HH:mm\" : \"YYYY-MM-DD\";\n\t\t\t\tif (fieldType === \"TimePicker\") format = \"HH:mm\";\n\t\t\t\tif (fieldType === \"MonthPicker\") format = \"YYYY-MM\";\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\ta instanceof Date ? moment(a).format(format) : null;\n\t\t\t} else if (type === \"array\")\n\t\t\t\tans.render = (a) => (Array.isArray(a) ? a.join(\", \") : null);\n\t\t\telse\n\t\t\t\tans.render = (a) => {\n\t\t\t\t\tif (a == null) return null;\n\t\t\t\t\tvar ans = a + \"\";\n\t\t\t\t\tif (ans === \"[object Object]\") return null;\n\t\t\t\t\treturn ans;\n\t\t\t\t};\n\t\t}\n\n\t\treturn ans;\n\t}\n\n\tgetMeta(field) {\n\t\tvar metas = field?.metas;\n\t\tvar ans = {};\n\t\tif (Array.isArray(metas) && metas.length === 1) ans = { ...metas[0] };\n\n\t\tif (field?.flags?.only && field?.allow) {\n\t\t\tvar { validLabel } = ans;\n\t\t\tvar allow = field?.allow;\n\t\t\tif (!Array.isArray(validLabel)) validLabel = allow;\n\t\t\telse if (validLabel?.length !== field?.allow?.length)\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"validLabel is required and must have the equal length\"\n\t\t\t\t);\n\t\t\tvar valid = (ans.valid = {});\n\t\t\tfor (var i = 0, ii = allow.length; i < ii; i++)\n\t\t\t\tvalid[allow[i]] = validLabel[i];\n\t\t}\n\n\t\tif (ans.loadBarcodeName)\n\t\t\tans.loadBarcodeName = memo(ans.loadBarcodeName, MEMO_OPTION);\n\t\tif (ans.cascaderFetchData)\n\t\t\tans.cascaderFetchData = memo(ans.cascaderFetchData, MEMO_OPTION);\n\n\t\treturn ans;\n\t}\n\n\tvalidate(value) {\n\t\tvar rawError = this._extractedSchema.validate(value);\n\t\tif (this.required && !value)\n\t\t\treturn getErrorMessage(\n\t\t\t\t{ type: \"any.required\", message: \"\" },\n\t\t\t\tthis.label\n\t\t\t);\n\n\t\tif (!rawError.error || !Array.isArray(rawError.error.details))\n\t\t\treturn null;\n\n\t\tfor (var errorObj of rawError.error.details)\n\t\t\treturn getErrorMessage(errorObj, this.label);\n\n\t\treturn null;\n\t}\n}\n\nconst guessFieldType = (field, meta) => {\n\tif (meta.fieldType) return meta.fieldType;\n\tif (meta.onFieldRender) return \"Custom\";\n\tif (meta.loadBarcodeName) return \"Barcode\";\n\tif (meta.getUploadUrl || meta.firebaseConfig || meta.uploadFile)\n\t\treturn \"FileUpload\";\n\tif (meta.cascaderFetchData) return \"CascaderAsync\";\n\tif (meta.cascaderOptions) return \"CascaderStatic\";\n\tif (field.type === \"boolean\") return \"Checkbox\";\n\tif (field.type === \"date\") return \"DatePicker\";\n\tif (field.type === \"number\") return \"InputNumber\";\n\tif (meta.valid) return \"Select\";\n\treturn \"Input\";\n};\n\nexport { guessFieldType, JoiWrapper };\n","import React, { useMemo, useRef } from \"react\";\nimport { Col, Row, Button, Divider } from \"antd\";\nimport { useFormikContext } from \"formik\";\nimport _ from \"lodash\";\nimport { MinusCircleOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport { JoiWrapper } from \"../joi/joi_wrapper\";\nimport Field from \"./field\";\nimport PropTypes from \"prop-types\";\n\nconst FieldArray = (props) => {\n\tconst { name, label, _extractedSchema, required } = props;\n\tconst { containerStyle, appendDivider, meta } = props;\n\tconst props2 = { ...meta, name };\n\n\tconst { values, setFieldValue } = useFormikContext();\n\tconst arrayValues = _.get(values, name) || [{}];\n\tconst keys = useRef(null);\n\tkeys.current = keys.current || arrayValues.map(() => Math.random() + \"\");\n\n\tconst { formSpec, min, max } = useMemo(() => {\n\t\tvar arraySchema = _extractedSchema?.$_terms?.items?.[0];\n\t\tif (!arraySchema) throw new Error(\"schema not found\");\n\t\treturn {\n\t\t\tformSpec: new JoiWrapper(arraySchema).formSpec,\n\t\t\tmin: _extractedSchema?._singleRules?.get(\"min\")?.args?.limit || 1,\n\t\t\tmax: _extractedSchema?._singleRules?.get(\"max\")?.args?.limit,\n\t\t};\n\t}, [_extractedSchema]);\n\n\tconst addRow = () => {\n\t\tif (max && arrayValues.length >= max) return;\n\t\tconst newValue = _.fromPairs(\n\t\t\tformSpec.map((a) => [a.name, a.defaultValue])\n\t\t);\n\t\tsetFieldValue(name, [...arrayValues, newValue], false);\n\t\tkeys.current.push(Math.random() + \"\");\n\t};\n\tconst removeRow = (index) => {\n\t\tif (arrayValues.length <= min) return;\n\t\tkeys.current = _.filter(keys.current, (a, i) => i !== index);\n\t\tvar newValue = _.filter(arrayValues, (a, i) => i !== index);\n\t\tsetFieldValue(name, newValue, false);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<Col span=\"24\" style={{ marginBottom: 30, ...containerStyle }}>\n\t\t\t\t<Row gutter=\"8\">\n\t\t\t\t\t<Col span=\"4\" align=\"right\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t? \"field-array-span-required field-array-span\"\n\t\t\t\t\t\t\t\t\t: \"field-array-span\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span=\"18\">\n\t\t\t\t\t\t{arrayValues.map((a, i) => (\n\t\t\t\t\t\t\t<Row key={keys.current[i]}>\n\t\t\t\t\t\t\t\t<Col span=\"20\">\n\t\t\t\t\t\t\t\t\t<Row gutter=\"16\">\n\t\t\t\t\t\t\t\t\t\t{formSpec.map((b) => (\n\t\t\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\t\t\t{...b}\n\t\t\t\t\t\t\t\t\t\t\t\tname={`${name}[${i}].${b.name}`}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={b.name}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel=\"\"\n\t\t\t\t\t\t\t\t\t\t\t\twrapperCol={{ span: 24 }}\n\t\t\t\t\t\t\t\t\t\t\t\tcolSpan={12}\n\t\t\t\t\t\t\t\t\t\t\t\toffset={0}\n\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t...b.meta,\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder: b.label,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t\t<Col span=\"1\" offset=\"1\">\n\t\t\t\t\t\t\t\t\t<MinusCircleOutlined\n\t\t\t\t\t\t\t\t\t\tonClick={() => removeRow(i)}\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: 16, marginTop: 8 }}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t))}\n\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttype=\"dashed\"\n\t\t\t\t\t\t\tonClick={addRow}\n\t\t\t\t\t\t\tblock\n\t\t\t\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Col>\n\t\t\t{appendDivider && (\n\t\t\t\t<Col span={20} offset={2}>\n\t\t\t\t\t<Divider style={{ marginBottom: 40, marginTop: 14 }} />{\" \"}\n\t\t\t\t</Col>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nFieldArray.propTypes = {\n\tname: PropTypes.string.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\trequired: PropTypes.bool.isRequired,\n\tmeta: PropTypes.object.isRequired,\n\tcontainerStyle: PropTypes.object,\n\tappendDivider: PropTypes.bool,\n};\nFieldArray.defaultProps = {\n\tcontainerStyle: undefined,\n\tappendDivider: false,\n};\n\nexport default FieldArray;\n","import PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormikContext } from \"formik\";\nimport Field from \"./field\";\nimport FieldArray from \"./field_array\";\nimport { calculateSpan } from \"./logic\";\n\nconst InnerForm = (props) => {\n\tconst { formSpec, inline, currentStep } = props;\n\tconst { values } = useFormikContext();\n\n\tconst formSpec2 = useMemo(() => {\n\t\treturn calculateSpan(\n\t\t\tformSpec.filter((spec) => {\n\t\t\t\tconst { fieldHide, step } = spec;\n\t\t\t\tif (typeof fieldHide === \"function\") {\n\t\t\t\t\tif (fieldHide(values)) return false;\n\t\t\t\t} else if (fieldHide) return false;\n\t\t\t\tif (currentStep !== -1 && currentStep !== step) return false;\n\t\t\t\treturn true;\n\t\t\t}),\n\t\t\tinline\n\t\t);\n\t}, [formSpec, values, inline, currentStep]);\n\n\treturn formSpec2.map((props) => {\n\t\tif (props.fieldType === \"FieldArray\")\n\t\t\treturn <FieldArray {...props} key={props.name} />;\n\n\t\tconst meta = props.meta || {};\n\t\treturn (\n\t\t\t<Field\n\t\t\t\t{...props}\n\t\t\t\tkey={props.name}\n\t\t\t\tmeta={\n\t\t\t\t\tinline\n\t\t\t\t\t\t? { ...meta, style: { ...meta.style, ...inlineStyle } }\n\t\t\t\t\t\t: meta\n\t\t\t\t}\n\t\t\t/>\n\t\t);\n\t});\n};\n\nconst inlineStyle = { width: 150 };\n\nInnerForm.propTypes = {\n\tformSpec: PropTypes.array.isRequired,\n\tinline: PropTypes.bool.isRequired,\n\tcurrentStep: PropTypes.number.isRequired,\n};\n\nexport default InnerForm;\n","import { Form, SubmitButton } from \"formik-antd\";\nimport { Formik } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Row, Col, Divider, Steps } from \"antd\";\nimport { useSteps } from \"./logic\";\nimport React from \"react\";\nimport SubmitLine from \"./submit_line\";\nimport _ from \"lodash\";\nimport InnerForm from \"./inner_form\";\nimport { usePersistFn } from \"../shared/hook\";\n\nconst { Step } = Steps;\n\nconst CombinedForm = (props) => {\n\tconst { onSubmit, inline, initialValues, steps } = props;\n\tconst { resetButtonLabel, submitButtonLabel, schema } = props;\n\tconst { nextStep, prevStep, currentStep } = useSteps(steps);\n\n\tconst onSubmit2 = usePersistFn(async (postData, actions) => {\n\t\tvar names = schema.formSpec.map((a) => a.name);\n\t\tvar ans = _.pick(\n\t\t\tpostData,\n\t\t\tnames.filter((a) => !/^\\$|\\.\\$/.test(a))\n\t\t);\n\t\tawait onSubmit(ans, actions, postData);\n\t});\n\n\tconst formProp = inline\n\t\t? {}\n\t\t: { labelCol: { span: 4 }, wrapperCol: { span: 18 }, colon: true };\n\n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={initialValues || schema.toDefaultValues()}\n\t\t\tonSubmit={onSubmit2}\n\t\t>\n\t\t\t{() => (\n\t\t\t\t<Form {...formProp}>\n\t\t\t\t\t{steps.length ? (\n\t\t\t\t\t\t<Row style={{ marginBottom: 40, marginTop: 20 }}>\n\t\t\t\t\t\t\t<Col offset={2} span={20}>\n\t\t\t\t\t\t\t\t<Steps size=\"small\" current={currentStep}>\n\t\t\t\t\t\t\t\t\t{steps.map((a) => (\n\t\t\t\t\t\t\t\t\t\t<Step key={a} title={a} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Steps>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Row\n\t\t\t\t\t\tgutter={inline ? 20 : 8}\n\t\t\t\t\t\tjustify={inline ? \"center\" : undefined}\n\t\t\t\t\t>\n\t\t\t\t\t\t<InnerForm\n\t\t\t\t\t\t\tformSpec={schema.formSpec}\n\t\t\t\t\t\t\tcurrentStep={currentStep}\n\t\t\t\t\t\t\tinline={inline}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{inline && (\n\t\t\t\t\t\t\t<Col span={3}>\n\t\t\t\t\t\t\t\t<SubmitButton\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 24 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{submitButtonLabel}\n\t\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{inline && <Divider style={{ marginTop: 10 }} />}\n\t\t\t\t\t{!inline && (\n\t\t\t\t\t\t<SubmitLine\n\t\t\t\t\t\t\tsteps={steps}\n\t\t\t\t\t\t\tcurrentStep={currentStep}\n\t\t\t\t\t\t\tprevStep={prevStep}\n\t\t\t\t\t\t\tnextStep={nextStep}\n\t\t\t\t\t\t\tsubmitButtonLabel={submitButtonLabel}\n\t\t\t\t\t\t\tresetButtonLabel={resetButtonLabel}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Form>\n\t\t\t)}\n\t\t</Formik>\n\t);\n};\n\nCombinedForm.propTypes = {\n\tinitialValues: PropTypes.any,\n\tonSubmit: PropTypes.func.isRequired,\n\tschema: PropTypes.object,\n\tinline: PropTypes.bool,\n\tsteps: PropTypes.array,\n};\n\nCombinedForm.defaultProps = {\n\tinitialValues: null,\n\tschema: null,\n\tinline: false,\n\tsteps: [],\n};\n\nexport default CombinedForm;\n","import { Typography } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst { Title, Paragraph } = Typography;\n\nconst Header = (props) => {\n\tconst { title, description, small, icon } = props;\n\tconst { headerContainerStyle, titleStyle, descriptionStyle } = props;\n\n\treturn (\n\t\t<div style={headerContainerStyle}>\n\t\t\t<Title level={small ? 3 : 2} style={titleStyle}>\n\t\t\t\t{icon} {title}\n\t\t\t</Title>\n\t\t\t{description && (\n\t\t\t\t<Paragraph style={descriptionStyle}>{description}</Paragraph>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nHeader.propTypes = {\n\ttitle: PropTypes.string,\n\tdescription: PropTypes.string,\n\theaderContainerStyle: PropTypes.object,\n\tsmall: PropTypes.bool,\n\ticon: PropTypes.node,\n};\n\nHeader.defaultProps = {\n\ttitle: \"\",\n\tdescription: \"\",\n\theaderContainerStyle: { marginBottom: 20, textAlign: \"center\" },\n\ttitleStyle: {},\n\tdescriptionStyle: { textAlign: \"left\" },\n\tsmall: false,\n\ticon: null,\n};\n\nexport default Header;\n","import PropTypes from \"prop-types\";\nimport { Modal, Alert } from \"antd\";\nimport Form from \"../formik/form\";\nimport Header from \"./header\";\nimport React from \"react\";\n\nconst EditModal = (props) => {\n\tconst { visible, onClose, isEdit, schema, onSubmit, steps } = props;\n\tconst { createHeader, editHeader, error, initialValue } = props;\n\tconst title = steps.length ? \"\" : isEdit ? editHeader : createHeader;\n\n\t//need to unmount in order for initialValue to work\n\tif (!visible) return null;\n\n\treturn (\n\t\t<Modal\n\t\t\tcentered\n\t\t\tvisible={visible}\n\t\t\twidth={800}\n\t\t\tfooter={null}\n\t\t\tonCancel={onClose}\n\t\t\tmaskClosable={false}\n\t\t>\n\t\t\t{title && <Header title={title} small />}\n\t\t\t{error && (\n\t\t\t\t<Alert\n\t\t\t\t\tmessage={error.message || error}\n\t\t\t\t\ttype=\"error\"\n\t\t\t\t\tshowIcon\n\t\t\t\t\tstyle={{ margin: 30, marginBottom: 20, marginTop: -10 }}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Form\n\t\t\t\tinitialValues={initialValue}\n\t\t\t\tschema={schema}\n\t\t\t\tonSubmit={onSubmit}\n\t\t\t\tsteps={steps}\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nEditModal.propTypes = {\n\tisEdit: PropTypes.bool.isRequired,\n\tvisible: PropTypes.bool.isRequired,\n\tonClose: PropTypes.func.isRequired,\n\tschema: PropTypes.object.isRequired,\n\tsteps: PropTypes.array.isRequired,\n\teditHeader: PropTypes.string,\n\tcreateHeader: PropTypes.string,\n\terror: PropTypes.instanceOf(Error),\n\tinitialValue: PropTypes.object,\n\tonSubmit: PropTypes.func.isRequired,\n};\n\nEditModal.defaultProps = {\n\tcreateHeader: \"\",\n\teditHeader: \"\",\n\terror: null,\n\tinitialValue: undefined,\n};\n\nexport default EditModal;\n","import { utils, writeFile, read, SSF } from \"xlsx\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\n\nexport const tableToExcel = (dataArray, fileName) => {\n\tdataArray.forEach(handleNested);\n\tvar worksheet = utils.json_to_sheet(dataArray, { dateNF: \"yyyy-mm-dd\" });\n\tif (!fileName) return worksheet;\n\n\tvar workbook = utils.book_new();\n\tutils.book_append_sheet(workbook, worksheet, \"Sheet 1\");\n\twriteFile(workbook, fileName);\n};\n\nexport const parseExcelDate = (date) => {\n\tvar a = SSF.parse_date_code(date);\n\tvar momentInput = { y: a.y, M: a.m - 1, d: a.d, h: a.H, m: a.M, s: a.S };\n\treturn moment(momentInput).parseZone(new Date()).toDate();\n};\n\nexport const excelToTable = (fileObject) =>\n\tnew Promise((res, rej) => {\n\t\tvar reader = new FileReader();\n\t\treader.onload = (e) => {\n\t\t\ttry {\n\t\t\t\tvar data = e.target.result;\n\t\t\t\tvar workbook = read(data, { type: \"binary\" });\n\t\t\t\tvar firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n\t\t\t\tvar ans = utils.sheet_to_json(firstSheet);\n\t\t\t\tres(ans.map(parse));\n\t\t\t} catch (error) {\n\t\t\t\trej(error);\n\t\t\t}\n\t\t};\n\t\treader.onerror = () => rej(reader.error);\n\t\treader.readAsBinaryString(fileObject);\n\t});\n\nconst parse = (a) => {\n\treturn _.omit(a, \"__rowNum__\");\n};\n\nconst handleNested = (obj) => {\n\tfor (var key in obj) {\n\t\tvar value = obj[key];\n\t\tif (isObject(value))\n\t\t\tthrow new Error(\"XLSX layer does not support object\");\n\t\tif (Array.isArray(value))\n\t\t\tthrow new Error(\"XLSX layer does not support array\");\n\t}\n};\n\nconst isObject = (x) => Object.prototype.toString.call(x) === \"[object Object]\";\n","import _ from \"lodash\";\nimport moment from \"moment\";\nimport { getErrorMessage } from \"./error_message\";\nimport Joi from \"joi/lib/index\";\nimport { JoiWrapper, guessFieldType } from \"./joi_wrapper\";\n\nconst ALLOWED_TYPES = new Set([\n\t\"array\",\n\t\"boolean\",\n\t\"date\",\n\t\"number\",\n\t\"object\",\n\t\"string\",\n]);\nconst PICKED_TYPES = [\"type\", \"fieldType\", \"meta\"];\n\n//TODO fixEmptyString\nexport const serializeTable = (table, schema) => {\n\tvar columns = {};\n\tvar formSpec = makeFormSpec(schema, table);\n\tvar header = makeHeader(formSpec, table, columns, \"\");\n\tvar ans = [header];\n\tfor (var rowData of table) ans.push(makeBodyRow(rowData, header, columns));\n\treturn ans;\n};\n\nconst makeBodyRow = (rowData, header, columns) => {\n\tvar ans = {};\n\tfor (var fullName in header) {\n\t\tvar current = _.get(rowData, fullName);\n\t\tvar { type, meta, fieldType } = columns[fullName];\n\t\tif (type === \"date\")\n\t\t\tcurrent = moment(current).format(getTimeFormat(fieldType, meta));\n\t\tans[fullName] = current;\n\t}\n\treturn ans;\n};\n\nconst makeFormSpec = (schema) =>\n\tschema.formSpec.filter(\n\t\t(a) =>\n\t\t\ta.fieldHide !== true &&\n\t\t\tALLOWED_TYPES.has(a.type) &&\n\t\t\t!/^\\$|\\.\\$/.test(a.name)\n\t);\n\nconst getTimeFormat = (fieldType, meta) => {\n\tif (fieldType === \"TimePicker\") return \"HH:mm\";\n\tif (fieldType === \"MonthPicker\") return \"YYYY-MM\";\n\treturn meta.showTime ? \"YYYY-MM-DD HH:mm\" : \"YYYY-MM-DD\";\n};\n\nconst makeHeader = (formSpec, table, columns, prefix) => {\n\tvar ans = {};\n\tfor (var spec of formSpec) {\n\t\tif (spec.type !== \"array\") {\n\t\t\tans[prefix + spec.name] = spec.label;\n\t\t\tcolumns[prefix + spec.name] = _.pick(spec, PICKED_TYPES);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar column = _.chain(table)\n\t\t\t.map(spec.name)\n\t\t\t.filter((a) => Array.isArray(a))\n\t\t\t.map(\"length\")\n\t\t\t.max()\n\t\t\t.value();\n\t\tvar subSpec = spec._extractedSchema?.$_terms?.items?.[0];\n\t\tif (!subSpec || !ALLOWED_TYPES.has(subSpec.type)) continue;\n\n\t\tif (subSpec.type !== \"object\") {\n\t\t\tfor (let i = 0, ii = column || 1; i < ii; i++) {\n\t\t\t\tvar key = prefix + spec.name + `[${i}]`;\n\t\t\t\tans[key] = spec.label + `[${i + 1}]`;\n\t\t\t\tvar meta = subSpec?.$_terms?.metas?.[0] || {};\n\t\t\t\tvar type = subSpec.type;\n\t\t\t\tcolumns[key] = {\n\t\t\t\t\ttype,\n\t\t\t\t\tmeta,\n\t\t\t\t\tfieldType: guessFieldType({ type }, meta),\n\t\t\t\t};\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar formSpec2 = new JoiWrapper(subSpec).formSpec;\n\t\tvar table2 = _.map(table, spec.name);\n\t\tfor (let i = 0, ii = column || 1; i < ii; i++) {\n\t\t\tvar prefix2 = spec.name + `[${i}].`;\n\t\t\tvar ans2 = makeHeader(formSpec2, table2, columns, prefix2);\n\t\t\t// eslint-disable-next-line\n\t\t\tans2 = _.mapValues(ans2, (a) => `${spec.label} ${a}[${i + 1}]`);\n\t\t\t_.assign(ans, ans2);\n\t\t}\n\t}\n\treturn ans;\n};\n\nvar tzOffset = null;\nconst getTzOffset = () => {\n\tif (!tzOffset) tzOffset = new Date().getTimezoneOffset() / 60;\n\treturn tzOffset;\n};\n\nexport const deserializeTable = (table, schema) => {\n\tvar columns = {};\n\tvar formSpec = makeFormSpec(schema, table);\n\tmakeHeader(formSpec, table, columns, \"\");\n\ttable = table.slice(1);\n\n\tvar errors = [];\n\tvar ans = [];\n\tfor (var i = 0, ii = table.length; i < ii; i++) {\n\t\ttry {\n\t\t\tans.push(deserializeRow(table[i], columns, schema));\n\t\t} catch (error) {\n\t\t\tif (error.details)\n\t\t\t\terrors = [...errors, ...error.details.map(mapError(i))];\n\t\t\telse errors = [...errors, mapError(i)(error)];\n\t\t}\n\t}\n\n\tif (errors.length) throw new SerializeError(errors);\n\treturn ans;\n};\n\nconst deserializeRow = (excelRow, columns, schema) => {\n\tvar ans = {};\n\tfor (var key in excelRow) {\n\t\tvar value = excelRow[key];\n\t\tvar keyWithoutArray = key.replace(/\\[.+\\]/g, \"[0]\");\n\t\tvar column = columns[keyWithoutArray];\n\t\tif (!column) continue;\n\n\t\tif (typeof value !== \"string\") {\n\t\t\t_.set(ans, key, value);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar { type, fieldType, meta } = column;\n\t\tvalue = value.trim();\n\t\tif (type === \"number\") value = parseFloat(value);\n\t\telse if (type === \"boolean\") value = /true/i.test(value);\n\t\telse if (type === \"date\") {\n\t\t\tvalue = moment(value, getTimeFormat(fieldType, meta)).toDate();\n\t\t\tif (fieldType === \"TimePicker\") {\n\t\t\t\tvalue.setFullYear(1900);\n\t\t\t\tvalue.setDate(1);\n\t\t\t\tvalue.setMonth(0);\n\t\t\t} else if (!meta.showTime) {\n\t\t\t\tvar newHours = value.getHours() - getTzOffset();\n\t\t\t\tif (newHours < 0) {\n\t\t\t\t\tnewHours += 24;\n\t\t\t\t\tvalue.setDate(value.getDate() - 1);\n\t\t\t\t}\n\t\t\t\tvalue.setHours(newHours);\n\t\t\t}\n\t\t}\n\t\t_.set(ans, key, value);\n\t}\n\treturn Joi.attempt(ans, schema.joiObj, { abortEarly: false });\n};\n\nconst mapError = (i) => {\n\treturn (a) => ({\n\t\tline: i + 3,\n\t\tlabel: a.context?.label || \"\",\n\t\tmessage: a.context ? getErrorMessage(a) : a.message,\n\t\ttype: a.type || \"error\",\n\t});\n};\n\nexport class SerializeError extends Error {\n\tconstructor(errors) {\n\t\tsuper(\"SerializeError\");\n\t\tthis.name = \"SerializeError\";\n\t\tthis.errors = errors;\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n}\n","import PropTypes from \"prop-types\";\nimport { Modal, Table } from \"antd\";\nimport Header from \"./header\";\nimport { ExclamationCircleFilled } from \"@ant-design/icons\";\nimport React from 'react';\n\nconst COLUMNS = [\n\t{ title: \"\", dataIndex: \"line\", width: 100 },\n\t{ title: \"\", dataIndex: \"label\", width: 100 },\n\t{ title: \"\", dataIndex: \"message\" },\n].map((a) => ({ ...a, key: a.dataIndex }));\n\nconst ExcelErrorModal = (props) => {\n\tconst { visible, onClose, errors, title } = props;\n\tconst dataSource = errors.map((a, i) => ({ ...a, key: i }));\n\n\treturn (\n\t\t<Modal\n\t\t\tcentered\n\t\t\tvisible={visible}\n\t\t\twidth={600}\n\t\t\tfooter={null}\n\t\t\tonCancel={onClose}\n\t\t>\n\t\t\t<Header title={title} icon={<ExclamationCircleFilled style={{color:'#faad14'}} />} small />\n\t\t\t<Table\n\t\t\t\tcolumns={COLUMNS}\n\t\t\t\tdataSource={dataSource}\n\t\t\t\ttableScroll={{ y: 600 }}\n\t\t\t\tpagination={false}\n\t\t\t\tsize=\"small\"\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nExcelErrorModal.propTypes = {\n\tvisible: PropTypes.bool.isRequired,\n\tonClose: PropTypes.func.isRequired,\n\terrors: PropTypes.array,\n\ttitle: PropTypes.string,\n};\nExcelErrorModal.defaultProps = {\n\terrors: [],\n\ttitle: \"\",\n};\n\nexport default ExcelErrorModal;\n","import PropTypes from \"prop-types\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table from \"../table\";\nimport { alert, appendId } from \"./util\";\nimport { useModal, useAPI, usePersistFn } from \"../shared/hook\";\nimport EditModal from \"./edit_modal\";\nimport Header from \"./header\";\nimport { JoiWrapper } from \"../joi/joi_wrapper\";\nimport { tableToExcel, excelToTable } from \"../shared/xlsx\";\nimport { deserializeTable, serializeTable } from \"../joi/serialize2\";\nimport ExcelErrorModal from \"./excel_error_modal\";\nimport Form from \"../formik/form\";\nimport Joi from \"joi/lib/index\";\nimport React from \"react\";\nimport _ from \"lodash\";\n\nconst INITIAL_FORM_STATUS = { isEdit: false, initialValue: null, error: null };\n\nconst Controller = (props) => {\n\tconst { getMany, createMany, updateOne, deleteMany, devMode } = props;\n\tconst { title, description, uploadPreviewUrl, disableSuccessModal } = props;\n\tconst { schema, querySchema, rowButtons, tableScroll, steps } = props;\n\tconst { disableExcelDownload, disableExcelUpload, tableButtons } = props;\n\n\tconst [editModalData, setEditModalData] = useState(INITIAL_FORM_STATUS);\n\tconst [excelError, setExcelError] = useState([]);\n\tconst [getManyStatus, doGetMany, setData] = useAPI(getMany, true, true);\n\tconst [deleteStatus, doDelete] = useAPI(deleteMany);\n\tconst editModalControl = useModal();\n\tconst excelModalControl = useModal();\n\tconst schema2 = useMemo(() => new JoiWrapper(schema, devMode), [\n\t\tschema,\n\t\tdevMode,\n\t]);\n\tconst querySchema2 = useMemo(\n\t\t() => querySchema && new JoiWrapper(querySchema, devMode),\n\t\t[querySchema, devMode]\n\t);\n\n\tconst onCreate = usePersistFn(() => {\n\t\tsetEditModalData(INITIAL_FORM_STATUS);\n\t\teditModalControl.setVisible(true);\n\t});\n\n\tconst onEdit = usePersistFn((obj) => {\n\t\tsetEditModalData({ isEdit: true, initialValue: obj, error: null });\n\t\teditModalControl.setVisible(true);\n\t});\n\n\tconst updateDataAtRow = usePersistFn((rowData) => {\n\t\tvar tableData = getManyStatus.data;\n\t\tif (!Array.isArray(rowData)) rowData = [rowData];\n\t\tvar ids = new Set(rowData.map((a) => a._id));\n\t\tsetData(tableData.map((a, i) => (ids.has(a._id) ? rowData[i] : a)));\n\t});\n\n\tconst onSubmit = usePersistFn(async (data, actions, originalData) => {\n\t\tsetEditModalData((a) => ({ ...a, error: null }));\n\t\ttry {\n\t\t\tdata = Joi.attempt(data, schema2.joiObj);\n\t\t\tschema2.formSpec\n\t\t\t\t.map((a) => a.name)\n\t\t\t\t.filter((a) => /^\\$|\\.\\$/.test(a))\n\t\t\t\t.forEach((a) => _.unset(data, a));\n\n\t\t\tif (editModalData.isEdit) {\n\t\t\t\tawait updateOne(data, originalData);\n\t\t\t\tupdateDataAtRow(originalData);\n\t\t\t\tif (!disableSuccessModal) alert.success(\"\");\n\t\t\t\teditModalControl.setVisible(false);\n\t\t\t} else {\n\t\t\t\tvar returnData = await createMany([data]);\n\t\t\t\tif (!Array.isArray(returnData) || returnData.length !== 1)\n\t\t\t\t\treturn alert.error(\"\");\n\t\t\t\tdata = appendId(returnData[0]);\n\t\t\t\tsetData([data, ...getManyStatus.data]);\n\t\t\t\tif (!disableSuccessModal) alert.success(\"\");\n\t\t\t\teditModalControl.setVisible(false);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetEditModalData((a) => ({ ...a, error: e }));\n\t\t\tactions.setSubmitting(false);\n\t\t}\n\t});\n\n\tconst onDelete = usePersistFn(async (selectedKeys) => {\n\t\ttry {\n\t\t\tvar { data } = getManyStatus;\n\t\t\tvar selectedSet = new Set(selectedKeys);\n\t\t\tvar values = data.filter((a) => selectedSet.has(a._id));\n\t\t\tawait doDelete(values);\n\t\t\tsetData(data.filter((a) => !selectedSet.has(a._id)));\n\t\t} catch (e) {\n\t\t\talert.error(e);\n\t\t}\n\t});\n\n\t/* eslint-disable react-hooks/exhaustive-deps */\n\tuseEffect(() => {\n\t\tdoGetMany({})\n\t\t\t.then((data) => setData(data.map(appendId)))\n\t\t\t.catch((error) => alert.error(error));\n\t}, [schema]);\n\n\tconst onQuery = usePersistFn(async (query) => {\n\t\ttry {\n\t\t\tquery = Joi.attempt(query, querySchema2.joiObj);\n\t\t\tvar data = await doGetMany(query);\n\t\t\tsetData(data.map(appendId));\n\t\t} catch (e) {\n\t\t\talert.error(e);\n\t\t}\n\t});\n\n\tconst onDownloadExcel = usePersistFn(() => {\n\t\tif (!getManyStatus.data) return;\n\t\tvar table = serializeTable(getManyStatus.data, schema2, true);\n\t\ttableToExcel(table, \"export.xlsx\");\n\t});\n\tconst onExampleExcel = usePersistFn(() => {\n\t\tif (uploadPreviewUrl)\n\t\t\treturn window.open(uploadPreviewUrl, \"_blank\").focus();\n\t\tif (!getManyStatus.data) return;\n\t\tvar table = serializeTable(getManyStatus.data.slice(0, 3), schema2);\n\t\ttableToExcel(table, \"example.xlsx\");\n\t});\n\tconst onUploadExcel = usePersistFn(async (a) => {\n\t\ttry {\n\t\t\tvar rawExcel = await excelToTable(a);\n\t\t\tvar newRows = deserializeTable(rawExcel, schema2);\n\t\t\tvar newData = await createMany(newRows, newRows);\n\t\t\tif (!Array.isArray(newData) || newData.length !== newRows.length)\n\t\t\t\treturn alert.error(\"\");\n\n\t\t\tsetData([...newData.map(appendId), ...getManyStatus.data]);\n\t\t\tif (!disableSuccessModal) alert.success(\"\");\n\t\t} catch (e) {\n\t\t\tif (e.name !== \"SerializeError\") return alert.error(e);\n\t\t\tsetExcelError(e.errors);\n\t\t\texcelModalControl.setVisible(true);\n\t\t}\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<Header title={title} description={description} />\n\t\t\t{querySchema && (\n\t\t\t\t<Form\n\t\t\t\t\tschema={querySchema2}\n\t\t\t\t\tonSubmit={onQuery}\n\t\t\t\t\tsubmitButtonLabel=\"\"\n\t\t\t\t\tinline\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Table\n\t\t\t\t{...getManyStatus}\n\t\t\t\tloading={getManyStatus.loading || deleteStatus.loading}\n\t\t\t\tschema={schema2}\n\t\t\t\tquerySchema={querySchema}\n\t\t\t\trowButtons={rowButtons}\n\t\t\t\tonEdit={updateOne && onEdit}\n\t\t\t\tonCreate={createMany && onCreate}\n\t\t\t\tonDelete={deleteMany && onDelete}\n\t\t\t\tonDownloadExcel={\n\t\t\t\t\t!disableExcelDownload && getManyStatus.data?.length\n\t\t\t\t\t\t? onDownloadExcel\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\tonUploadExcel={\n\t\t\t\t\t!disableExcelUpload && createMany ? onUploadExcel : null\n\t\t\t\t}\n\t\t\t\tonExampleExcel={\n\t\t\t\t\t!disableExcelUpload &&\n\t\t\t\t\tcreateMany &&\n\t\t\t\t\t(uploadPreviewUrl || getManyStatus.data?.length)\n\t\t\t\t\t\t? onExampleExcel\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\ttableScroll={tableScroll}\n\t\t\t\tupdateDataAtRow={updateDataAtRow}\n\t\t\t\ttableButtons={tableButtons}\n\t\t\t/>\n\t\t\t<EditModal\n\t\t\t\t{...editModalControl}\n\t\t\t\t{...editModalData}\n\t\t\t\tschema={schema2}\n\t\t\t\tonSubmit={onSubmit}\n\t\t\t\tsteps={steps}\n\t\t\t/>\n\t\t\t<ExcelErrorModal {...excelModalControl} errors={excelError} />\n\t\t</>\n\t);\n};\n\nController.propTypes = {\n\t// API\n\tgetMany: PropTypes.func.isRequired,\n\tcreateMany: PropTypes.func,\n\tupdateOne: PropTypes.func,\n\tdeleteMany: PropTypes.func,\n\n\t// modifier\n\ttitle: PropTypes.string.isRequired,\n\tdescription: PropTypes.string,\n\ttableScroll: PropTypes.object,\n\trowButtons: PropTypes.array,\n\ttableButtons: PropTypes.array,\n\tdisableSuccessModal: PropTypes.bool,\n\n\t// form\n\tschema: PropTypes.object.isRequired,\n\tquerySchema: PropTypes.object,\n\tsteps: PropTypes.array,\n\tdevMode: PropTypes.bool,\n\n\t//excel\n\tdisableExcelDownload: PropTypes.bool,\n\tdisableExcelUpload: PropTypes.bool,\n\tuploadPreviewUrl: PropTypes.string,\n};\n\nController.defaultProps = {\n\tgetOne: null,\n\tcreateMany: null,\n\tupdateOne: null,\n\tdeleteMany: null,\n\tdescription: \"\",\n\ttableScroll: undefined,\n\trowButtons: [],\n\ttableButtons: [],\n\tquerySchema: null,\n\tdisableExcelDownload: false,\n\tdisableExcelUpload: false,\n\tuploadPreviewUrl: null,\n\tsteps: [],\n\tdevMode: false,\n\tdisableSuccessModal: false,\n};\n\nexport default Controller;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport EditModal from \"./edit_modal\";\nimport { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Joi from \"joi/lib/index\";\nimport { JoiWrapper } from \"../joi/joi_wrapper\";\nimport { alert } from \"./util\";\n\nexport const openFormModal = (props) => {\n\tif (!props.schema) throw new Error(\"schema required\");\n\tconst div = document.createElement(\"div\");\n\n\tconst onClose = () => {\n\t\tconst unmountResult = ReactDOM.unmountComponentAtNode(div);\n\t\tif (unmountResult && div.parentNode) div.parentNode.removeChild(div);\n\t};\n\n\tdocument.body.appendChild(div);\n\tconst props2 = {\n\t\t...props,\n\t\tonClose,\n\t\tschema: new JoiWrapper(props.schema, props.devMode),\n\t};\n\tsetTimeout(() => ReactDOM.render(<FormModal {...props2} />, div));\n};\n\nconst FormModal = (props) => {\n\tconst { onClose, schema, title, onSubmit, steps } = props;\n\tconst { disableSuccessModal } = props;\n\tconst [error, setError] = useState(null);\n\n\tconst onSubmit2 = async (data, actions, originalData) => {\n\t\tsetError(null);\n\t\ttry {\n\t\t\tdata = Joi.attempt(data, schema.joiObj);\n\t\t\tawait onSubmit(data, originalData);\n\t\t\tif (!disableSuccessModal) alert.success(\"\");\n\t\t\tonClose();\n\t\t} catch (e) {\n\t\t\tsetError(e);\n\t\t\tactions.setSubmitting(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<EditModal\n\t\t\tisEdit={false}\n\t\t\tvisible={true}\n\t\t\tonClose={onClose}\n\t\t\tschema={schema}\n\t\t\tsteps={steps}\n\t\t\tcreateHeader={title}\n\t\t\terror={error}\n\t\t\tonSubmit={onSubmit2}\n\t\t/>\n\t);\n};\n\nFormModal.propTypes = {\n\tonClose: PropTypes.func.isRequired,\n\tschema: PropTypes.object.isRequired,\n\tonSubmit: PropTypes.func.isRequired,\n\ttitle: PropTypes.string,\n\tsteps: PropTypes.array,\n\tdisableSuccessModal: PropTypes.bool,\n};\n\nFormModal.defaultProps = {\n\tsteps: [],\n\ttitle: null,\n\tdisableSuccessModal: false,\n};\n","export const raw = (a, isObj) =>\n\tisObj ? a : \"\\u0092\" + a.toString() + \"\\u0092\";\n\nexport const regex = (a, isObj) =>\n\tisObj ? a : \"\\u0092\" + a.toString().replace(/\\\\/g, \"\\u0091\") + \"\\u0092\";\n\nexport const showRaw = (a, isObj) => {\n\tif (isObj) return a;\n\treturn a\n\t\t.replace(/\\u0092\\\\*\"/g, \"\")\n\t\t.replace(/\\\\*\"\\u0092/g, \"\")\n\t\t.replace(/\\\\+n/g, \"\\n\")\n\t\t.replace(/\\\\+\"/g, '\"')\n\t\t.replace(/\\\\+'/g, \"'\")\n\t\t.replace(/\\u0092/g, \"\")\n\t\t.replace(/\\u0091/g, \"\\\\\");\n};\n\nexport const softEval = (a, type) => {\n\ttry {\n\t\t// eslint-disable-next-line\n\t\tvar ans = Function('\"use strict\";return (' + a + \")\")();\n\t\treturn ans == null ? a : ans;\n\t} catch (e) {\n\t\tif (type === \"array\") return a.split(/\\s*,\\s*/);\n\t\treturn a;\n\t}\n};\n\n// soft eval for function without dependencies\n// this bad eval-based implementation is selected since Function.toString() doesn't work with Babel\nexport const func = (str, isObj) => {\n\tif (!isObj) return raw(str, isObj);\n\t// eslint-disable-next-line\n\treturn Function(\n\t\t'\"use strict\";var wait = (ms) => new Promise((res) => setTimeout(res, ms));return (' +\n\t\t\tstr +\n\t\t\t\")\"\n\t)();\n};\n","import _ from \"lodash\";\nimport { Input, Select } from \"formik-antd\";\nimport React, { useEffect, useState } from \"react\";\nimport { useFormikContext } from \"formik\";\nimport CascaderStatic from \"../../lib/formik/components/cascader_static\";\nimport { SketchPicker } from \"react-color\";\nimport { Button, Dropdown } from \"antd\";\n\nexport const DependentComp = (props) => {\n\tconst { values, setFieldValue } = useFormikContext();\n\tconst values2 = JSON.stringify(_.set({ ...values }, props.name, null));\n\tuseEffect(() => {\n\t\tsetFieldValue(props.name, values2, false);\n\t\t/* eslint-disable react-hooks/exhaustive-deps */\n\t}, [values2, props.name]);\n\treturn <Input disabled {...props} />;\n};\n\nDependentComp.str = `const DependentComp = (props)=>{\nconst {values,setFieldValue} = useFormikContext();\nconst values2 = JSON.stringify(_.set({ ...values }, props.name, null));\nuseEffect(()=>{\n// you can also use setFieldValue to mutate other fields\nsetFieldValue(props.name,values2,false);},[values2,props.name])\nreturn <Input disabled {...props}/>;\n}`;\n\nexport const AsyncDropdown = (props) => {\n\tconst { fetchChoices } = props;\n\tconst [choices, setChoices] = useState([]);\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst data = await fetchChoices();\n\t\t\t// remap value so that value is also searchable\n\t\t\tconst remap = ({ label, value }) => {\n\t\t\t\treturn { label: label + \" \" + value, value };\n\t\t\t};\n\t\t\tsetChoices(data.map(remap));\n\t\t})();\n\t}, []);\n\treturn (\n\t\t<Select\n\t\t\t{...props}\n\t\t\tshowSearch\n\t\t\toptionFilterProp=\"label\"\n\t\t\toptions={choices}\n\t\t\tfilterOption={(input, option) =>\n\t\t\t\toption.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\n\t\t\t}\n\t\t></Select>\n\t);\n};\n\nAsyncDropdown.str = `const AsyncDropdown = (props) => {\nconst { fetchChoices } = props;\nconst [choices, setChoices] = useState([]);\nuseEffect(() => {\n(async () => {\nconst data = await fetchChoices();\n// remap value so that value is also searchable\nconst remap = ({ label, value }) => {\nreturn { label: label + \" \" + value, value };\n};\nsetChoices(data.map(remap));\n})();\n}, []);\nreturn (\n<Select\n{...props}\nshowSearch\noptionFilterProp=\"label\"\noptions={choices}\nfilterOption={(input, option) =>\noption.label.toLowerCase().indexOf(input.toLowerCase()) >= 0\n}\n></Select>\n);\n};\n`;\n\nexport const THAddress = (props) => {\n\tconst [options, setOptions] = useState([]);\n\tconst className = \"thAddress\" + props.name.replace(/[^a-z0-9]/gi, \"\");\n\n\tuseEffect(() => {\n\t\tconst listener = () => {\n\t\t\tconst selector = \".\" + className + \" .ant-cascader-menu\";\n\t\t\tconst columns = document.querySelectorAll(selector);\n\t\t\tconst length = columns.length;\n\t\t\tfor (let i = 0; i < length; i++)\n\t\t\t\tcolumns[i].classList.add(\"th-address-small\");\n\t\t\tif (length > 1)\n\t\t\t\tcolumns[length - 2].classList.remove(\"th-address-small\");\n\t\t\tif (length > 0)\n\t\t\t\tcolumns[length - 1].classList.remove(\"th-address-small\");\n\t\t};\n\t\tdocument.addEventListener(\"click\", listener);\n\t\treturn () => document.removeEventListener(\"click\", listener);\n\t}, []);\n\n\tuseEffect(() => {\n\t\t(async () => {\n\t\t\tconst data = await import(\"../../lib/assets/th_address\");\n\t\t\tsetOptions(data.default);\n\t\t})();\n\t}, []);\n\n\treturn (\n\t\t<CascaderStatic\n\t\t\t{...props}\n\t\t\tcascaderOptions={options}\n\t\t\tdropdownRender={(a) => <div className={className}>{a}</div>}\n\t\t></CascaderStatic>\n\t);\n};\n\n// WARNING string version and functional version are different\nTHAddress.str = `const THAddress = (props) => {\nconst className = \"thAddress\" + props.name.replace(/[^a-z0-9]/gi, \"\");\n//responsive dropdown for small screens\nuseEffect(() => {\nconst listener = () => {\nconst selector = \".\" + className + \" .ant-cascader-menu\";\nconst columns = document.querySelectorAll(selector);\nconst length = columns.length;\nfor (let i = 0; i < length; i++)\ncolumns[i].classList.add(\"th-address-small\");\nif (length > 1)\ncolumns[length - 2].classList.remove(\"th-address-small\");\nif (length > 0)\ncolumns[length - 1].classList.remove(\"th-address-small\");\n};\ndocument.addEventListener(\"click\", listener);\nreturn () => document.removeEventListener(\"click\", listener);\n}, []);\nreturn (\n<CascaderStatic\n{...props}\ndropdownRender={(a) => <div className={className}>{a}</div>}\n></CascaderStatic>\n);\n};\n`;\n\nexport const ColorPicker = (props) => {\n\tconst { name } = props;\n\tconst { values, setFieldValue } = useFormikContext();\n\tconst color = _.get(values, name) || \"#bbcccc\";\n\tconst setColor = ({ hex }) => setFieldValue(name, hex, false);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"color-picker-box\" style={{ background: color }} />\n\t\t\t<Dropdown\n\t\t\t\toverlay={\n\t\t\t\t\t<SketchPicker\n\t\t\t\t\t\tcolor={color}\n\t\t\t\t\t\tonChangeComplete={setColor}\n\t\t\t\t\t\tdisableAlpha\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\ttrigger={[\"click\"]}\n\t\t\t>\n\t\t\t\t<Button {...props}></Button>\n\t\t\t</Dropdown>\n\t\t</>\n\t);\n};\nColorPicker.str = `const ColorPicker = (props) => {\nconst { name } = props;\nconst { values, setFieldValue } = useFormikContext();\nconst color = _.get(values, name) || \"#bbcccc\";\nconst setColor = ({ hex }) => setFieldValue(name, hex, false);\nreturn (\n<>\n<div className=\"color-picker-box\" style={{ background: color }} />\n<Dropdown\noverlay={\n<SketchPicker\ncolor={color}\nonChangeComplete={setColor}\ndisableAlpha\n/>\n}\ntrigger={[\"click\"]}\n>\n<Button {...props}></Button>\n</Dropdown>\n</>\n);\n};\n`;\n","export const lookupLabel = (item) => {\n\tconst { _id, label, fieldType } = item;\n\tif (label) return label;\n\tswitch (fieldType) {\n\t\tcase \"common|paragraph\":\n\t\t\treturn `paragraph-${_id}`;\n\t\tcase \"format|url\":\n\t\t\treturn \"url link\";\n\t\tcase \"format|thai tel\":\n\t\t\treturn \"\";\n\t\tcase \"format|email\":\n\t\t\treturn \"\";\n\t\tcase \"common|password\":\n\t\t\treturn \"\";\n\t\tcase \"format|thai zipcode\":\n\t\t\treturn \"\";\n\t\tcase \"custom component|dependent input example\":\n\t\tcase \"format|regex validation example\":\n\t\tcase \"format|custom validation example\":\n\t\t\treturn `example-${_id}`;\n\t\tcase \"custom component|array of fields example\":\n\t\t\treturn `array-${_id}`;\n\t\tcase \"format|thai citizen id\":\n\t\t\treturn \"\";\n\t\tcase \"checkbox\":\n\t\t\treturn `checkbox-${_id}`;\n\t\tcase \"common|number\":\n\t\t\treturn `number-${_id}`;\n\t\tcase \"date|date\":\n\t\tcase \"date|date-time\":\n\t\t\treturn \"\";\n\t\tcase \"date|month\":\n\t\t\treturn \"\";\n\t\tcase \"date|time\":\n\t\t\treturn \"\";\n\t\tcase \"custom component|color picker\":\n\t\t\treturn \"\";\n\t\tcase \"common|barcode scanner hardware\":\n\t\t\treturn \"\";\n\t\tcase \"hierarchical dropdown|thai province\":\n\t\t\treturn \"//\";\n\t\tcase \"hierarchical dropdown|static option, allow modify\":\n\t\tcase \"hierarchical dropdown|static option, no modify\":\n\t\tcase \"hierarchical dropdown|async option\":\n\t\tcase \"custom component|async searchable dropdown\":\n\t\tcase \"dropdown\":\n\t\t\treturn `dropdown-${_id}`;\n\t\tcase \"upload|multiple images\":\n\t\tcase \"upload|firebase\":\n\t\tcase \"upload|google cloud storage\":\n\t\tcase \"upload|single file\":\n\t\t\treturn `upload-${_id}`;\n\t\tcase \"input\":\n\t\t\treturn `input-${_id}`;\n\t\tdefault:\n\t\t\treturn `label-${_id}`;\n\t}\n};\n","import { Joi } from \"../../lib\";\nimport _ from \"lodash\";\nimport { raw, softEval, func, regex, showRaw } from \"./util\";\nimport toSource from \"tosource\";\nimport * as Comp from \"./custom_component\";\nimport { lookupLabel } from \"./lookup_label\";\nimport React from \"react\";\n\nconst makeObject = (joiList) => {\n\tvar ans = Joi;\n\tfor (var joi of joiList) ans = ans[joi.name](...(joi.args || []));\n\treturn ans;\n};\n\nconst makeString = (joiList) => {\n\tvar ans = \"Joi\";\n\tfor (var joi of joiList) {\n\t\tvar args = joi.args || [];\n\t\tans += `.${joi.name}(${args.map((a) =>\n\t\t\ttoSource(a).replace(/\\n/g, \"\")\n\t\t)})`;\n\t}\n\treturn ans;\n};\n\n// return [{funcName, args}]\nexport const makeJoiLine = (editor, settings, isObj) => {\n\tvar ans = [];\n\tvar type = \"string\";\n\tvar newFieldType = \"\";\n\tvar suffix = [];\n\tswitch (editor.fieldType) {\n\t\tcase \"common|paragraph\":\n\t\t\tnewFieldType = \"TextArea\";\n\t\t\tbreak;\n\t\tcase \"date|time\":\n\t\t\tnewFieldType = \"TimePicker\";\n\t\t\ttype = \"date\";\n\t\t\tbreak;\n\t\tcase \"custom component|dependent input example\":\n\t\t\teditor = {\n\t\t\t\tonFieldRender: isObj\n\t\t\t\t\t? Comp.DependentComp\n\t\t\t\t\t: raw(\"DependentComp\", isObj),\n\t\t\t\t...editor,\n\t\t\t};\n\t\t\ttype = \"any\";\n\t\t\tbreak;\n\t\tcase \"custom component|async searchable dropdown\":\n\t\t\teditor = {\n\t\t\t\tonFieldRender: isObj\n\t\t\t\t\t? Comp.AsyncDropdown\n\t\t\t\t\t: raw(\"AsyncDropdown\", isObj),\n\t\t\t\tfetchChoices: func(\n\t\t\t\t\t`async () => {\nawait wait(500);\nreturn [\n{ label: \"Toyota\", value: \"a01\" },\n{ label: \"Hyundai\", value: \"a02\" },\n];\n}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\t...editor,\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"custom component|color picker\":\n\t\t\tvar cellFormatStr = `(a)=>typeof a===\"string\"?<><div className=\"color-picker-box-small\" style={{background:a}}/>{a}</>:null`;\n\t\t\tvar cellFormatFunc = (a) =>\n\t\t\t\ttypeof a === \"string\" ? (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"color-picker-box-small\"\n\t\t\t\t\t\t\tstyle={{ background: a }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{a}\n\t\t\t\t\t</>\n\t\t\t\t) : null;\n\t\t\teditor = {\n\t\t\t\tonFieldRender: isObj\n\t\t\t\t\t? Comp.ColorPicker\n\t\t\t\t\t: raw(\"ColorPicker\", isObj),\n\t\t\t\tcellFormat: isObj ? cellFormatFunc : raw(cellFormatStr, isObj),\n\t\t\t\tcellWidth: 130,\n\t\t\t\tallowClear: true,\n\t\t\t\t...editor,\n\t\t\t};\n\t\t\tsuffix.push(\n\t\t\t\t{ name: \"pattern\", args: [regex(/^#[0-9a-f]{6}$/i, isObj)] },\n\t\t\t\t{ name: \"message\", args: [\" ( #ff0000)\"] }\n\t\t\t);\n\t\t\tbreak;\n\t\tcase \"custom component|array of fields example\":\n\t\t\tvar formSpec = raw(\n\t\t\t\t`Joi.object({\nitem:Joi.string().label(\"\").required().valid(\"Pizza\",\"Hamburger\"),\nnote: Joi.string().required().min(3).label(\"\").default(\"\")\n})`,\n\t\t\t\tisObj\n\t\t\t);\n\t\t\tif (isObj)\n\t\t\t\tformSpec = Joi.object({\n\t\t\t\t\titem: Joi.string()\n\t\t\t\t\t\t.label(\"\")\n\t\t\t\t\t\t.required()\n\t\t\t\t\t\t.valid(\"Pizza\", \"Hamburger\"),\n\t\t\t\t\tnote: Joi.string()\n\t\t\t\t\t\t.required()\n\t\t\t\t\t\t.min(3)\n\t\t\t\t\t\t.label(\"\")\n\t\t\t\t\t\t.default(\"\"),\n\t\t\t\t});\n\t\t\tsuffix.push(\n\t\t\t\t{ name: \"min\", args: [1] },\n\t\t\t\t{ name: \"max\", args: [5] },\n\t\t\t\t{ name: \"default\", args: [[{}, {}]] },\n\t\t\t\t{ name: \"items\", args: [formSpec] }\n\t\t\t);\n\t\t\tnewFieldType = \"FieldArray\";\n\t\t\ttype = \"array\";\n\t\t\tbreak;\n\t\tcase \"hierarchical dropdown|static option, allow modify\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tcascaderOptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tl: \"Hardware Business\",\n\t\t\t\t\t\tc: [{ l: \"Apple\" }, { l: \"Intel\" }],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tl: \"Software Business\",\n\t\t\t\t\t\tc: [{ l: \"Apple\" }, { l: \"Google\" }],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tnames: [editor.name + \"-0\", editor.name + \"-1\"],\n\t\t\t\tfieldNames: { label: \"l\", value: \"l\", children: \"c\" },\n\t\t\t\tcellHide: true,\n\t\t\t\tnotFound: true,\n\t\t\t\tallowClear: true,\n\t\t\t};\n\t\t\ttype = \"any\";\n\t\t\tbreak;\n\t\tcase \"hierarchical dropdown|static option, no modify\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tcascaderOptions: [\n\t\t\t\t\t{\n\t\t\t\t\t\tl: \"Vegetable\",\n\t\t\t\t\t\tv: \"Vegetable\",\n\t\t\t\t\t\tc: [\n\t\t\t\t\t\t\t{ l: \"Tomato (G001)\", v: \"G001\" },\n\t\t\t\t\t\t\t{ l: \"Carrot (G002)\", v: \"G002\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tl: \"Fruit\",\n\t\t\t\t\t\tv: \"Fruit\",\n\t\t\t\t\t\tc: [\n\t\t\t\t\t\t\t{ l: \"Apple (G003)\", v: \"G003\" },\n\t\t\t\t\t\t\t{ l: \"Banana (G004)\", v: \"G004\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tnames: editor.name + \"-0\",\n\t\t\t\tfieldNames: { label: \"l\", value: \"v\", children: \"c\" },\n\t\t\t\tcellHide: true,\n\t\t\t\tallowClear: true,\n\t\t\t};\n\t\t\ttype = \"any\";\n\t\t\tbreak;\n\t\tcase \"hierarchical dropdown|thai province\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tonFieldRender: isObj ? Comp.THAddress : raw(\"THAddress\", isObj),\n\t\t\t\tnames: [\n\t\t\t\t\teditor.name + \"-0\",\n\t\t\t\t\teditor.name + \"-1\",\n\t\t\t\t\teditor.name + \"-2\",\n\t\t\t\t\teditor.name + \"-3\",\n\t\t\t\t],\n\t\t\t\tfieldNames: { label: \"l\", value: \"l\", children: \"c\" },\n\t\t\t\tcellHide: true,\n\t\t\t\tnotFound: true,\n\t\t\t\tallowClear: true,\n\t\t\t};\n\t\t\tif (isObj) editor.cascaderOptions = raw(\"thAddressData\", isObj);\n\t\t\ttype = \"any\";\n\t\t\tbreak;\n\t\tcase \"hierarchical dropdown|async option\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tcascaderFetchData: func(\n\t\t\t\t\t`async (selected)=>{\nawait wait(500);\nif(!selected.length) return [{l:\"Hardware Business\",isLeaf:false},{l:\"Software Business\",isLeaf:false}];\nif(selected[0] === 'Hardware Business') return [{l:\"Apple\"},{l:\"Intel\"}];\nif(selected[0] === 'Software Business') return [{l:\"Apple\"},{l:\"Google\"}];\n}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tallowClear: true,\n\t\t\t\tfieldNames: { label: \"l\", value: \"l\", children: \"c\" },\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({\n\t\t\t\tname: \"items\",\n\t\t\t\targs: isObj ? [Joi.string()] : [raw(\"Joi.string()\", isObj)],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"format|url\":\n\t\t\tnewFieldType = \"InputURL\";\n\t\t\tbreak;\n\t\tcase \"format|thai tel\":\n\t\t\tnewFieldType = \"InputPhone\";\n\t\t\tbreak;\n\t\tcase \"format|email\":\n\t\t\tnewFieldType = \"InputEmail\";\n\t\t\tbreak;\n\t\tcase \"common|password\":\n\t\t\teditor = { ...editor, cellHide: true };\n\t\t\tnewFieldType = \"InputPassword\";\n\t\t\tbreak;\n\t\tcase \"format|thai zipcode\":\n\t\t\teditor = { placeholder: \" 10210\", ...editor };\n\t\t\tsuffix.push({ name: \"pattern\", args: [regex(/^\\d{5}$/, isObj)] });\n\t\t\tsuffix.push({ name: \"message\", args: [\"\"] });\n\t\t\tbreak;\n\t\tcase \"format|regex validation example\":\n\t\t\tsuffix.push({\n\t\t\t\tname: \"pattern\",\n\t\t\t\targs: [regex(/^changeme$/, isObj)],\n\t\t\t});\n\t\t\tsuffix.push({ name: \"message\", args: [\"changeme error\"] });\n\t\t\tbreak;\n\t\tcase \"format|custom validation example\":\n\t\t\tsuffix.push({\n\t\t\t\tname: \"custom\",\n\t\t\t\targs: [\n\t\t\t\t\tfunc(\n\t\t\t\t\t\t`(a)=>{if (!/^changeme$/.test(a)) throw new Error(\"changeme error\");return a;}`,\n\t\t\t\t\t\tisObj\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"format|thai citizen id\":\n\t\t\teditor = { placeholder: \" 0139499973311\", ...editor };\n\t\t\tsuffix.push({\n\t\t\t\tname: \"custom\",\n\t\t\t\targs: [\n\t\t\t\t\tfunc(\n\t\t\t\t\t\t`(id)=>{\nif (!/^\\u0091d{13}$/.test(id)) throw new Error(\" 13 \");\nvar digits = [];\nfor(var i = 0; i < 13; i++) digits.push(parseInt(id[i]));\nvar checksum = 0;\nfor(var j = 0; j < 12; i++) checksum += (13 - j) * digits[j];\nvar digit13 = checksum % 11;\ndigit13 = digit13 > 1 ? 11 - digit13 : 1 - digit13;\nif (digit13 !== digits[12]) throw new Error(\"\");\nreturn id;}`,\n\t\t\t\t\t\tisObj\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"checkbox\":\n\t\t\ttype = \"boolean\";\n\t\t\tbreak;\n\t\tcase \"common|number\":\n\t\t\ttype = \"number\";\n\t\t\tbreak;\n\t\tcase \"date|month\":\n\t\t\tnewFieldType = \"MonthPicker\";\n\t\t\ttype = \"date\";\n\t\t\tbreak;\n\t\tcase \"date|date-time\":\n\t\t\teditor = { ...editor, showTime: true };\n\t\t\ttype = \"date\";\n\t\t\tbreak;\n\t\tcase \"date|date\":\n\t\t\ttype = \"date\";\n\t\t\tbreak;\n\t\tcase \"common|barcode scanner hardware\":\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({\n\t\t\t\tname: \"items\",\n\t\t\t\targs: isObj ? Joi.string() : [raw(\"Joi.string()\", isObj)],\n\t\t\t});\n\t\t\tsuffix.push({ name: \"min\", args: [1] });\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tcontainerStyle: { marginBottom: 30 },\n\t\t\t\tloadBarcodeName: func(\n\t\t\t\t\t'async (a) => {await wait(500); if (a === \"a001\") return \"iPhone\";}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"dropdown\":\n\t\t\tsuffix.push({\n\t\t\t\tname: \"valid\",\n\t\t\t\targs: [\"pizza\", \"steak\", \"sushi\", \"hamburger\", \"noodles\"],\n\t\t\t});\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tallowClear: true,\n\t\t\t\tvalidLabel: [\"Pizza\", \"Steak\", \"Sushi\", \"Hamburger\", \"Noodles\"],\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"upload|multiple images\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t'async (fileObj) => {await wait(500); return \"https://www.gravatar.com/avatar/1\"}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({\n\t\t\t\tname: \"items\",\n\t\t\t\targs: isObj\n\t\t\t\t\t? [Joi.string().uri()]\n\t\t\t\t\t: [raw(\"Joi.string().uri()\", isObj)],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"upload|firebase\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t`async (file) => {\n// const path = 'images/' + nanoid();\n// const storageRef = ref(getFirebase(), path);\n// await uploadBytes(storageRef, file);\n// return await getDownloadURL(storageRef);\nawait wait(500);\nreturn \"https://www.gravatar.com/avatar/1\"}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileInit: func(\n\t\t\t\t\t`() => {\n//getFirebase();\n}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({\n\t\t\t\tname: \"items\",\n\t\t\t\targs: isObj\n\t\t\t\t\t? [Joi.string().uri()]\n\t\t\t\t\t: [raw(\"Joi.string().uri()\", isObj)],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"upload|google cloud storage\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t`async (file) => {\n// https://cloud.google.com/storage/docs/samples/storage-generate-signed-url-v4\n// var serverUrl = 'https://www.example.com/get-upload-url?filename=';\n// var url = await axios.get(serverUrl + encodeURIComponent(file.name));\n// await axios.put(url, file, {headers: { \"Content-Type\": file.type }});\n// return url;\nawait wait(500);\nreturn \"https://www.gravatar.com/avatar/1\"}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({\n\t\t\t\tname: \"items\",\n\t\t\t\targs: isObj\n\t\t\t\t\t? [Joi.string().uri()]\n\t\t\t\t\t: [raw(\"Joi.string().uri()\", isObj)],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"upload|single file\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: false,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t'async (fileObj) => {await wait(500); return \"https://www.gravatar.com/avatar/1\"}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"file\",\n\t\t\t\taccept: \".pdf\",\n\t\t\t};\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\tans.push({ name: type }, { name: \"label\", args: [lookupLabel(editor)] });\n\n\tif (editor.require) ans.push({ name: \"required\" });\n\tif (editor.defaultValue)\n\t\tans.push({\n\t\t\tname: \"default\",\n\t\t\targs: [softEval(editor.defaultValue, type)],\n\t\t});\n\tans = ans.concat(suffix);\n\n\tvar meta = _.omit(editor, [\n\t\t\"require\",\n\t\t\"defaultValue\",\n\t\t\"label\",\n\t\t\"fieldType\",\n\t\t\"_fieldType\",\n\t\t\"extraMargin\",\n\t\t\"name\",\n\t\t\"columnWidth\",\n\t\t\"_id\",\n\t\t\"conditional\",\n\t]);\n\tif (editor.extraMargin)\n\t\tmeta.containerStyle = _.assign(meta.containerStyle, {\n\t\t\tmarginBottom: newFieldType === \"FieldArray\" ? 40 : 20,\n\t\t});\n\tif (editor.columnWidth) meta.cellWidth = editor.columnWidth;\n\tif (newFieldType) meta.fieldType = newFieldType;\n\tif (!meta.placeholder) delete meta.placeholder;\n\tif (editor.conditional) {\n\t\tif (!editor.fieldHide)\n\t\t\tmeta.fieldHide = func(\n\t\t\t\t`(a)=>a[\"${editor.conditional[0]}\"]!==\"${editor.conditional[1]}\"`,\n\t\t\t\tisObj\n\t\t\t);\n\t\telse if (isObj) {\n\t\t\tconst original = meta.fieldHide;\n\t\t\tmeta.fieldHide = (a) =>\n\t\t\t\toriginal(a) ||\n\t\t\t\ta[editor.conditional[0]] !== editor.conditional[1];\n\t\t} else {\n\t\t\tmeta.fieldHide = func(\n\t\t\t\tshowRaw(meta.fieldHide, isObj) +\n\t\t\t\t\t`||(a[\"${editor.conditional[0]}\"]!==\"${editor.conditional[1]}\")`,\n\t\t\t\tisObj\n\t\t\t);\n\t\t}\n\t}\n\tif (settings.steps) meta.step = meta.step || 0;\n\telse delete meta.step;\n\n\tif (_.size(meta))\n\t\tans.push({\n\t\t\tname: \"meta\",\n\t\t\targs: [isObj ? meta : raw(JSON.stringify(meta))],\n\t\t});\n\n\tif (isObj) return makeObject(ans);\n\treturn makeString(ans);\n};\n\nexport const makeExtraJoiLines = (editor, settings, isObj) => {\n\tif (!/^hierarchical dropdown|/.test(editor.fieldType)) return [];\n\n\tconst { name, fieldType } = editor;\n\tconst extend = _.pick(editor, [\n\t\t\"require\",\n\t\t\"step\",\n\t\t\"columnWidth\",\n\t\t\"disableSorting\",\n\t\t\"disableFilter\",\n\t\t\"conditional\",\n\t]);\n\tconst obj = {\n\t\t...extend,\n\t\tfieldHide: !isObj\n\t\t\t? raw(`a=>(a['${name}']?!a['${name}'].$notFound:true)`, isObj)\n\t\t\t: (a) => (a[name] ? !a[name].$notFound : true),\n\t\ttwoColumn: true,\n\t};\n\n\tswitch (fieldType) {\n\t\tcase \"hierarchical dropdown|static option, allow modify\":\n\t\t\treturn [\n\t\t\t\tmakeJoiLine({ ...obj, label: \"category\" }, settings, isObj),\n\t\t\t\tmakeJoiLine({ ...obj, label: \"brand\" }, settings, isObj),\n\t\t\t];\n\t\tcase \"hierarchical dropdown|static option, no modify\":\n\t\t\treturn [\n\t\t\t\tmakeJoiLine({ ...obj, label: \"product code\" }, settings, isObj),\n\t\t\t];\n\t\tcase \"hierarchical dropdown|thai province\":\n\t\t\treturn [\n\t\t\t\tmakeJoiLine(\n\t\t\t\t\t{\n\t\t\t\t\t\t...obj,\n\t\t\t\t\t\tlabel: \"\",\n\t\t\t\t\t\tplaceholder: \" \",\n\t\t\t\t\t},\n\t\t\t\t\tsettings,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tmakeJoiLine(\n\t\t\t\t\t{ ...obj, label: \"/\", placeholder: \" \" },\n\t\t\t\t\tsettings,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tmakeJoiLine(\n\t\t\t\t\t{ ...obj, label: \"/\", placeholder: \" \" },\n\t\t\t\t\tsettings,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tmakeJoiLine(\n\t\t\t\t\t{\n\t\t\t\t\t\t...obj,\n\t\t\t\t\t\tlabel: \"\",\n\t\t\t\t\t\tfieldType: \"format|thai zipcode\",\n\t\t\t\t\t},\n\t\t\t\t\tsettings,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t];\n\t\tdefault:\n\t\t\treturn [];\n\t}\n};\n","import { Chance } from \"../../lib\";\nimport _ from \"lodash\";\nimport { raw, showRaw } from \"./util\";\nimport toSource from \"tosource\";\n\nvar chance = null;\nconst getChance = (seed) => {\n\tif (seed) return new Chance(seed);\n\tif (!chance) chance = new Chance(Math.random());\n\treturn chance;\n};\n\nexport const genChanceString = (editors, count) => {\n\tvar ans = {};\n\tfor (var editor of editors) {\n\t\tvar spec = editorToChance(editor);\n\t\tvar specObj = {};\n\t\tif (Array.isArray(spec))\n\t\t\tfor (var j = 0, jj = spec.length; j < jj; j++)\n\t\t\t\tspecObj[editor.name + \"-\" + j] = spec[j];\n\t\telse specObj[editor.name] = spec;\n\n\t\tfor (var key in specObj) {\n\t\t\tvar { name, args } = specObj[key];\n\t\t\targs = args\n\t\t\t\t? toSource(args)\n\t\t\t\t\t\t.replace(/^\\[\\s*/, \"\")\n\t\t\t\t\t\t.replace(/\\s*\\]$/, \"\")\n\t\t\t\t: \"\";\n\t\t\t_.set(ans, key, raw(`chance.${name}(${args})`));\n\t\t}\n\t}\n\treturn `()=>{const ans=[]; for(let i=0;i<${count};i++)ans.push(${showRaw(\n\t\tJSON.stringify(ans)\n\t)}); return ans;}`;\n};\n\nexport const randomData = (editors, count, seed) => {\n\tvar ans = [];\n\tvar newRandom;\n\tvar chance = getChance(seed);\n\tfor (var i = 0; i < count; i++) {\n\t\tvar newValue = {};\n\t\tfor (var editor of editors) {\n\t\t\tvar spec = editorToChance(editor);\n\t\t\tvar specObj = {};\n\t\t\tif (Array.isArray(spec))\n\t\t\t\tfor (var j = 0, jj = spec.length; j < jj; j++)\n\t\t\t\t\tspecObj[editor.name + \"-\" + j] = spec[j];\n\t\t\telse specObj[editor.name] = spec;\n\n\t\t\tfor (var key in specObj) {\n\t\t\t\tvar { name, args } = specObj[key];\n\t\t\t\tnewRandom = chance[name].apply(chance, args || []);\n\t\t\t\t_.set(newValue, key, newRandom);\n\t\t\t}\n\t\t}\n\t\tans.push(newValue);\n\t}\n\treturn ans;\n};\n\nconst editorToChance = (editor) => {\n\tvar temp;\n\tswitch (editor.fieldType) {\n\t\tcase \"hierarchical dropdown|static option, allow modify\":\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: \"pickone\",\n\t\t\t\t\targs: [[\"Hardware Business\", \"Software Business\"]],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: \"pickone\",\n\t\t\t\t\targs: [[\"Apple\"]],\n\t\t\t\t},\n\t\t\t];\n\t\tcase \"hierarchical dropdown|static option, no modify\":\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tname: \"pickone\",\n\t\t\t\t\targs: [[\"G001\", \"G002\", \"G003\", \"G004\"]],\n\t\t\t\t},\n\t\t\t];\n\t\tcase \"hierarchical dropdown|async option\":\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [\n\t\t\t\t\t[\n\t\t\t\t\t\t[\"Hardware Business\", \"Intel\"],\n\t\t\t\t\t\t[\"Software Business\", \"Google\"],\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t};\n\t\tcase \"hierarchical dropdown|thai province\":\n\t\t\treturn [\n\t\t\t\t{ name: \"pickone\", args: [[\"\"]] },\n\t\t\t\t{ name: \"pickone\", args: [[\"\"]] },\n\t\t\t\t{ name: \"pickone\", args: [[\"\"]] },\n\t\t\t\t{ name: \"pickone\", args: [[\"10900\"]] },\n\t\t\t];\n\t\tcase \"format|url\":\n\t\tcase \"upload|single file\":\n\t\t\treturn { name: \"avatar\", args: [{ protocol: \"https\" }] };\n\t\tcase \"upload|firebase\":\n\t\tcase \"upload|google cloud storage\":\n\t\tcase \"upload|multiple images\":\n\t\t\ttemp =\n\t\t\t\t\"https://www.gravatar.com/avatar/407cedb085e93b2253656ce07a52a898\";\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [[[temp]]],\n\t\t\t};\n\t\tcase \"format|regex validation example\":\n\t\tcase \"format|custom validation example\":\n\t\t\treturn { name: \"pickone\", args: [[\"changeme\"]] };\n\t\tcase \"format|thai tel\":\n\t\t\treturn { name: \"pickone\", args: [[\"0812345678\", \"021111111\"]] };\n\t\tcase \"format|email\":\n\t\t\treturn { name: \"email\" };\n\t\tcase \"format|thai zipcode\":\n\t\t\treturn { name: \"pickone\", args: [[\"10210\", \"10400\"]] };\n\t\tcase \"format|thai citizen id\":\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [[\"0139499973311\", \"0547041689552\"]],\n\t\t\t};\n\t\tcase \"checkbox\":\n\t\t\treturn { name: \"bool\" };\n\t\tcase \"dropdown\":\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [[\"pizza\", \"steak\", \"sushi\", \"hamburger\", \"noodles\"]],\n\t\t\t};\n\t\tcase \"common|number\":\n\t\t\treturn { name: \"natural\", args: [{ max: 30 }] };\n\t\tcase \"date|date\":\n\t\tcase \"date|date-time\":\n\t\tcase \"date|month\":\n\t\tcase \"date|time\":\n\t\t\treturn { name: \"date\", args: [] };\n\t\tcase \"common|barcode scanner hardware\":\n\t\t\treturn { name: \"pickone\", args: [[[\"a001\"], [\"a002\"]]] };\n\t\tcase \"common|paragraph\":\n\t\t\treturn { name: \"paragraph\" };\n\t\tcase \"common|password\":\n\t\t\treturn { name: \"pickone\", args: [[null]] };\n\t\tcase \"custom component|dependent input example\":\n\t\t\treturn { name: \"pickone\", args: [[\"{}\"]] };\n\t\tcase \"custom component|async searchable dropdown\":\n\t\t\treturn { name: \"pickone\", args: [[\"a01\", \"a02\"]] };\n\t\tcase \"custom component|array of fields example\":\n\t\t\tvar data = [\n\t\t\t\t[{ item: \"Pizza\", note: \"\" }],\n\t\t\t\t[\n\t\t\t\t\t{ item: \"Pizza\", note: \"\" },\n\t\t\t\t\t{ item: \"Hamburger\", note: \"\" },\n\t\t\t\t],\n\t\t\t];\n\t\t\treturn { name: \"pickone\", args: [data] };\n\t\tcase \"custom component|color picker\":\n\t\t\treturn { name: \"color\", args: [{ format: \"hex\" }] };\n\t\tdefault:\n\t\t\treturn { name: \"word\" };\n\t}\n};\n","import _ from \"lodash\";\nimport prettier from \"prettier/standalone\";\nimport parserBabel from \"prettier/parser-babel\";\nimport { makeJoiLine, makeExtraJoiLines } from \"./joi_line\";\nimport { raw, showRaw, func } from \"./util\";\nimport { randomData, genChanceString } from \"./chance\";\nimport * as Comp from \"./custom_component\";\nimport { SmileOutlined } from \"@ant-design/icons\";\nimport React from \"react\";\n\nconst wait = (ms) => new Promise((res) => setTimeout(res, ms));\n\nconst traverse = (node) => {\n\tif (typeof node === \"string\") return node;\n\n\tvar ans = {};\n\tfor (var key in node) ans[key] = raw(traverse(node[key]));\n\treturn raw(`Joi.object(${JSON.stringify(ans, null, 1)})`);\n};\n\nexport const renderJoi = (editors, settings, isComp) => {\n\tvar ans = {};\n\tfor (var editor of editors) {\n\t\t_.set(ans, editor.name, makeJoiLine(editor, settings));\n\t\tvar extraJoiLines = makeExtraJoiLines(editor, settings);\n\t\tfor (var i = 0, ii = extraJoiLines.length; i < ii; i++)\n\t\t\t_.set(ans, editor.name + \"-\" + i, extraJoiLines[i]);\n\t}\n\treturn showRaw(traverse(ans));\n};\n\nexport const renderProps = (editors, settings, isComp) => {\n\tconst { canCreate, canUpdate, canDelete, querySchema, devMode } = settings;\n\tconst { rowButtonExample, title } = settings;\n\n\t// required\n\tvar ans = { title: title || \"{tableName}\" };\n\n\tif (isComp) {\n\t\tans.getMany = raw(async () => {\n\t\t\tawait wait(500);\n\t\t\treturn randomData(editors, 3);\n\t\t}, isComp);\n\t} else {\n\t\tans.schema = raw(\"schema\", false);\n\t\tif (querySchema) {\n\t\t\tans.querySchema = raw(renderJoi(querySchema, {}));\n\t\t\tans.getMany = raw(\n\t\t\t\t\"async (tableQuery)=>{await wait(500);return mockData();}\"\n\t\t\t);\n\t\t} else\n\t\t\tans.getMany = raw(\"async ()=>{await wait(500);return mockData();}\");\n\t}\n\n\tif (canCreate)\n\t\tans.createMany = func(\"async (a)=>{await wait(500);return a;}\", isComp);\n\tif (canDelete)\n\t\tans.deleteMany = func(\"async ()=>{await wait(500);}\", isComp);\n\tif (canUpdate) ans.updateOne = func(\"async ()=>{await wait(500);}\", isComp);\n\tif (rowButtonExample) {\n\t\tans.rowButtons = [\n\t\t\t{\n\t\t\t\tlabel: \"hello\",\n\t\t\t\ticon: isComp ? (\n\t\t\t\t\t<SmileOutlined />\n\t\t\t\t) : (\n\t\t\t\t\traw(\"<SmileOutlined />\", isComp)\n\t\t\t\t),\n\t\t\t\tonClick: func(\n\t\t\t\t\t`(rowData, updateData)=>{\nalert(JSON.stringify(rowData));\n// updateData(newRowData);\n}`,\n\t\t\t\t\tisComp\n\t\t\t\t),\n\t\t\t},\n\t\t];\n\t\tans.tableButtons = [\n\t\t\t{\n\t\t\t\tlabel: \"hello\",\n\t\t\t\ticon: isComp ? (\n\t\t\t\t\t<SmileOutlined />\n\t\t\t\t) : (\n\t\t\t\t\traw(\"<SmileOutlined />\", isComp)\n\t\t\t\t),\n\t\t\t\tonClick: func(\n\t\t\t\t\t`(rowDataArray, updateData)=>{\nalert(JSON.stringify(rowDataArray));\n// update data rows used for table rendering (matched by _id field)\n// updateData(newRowDataArray);\n}`,\n\t\t\t\t\tisComp\n\t\t\t\t),\n\t\t\t},\n\t\t];\n\t}\n\n\t// literal\n\tvar extras = _.pick(settings, [\n\t\t\"disableExcelDownload\",\n\t\t\"disableExcelUpload\",\n\t\t\"uploadPreviewUrl\",\n\t\t\"description\",\n\t\t\"steps\",\n\t]);\n\t_.assign(ans, extras);\n\tans.devMode = devMode || false;\n\tif (ans.steps) ans.steps = ans.steps.split(/\\s*,\\s*/);\n\n\tif (isComp) return ans;\n\treturn showRaw(JSON.stringify(ans, null, 1));\n};\n\nexport const format = (a, isJson) => {\n\tif (isJson) a = \"(\" + a + \")\";\n\treturn prettier.format(a, { parser: \"babel\", plugins: [parserBabel] });\n};\n\nexport const renderImport = (editors, settings) => {\n\tconst ans = new Set();\n\tconst reactImport = new Set();\n\tconst formikAntdImport = new Set();\n\n\tfor (var { fieldType } of editors) {\n\t\tif (fieldType === \"upload|google cloud storage\")\n\t\t\tans.add(\"import axios from 'axios';\");\n\t\telse if (fieldType === \"upload|firebase\") {\n\t\t\tans.add(\"import { initializeApp } from 'firebase/app';\");\n\t\t\tans.add(\n\t\t\t\t\"import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\"\n\t\t\t);\n\t\t\tans.add(\"import { nanoid } from 'nanoid';\");\n\t\t} else if (fieldType === \"custom component|dependent input example\") {\n\t\t\tans.add(\"import {useFormikContext} from 'formik';\");\n\t\t\tans.add(\"import _ from 'lodash';\");\n\t\t\tformikAntdImport.add(\"Input\");\n\t\t\treactImport.add(\"useEffect\");\n\t\t} else if (fieldType === \"custom component|async searchable dropdown\") {\n\t\t\treactImport.add(\"useEffect\");\n\t\t\treactImport.add(\"useState\");\n\t\t\tformikAntdImport.add(\"Select\");\n\t\t} else if (fieldType === \"hierarchical dropdown|thai province\") {\n\t\t\tans.add(\n\t\t\t\t'import CascaderStatic from \"joi-auto-admin/dist/formik/components/cascader_static\";'\n\t\t\t);\n\t\t\tans.add(\n\t\t\t\t'import thAddressData from \"joi-auto-admin/dist/assets/th_address\";'\n\t\t\t);\n\t\t\treactImport.add(\"useEffect\");\n\t\t} else if (fieldType === \"custom component|color picker\") {\n\t\t\tans.add(\"import {useFormikContext} from 'formik';\");\n\t\t\tans.add(\"import _ from 'lodash';\");\n\t\t\tans.add(\"import {Button, Dropdown} from 'antd';\");\n\t\t\tans.add(\"import { SketchPicker } from 'react-color';\");\n\t\t}\n\t}\n\n\tif (settings.rowButtonExample)\n\t\tans.add('import { SmileOutlined } from \"@ant-design/icons\";');\n\n\tconst reactString = reactImport.size\n\t\t? \",{\" + [...reactImport].join(\",\") + \"}\"\n\t\t: \"\";\n\tans.add(`import React${reactString} from 'react';`);\n\n\tif (formikAntdImport.size)\n\t\tans.add(\n\t\t\t`import {${[...formikAntdImport].join(\",\")}} from 'formik-antd';`\n\t\t);\n\treturn [...ans].join(\"\\n\");\n};\n\nexport const renderFunction = (editors) => {\n\tconst ans = new Set();\n\tfor (var { fieldType } of editors) {\n\t\tif (fieldType === \"upload|firebase\")\n\t\t\tans.add(`\\nlet storage = null;\nconst getFirebase = () => {\nif (!storage) storage = getStorage(initializeApp({\napiKey: \"\",\nauthDomain: \"\",\nprojectId: \"\",\nstorageBucket: \"\",\nmessagingSenderId: \"\",\nappId: \"\",\nmeasurementId: \"\",\n}));\nreturn storage;\n};`);\n\t\telse if (fieldType === \"custom component|dependent input example\")\n\t\t\tans.add(\"\\n\" + Comp.DependentComp.str);\n\t\telse if (fieldType === \"custom component|async searchable dropdown\")\n\t\t\tans.add(\"\\n\" + Comp.AsyncDropdown.str);\n\t\telse if (fieldType === \"hierarchical dropdown|thai province\")\n\t\t\tans.add(\"\\n\" + Comp.THAddress.str);\n\t\telse if (fieldType === \"custom component|color picker\")\n\t\t\tans.add(\"\\n\" + Comp.ColorPicker.str);\n\t}\n\tif (!ans.size) return \"\";\n\treturn \"\\n\" + [...ans].join(\"\\n\");\n};\n\nexport const renderTemplate = (editors, settings) => {\n\treturn format(`import { Joi, AutoAdmin, Chance } from 'joi_auto_admin';\n${renderImport(editors, settings)}\n\nconst wait = (ms) => new Promise((res) => setTimeout(res, ms));\nconst chance = new Chance(0);${renderFunction(editors)}\n\nconst schema = ${renderJoi(editors, settings)};\n\nconst mockData = ${genChanceString(editors, 3)};\n\nconst App = ()=>{\n\tconst props = ${renderProps(editors, settings)};\n\treturn <AutoAdmin {...props} />\n}\n\nexport default App;\n`);\n};\n","import { Joi, AutoAdmin } from \"../../lib\";\nimport React from \"react\";\nimport { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { renderProps, renderTemplate } from \"./template\";\nimport { makeJoiLine, makeExtraJoiLines } from \"./joi_line\";\nimport _ from \"lodash\";\nimport { Spin } from \"antd\";\n\nconst editorSchemaInner = Joi.object({\n\t_id: Joi.string().required(),\n\tname: Joi.string().required().min(1),\n\tlabel: Joi.string(),\n\tfieldType: Joi.string()\n\t\t.required()\n\t\t.valid(\n\t\t\t\"dropdown\",\n\t\t\t\"upload|single file\",\n\t\t\t\"upload|multiple images\",\n\t\t\t\"upload|firebase\",\n\t\t\t\"upload|google cloud storage\",\n\t\t\t\"input\",\n\t\t\t\"format|url\",\n\t\t\t\"format|thai tel\",\n\t\t\t\"format|email\",\n\t\t\t\"format|thai zipcode\",\n\t\t\t\"format|thai citizen id\",\n\t\t\t\"format|regex validation example\",\n\t\t\t\"format|custom validation example\",\n\t\t\t\"custom component|dependent input example\",\n\t\t\t\"custom component|async searchable dropdown\",\n\t\t\t\"custom component|array of fields example\",\n\t\t\t\"custom component|color picker\",\n\t\t\t\"hierarchical dropdown|thai province\",\n\t\t\t\"hierarchical dropdown|static option, allow modify\",\n\t\t\t\"hierarchical dropdown|static option, no modify\",\n\t\t\t\"hierarchical dropdown|async option\",\n\t\t\t\"checkbox\",\n\t\t\t\"common|number\",\n\t\t\t\"date|date\",\n\t\t\t\"date|date-time\",\n\t\t\t\"date|time\",\n\t\t\t\"date|month\",\n\t\t\t\"common|paragraph\",\n\t\t\t\"common|password\",\n\t\t\t\"common|barcode scanner hardware\"\n\t\t),\n\t_fieldType: Joi.any(),\n\tstep: Joi.number(),\n\tplaceholder: Joi.string(),\n\tdefaultValue: Joi.string(),\n\trequire: Joi.boolean(),\n\tdisabled: Joi.boolean(),\n\ttwoColumn: Joi.boolean(),\n\textraMargin: Joi.boolean(),\n\tcolumnWidth: Joi.number(),\n\tcolumnHide: Joi.boolean(),\n\tdisableSorting: Joi.boolean(),\n\tdisableFilter: Joi.boolean(),\n\tappendDivider: Joi.boolean(),\n\tconditional: Joi.array(),\n});\n\nconst editorSchema1 = Joi.array()\n\t.items(editorSchemaInner, Joi.any().strip())\n\t.unique(\"name\");\nconst editorSchema2 = Joi.array().items(editorSchemaInner).unique(\"name\");\n\nconst settingsSchema = Joi.object({\n\ttitle: Joi.string(),\n\tdescription: Joi.string(),\n\tcanCreate: Joi.boolean(),\n\tcanUpdate: Joi.boolean(),\n\tcanDelete: Joi.boolean(),\n\tquerySchema: editorSchema1,\n\tdisableExcelDownload: Joi.boolean(),\n\tdisableExcelUpload: Joi.boolean(),\n\tuploadPreviewUrl: Joi.string(),\n\trowButtonExample: Joi.boolean(),\n\tsteps: Joi.string(),\n});\n\nexport const editorToCode = (editors, settings) => {\n\tvar editors2 = editorSchema1.validate(editors);\n\tvar settings2 = settingsSchema.validate(settings);\n\treturn renderTemplate(editors2.value, settings2.value);\n};\n\nexport const validateEditor = (editors) => editorSchema2.validate(editors);\n\nconst traverse = (node) => {\n\tif (Joi.isSchema(node)) return node;\n\tvar ans = {};\n\tfor (var key in node) ans[key] = traverse(node[key]);\n\treturn Joi.object(ans);\n};\n\nexport const makeJoiObj = (editors, settings) => {\n\tvar ans = {};\n\tfor (var editor of editors) {\n\t\t_.set(ans, editor.name, makeJoiLine(editor, settings, true));\n\t\tvar extraJoiLines = makeExtraJoiLines(editor, settings, true);\n\t\tfor (var i = 0, ii = extraJoiLines.length; i < ii; i++)\n\t\t\t_.set(ans, editor.name + \"-\" + i, extraJoiLines[i]);\n\t}\n\treturn traverse(ans);\n};\n\nexport const App = (props) => {\n\tconst { editors, settings } = props;\n\n\tconst props2 = useMemo(() => {\n\t\tif (!settings) return null;\n\n\t\tconst ans = renderProps(editors, settings, true);\n\t\tans.schema = makeJoiObj(editors, settings);\n\t\tif (settings.querySchema)\n\t\t\tans.querySchema = makeJoiObj(settings.querySchema, {});\n\t\treturn ans;\n\t}, [editors, settings]);\n\n\tif (!editors.length) return \"\";\n\tif (!settings)\n\t\treturn (\n\t\t\t<center>\n\t\t\t\t<Spin />\n\t\t\t</center>\n\t\t);\n\treturn <AutoAdmin {...props2} />;\n};\nApp.propTypes = {\n\teditors: PropTypes.array.isRequired,\n\tsettings: PropTypes.object,\n};\nApp.defaultProps = {\n\tsettings: null,\n};\n","import _ from \"lodash\";\nimport { validateEditor } from \"../../logic\";\n\nconst OMIT_SETTING = [\"step\"];\n\nconst findStep = (steps, target) => {\n  const stepValue = steps.findIndex((item) => item.value === target);\n  if (stepValue < 0) {\n    return 0;\n  }\n  return stepValue;\n};\n\nconst cleanDefault = (row) => {\n  if (!row) {\n    return row;\n  }\n  for (const [key, value] of Object.entries(row)) {\n    if (value || value === 0) {\n      row[key] = value;\n    } else {\n      delete row[key];\n    }\n  }\n  return row;\n};\n\nconst cleanColWidth = (colWidth) => {\n  try {\n    return parseInt(colWidth, 10);\n  } catch (error) {\n    return \"\";\n  }\n};\n\nexport const cleanTableSettingBeforeTrans = (setting) => {\n  if (!setting) {\n    return setting;\n  }\n  const newSetting = { ...setting };\n  const omitSetting = [...OMIT_SETTING];\n  if (_.get(newSetting.steps, \"[0]\")) {\n    newSetting.steps = newSetting.steps\n      .map((item, index) => item.value || `label step ${index + 1}`)\n      .join(\",\");\n  }\n  if (!newSetting.steps || !_.get(newSetting.steps, \"[0]\")) {\n    omitSetting.push(\"steps\");\n  }\n  if (!newSetting.querySchema?.query) {\n    omitSetting.push(\"querySchema\");\n  }\n  if (newSetting.querySchema?.query) {\n    const schema = [...newSetting.querySchema.schema];\n    newSetting.querySchema = schema;\n  }\n  return _.omit(newSetting, omitSetting);\n};\n\nexport const cleanFormBeforeTrans = (editor, settingSteps) => {\n  if (!Array.isArray(editor) || !Array.isArray(settingSteps)) {\n    return editor;\n  }\n  const schema = editor.map((item, index) => {\n    let row = { ...item };\n    row.step = findStep(settingSteps, item.step);\n    if (!item.name) {\n      row.name = `name-${index}`;\n    }\n    if (item.columnWidth) {\n      row.columnWidth = cleanColWidth(item.columnWidth);\n    }\n    return cleanDefault(row);\n  });\n  return schema;\n};\n\nexport const validateSchema = (editor) => {\n  const validateSchema = validateEditor(editor);\n  const error = _.get(validateSchema, \"error.details\");\n  if (!_.get(error, \"[0].message\")) {\n    return [true, \"\"];\n  }\n  const message = error.map((item) => {\n    return `- ${item.message}\\n`;\n  });\n  return [false, message.join(\" \")];\n};\n\nexport const handleCfLines = (editors, settings) => {\n  if (!settings?.cfLine?.length) return editors;\n  var ans = _.cloneDeep(editors);\n  var editorKey = _.keyBy(ans, \"_id\");\n  for (var line of settings.cfLine) {\n    var field = editorKey[line.field];\n    var dropdown = editorKey[line.dropdown];\n    if (field && dropdown) field.conditional = [dropdown.name, line.equal];\n  }\n  return ans;\n};\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport RenderCodeBlocks from \"./code-blocks\";\nimport { MENU } from \"../constants\";\nimport { App as TransView } from \"../../../logic\";\nimport { renderTemplate } from \"../../../logic/template\";\nimport { handleCfLines } from \"../logic\";\n\nconst RightPanelView = (props) => {\n  const { view, editors, settings } = props;\n  const editors2 = useMemo(() => handleCfLines(editors, settings), [\n    editors,\n    settings,\n  ]);\n\n  if (view === MENU.code) {\n    const codeText = renderTemplate(editors2, settings);\n    return <RenderCodeBlocks text={codeText} />;\n  }\n\n  return <TransView editors={editors2} settings={settings} />;\n};\n\nRightPanelView.propTypes = {\n  view: PropTypes.oneOf([MENU.ui, MENU.code]),\n  editors: PropTypes.array,\n  settings: PropTypes.object,\n};\n\nRightPanelView.defaultProps = {\n  view: MENU.ui,\n};\n\nexport default RightPanelView;\n","import _ from \"lodash\";\n\nconst generateId = () => {\n  return Math.floor(Math.random() * 90000) + 10000 + \"\";\n};\n\nexport const getInitRowField = () => {\n  const initRows = [{ ...rowField }, { ...rowField }, { ...rowField }];\n  return initRows.map((item) => {\n    const _id = generateId();\n    return { ...item, _id, name: `name-${_id}` };\n  });\n};\n\nexport const getSingleRow = (stepOptions) => {\n  const _id = generateId();\n  const row = { ...rowField, _id, name: `name-${_id}` };\n  if (_.get(stepOptions, \"[0]\")) row.step = _.get(stepOptions, \"[0].value\");\n  return row;\n};\n\nexport const getInitRowQuerySchema = () => {\n  const initRows = [{ ...rowQuerySchema }];\n  return initRows.map((item) => {\n    const _id = generateId();\n    return { ...item, _id, name: `name-${_id}` };\n  });\n};\n\nexport const getSingleRowQuerySchema = () => {\n  const _id = generateId();\n  return { ...rowQuerySchema, _id, name: `name-${_id}` };\n};\n\nexport const rowField = {\n  name: \"name\",\n  fieldType: \"input\",\n  _fieldType: [\"input\"],\n  placeholder: \"\",\n  defaultValue: \"\",\n  step: \"\",\n  require: false,\n  disabled: false,\n  twoColumn: false,\n  extraMargin: false,\n  columnWidth: \"\",\n  columnHide: false,\n  disabledSorting: false,\n  disableFilter: false,\n};\n\nexport const rowQuerySchema = {\n  name: \"name\",\n  fieldType: \"input\",\n  placeholder: \"\",\n};\n\nexport const disabledDefaultSet = new Set([\n  \"common|barcode scanner hardware\",\n  \"upload|single file\",\n  \"upload|multiple images\",\n  \"upload|firebase\",\n  \"upload|google cloud storage\",\n  \"dropdown\",\n  \"custom component|dependent input example\",\n  \"custom component|async searchable dropdown\",\n  \"common|password\",\n  \"hierarchical dropdown|static option, allow modify\",\n  \"hierarchical dropdown|static option, no modify\",\n  \"hierarchical dropdown|async option\",\n]);\n\nexport const disabledPlaceholderSet = new Set([\n  \"checkbox\",\n  \"upload|single file\",\n  \"upload|multiple images\",\n  \"upload|firebase\",\n  \"upload|google cloud storage\",\n  \"custom component|array of fields example\",\n  \"custom component|color picker\",\n]);\n\nexport const placeholderDefault = {\n  checkbox: \"true/false\",\n  \"date|date\": \"2021-12-30\",\n  \"date|date-time\": \"2021-12-30 20:50\",\n  \"date|time\": \"20:50\",\n  \"date|month\": \"2021-12\",\n  \"format|url\": \"http://www.google.com/...\",\n  \"format|thai tel\": \"0811111111\",\n  \"format|email\": \"abc@example.com\",\n  \"format|thai citizen id\": \"0139499973311\",\n  \"format|thai zipcode\": \"10210\",\n  \"common|number\": \"0/1/2/...\",\n  \"custom component|array of fields example\": \"[{}, {}]\",\n  \"custom component|color picker\": \"#ff0000\",\n};\n\nexport const fieldOptions = [\n  \"require\",\n  \"disabled\",\n  \"twoColumn\",\n  \"extraMargin\",\n  \"appendDivider\",\n];\n\nexport const columnOptions = [\"columnHide\", \"disableSorting\", \"disableFilter\"];\n\nexport const fieldTree = [\n  { l: \"input\" },\n  { l: \"dropdown\" },\n  { l: \"checkbox\" },\n  {\n    l: \"common\",\n    c: [\n      { l: \"number\" },\n      { l: \"paragraph\" },\n      { l: \"password\" },\n      { l: \"barcode scanner hardware\" },\n    ],\n  },\n  {\n    l: \"date\",\n    c: [{ l: \"date\" }, { l: \"time\" }, { l: \"date-time\" }, { l: \"month\" }],\n  },\n  {\n    l: \"format\",\n    c: [\n      { l: \"url\" },\n      { l: \"email\" },\n      { l: \"thai tel\" },\n      { l: \"thai citizen id\" },\n      { l: \"thai zipcode\" },\n      { l: \"regex validation example\" },\n      { l: \"custom validation example\" },\n    ],\n  },\n  {\n    l: \"upload\",\n    c: [\n      { l: \"single file\" },\n      { l: \"multiple images\" },\n      { l: \"firebase\" },\n      { l: \"google cloud storage\" },\n    ],\n  },\n  {\n    l: \"hierarchical dropdown\",\n    c: [\n      { l: \"static option, allow modify\" },\n      { l: \"static option, no modify\" },\n      { l: \"async option\" },\n      { l: \"thai province\" },\n    ],\n  },\n  {\n    l: \"custom component\",\n    c: [\n      { l: \"async searchable dropdown\" },\n      { l: \"color picker\" },\n      { l: \"dependent input example\" },\n      { l: \"array of fields example\" },\n    ],\n  },\n];\n\nexport const queryFieldTree = [\n  { label: \"input\", value: \"input\" },\n  { label: \"dropdown\", value: \"dropdown\" },\n  { label: \"number\", value: \"common|number\" },\n  { label: \"date\", value: \"date|date\" },\n];\n","export const fullWidth = {\n  width: \"100%\",\n};\n\nexport const Wrapper1 = {\n  padding: \"1rem\",\n};\n\nexport const Wrapper2 = {\n  padding: \"0 1rem\",\n};\n\nexport const contentWhite = {\n  backgroundColor: \"white\",\n  padding: \"2rem\",\n  borderRadius: 8,\n};\n\nexport const gray = {\n  color: \"#ccc\",\n};\n\nexport const layoutMargin = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  margin: \"0 0 1rem 0\",\n};\n\nexport const checkbox = {\n  marginLeft: 0,\n  marginTop: \"0.5rem\",\n};\n\nexport const input = {\n  maxWidth: 500,\n  marginRight: \"1rem\",\n  marginBottom: \"1rem\",\n};\n\nexport const VerticalSpacer = {\n  margin: \"2rem 0\",\n};\n\nexport const rowInput = {\n  marginBottom: \"1rem\",\n};\n","import _ from \"lodash\";\nimport { lookupLabel } from \"../../../logic/lookup_label\";\n\nexport const createOptions = (options) => {\n  if (!Array.isArray(options)) {\n    return [];\n  }\n  return options.map((item) => ({ label: item, value: item }));\n};\n\nexport const createConfig = (index, options, newForm, dataOptions) => {\n  if (!_.get(options, \"[0]\")) {\n    const defaultConfig = {};\n    dataOptions.forEach((item) => {\n      defaultConfig[item] = false;\n    });\n    newForm[index] = {\n      ...(newForm[index] && newForm[index]),\n      ...defaultConfig,\n    };\n    return newForm;\n  }\n  const keyDiffOptions = _.keyBy(_.difference(dataOptions, options));\n  dataOptions.forEach((item) => {\n    if (keyDiffOptions[item]) {\n      newForm[index][item] = false;\n    } else {\n      newForm[index][item] = true;\n    }\n  });\n  return newForm;\n};\n\nexport const createStepOptions = () => {\n  const options = [{ label: \"No step\", value: \"No step\" }];\n  for (let i = 2; i <= 20; i++) {\n    options.push({ label: i + \" step\", value: i });\n  }\n  return options;\n};\n\nexport const getDefaultBooleanConfig = (options) => {\n  if (!Array.isArray(options)) {\n    return options;\n  }\n  return options.find((item) => item.label === \"extraMargin\");\n};\n\nexport const getHeader = (item) => {\n  var name = lookupLabel(item);\n  if (!item.step && item.step !== 0) return name;\n  return `${name} (${item.step})`;\n};\n","import React, { useMemo } from \"react\";\nimport { PlusOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\nimport { Row, Col, Select, Button } from \"antd\";\nimport { lookupLabel } from \"../../../logic/lookup_label\";\n\nconst ConditionalField = (props) => {\n\tconst { formState, setSettingState, settingState } = props;\n\n\tconst lines = settingState.cfLine || [makeLine([])];\n\tconst setLines = (cfLine) => setSettingState({ ...settingState, cfLine });\n\tconst addLine = () => setLines([...lines, makeLine(lines)]);\n\tconst removeLine = (index) => () => {\n\t\tvar newLines = [...lines];\n\t\tnewLines.splice(index, 1);\n\t\tif (!newLines.length)\n\t\t\tsetSettingState({ ...settingState, conditionalField: false });\n\t\tsetLines(newLines);\n\t};\n\tconst editLine = (index, field) => (value) => {\n\t\tvar newLines = [...lines];\n\t\tvar newValue = { ...lines[index], [field]: value };\n\t\tnewLines.splice(index, 1, newValue);\n\t\tsetLines(newLines);\n\t};\n\n\tconst { dropdowns, fields } = useMemo(\n\t\t() => ({\n\t\t\tdropdowns: formState\n\t\t\t\t.filter((a) => a.fieldType === \"dropdown\")\n\t\t\t\t.map((a) => ({ label: lookupLabel(a), value: a._id })),\n\t\t\tfields: formState.map((a) => ({\n\t\t\t\tlabel: lookupLabel(a),\n\t\t\t\tvalue: a._id,\n\t\t\t})),\n\t\t}),\n\t\t[formState]\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{lines.map((a, i) => (\n\t\t\t\t<Row gutter={8} key={a._id} style={{ marginTop: 20 }}>\n\t\t\t\t\t<Col span={1}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t<CloseCircleOutlined\n\t\t\t\t\t\t\t\t\tstyle={{ color: \"#ccc\" }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tonClick={removeLine(i)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={7} offset={1}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tsize={1}\n\t\t\t\t\t\t\tplaceholder=\"When dropdown...\"\n\t\t\t\t\t\t\toptions={dropdowns}\n\t\t\t\t\t\t\tvalue={a.dropdown}\n\t\t\t\t\t\t\tonChange={editLine(i, \"dropdown\")}\n\t\t\t\t\t\t\tdropdownRender={dropdownRender(\n\t\t\t\t\t\t\t\t\"Dropdown field needed.\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={7}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\toptions={OPTIONS}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tsize={1}\n\t\t\t\t\t\t\tplaceholder=\"equals...\"\n\t\t\t\t\t\t\tvalue={a.equal}\n\t\t\t\t\t\t\tonChange={editLine(i, \"equal\")}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col span={7}>\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\toptions={fields.filter(filterField(a, lines))}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tsize={1}\n\t\t\t\t\t\t\tplaceholder=\"Show this field\"\n\t\t\t\t\t\t\tvalue={a.field}\n\t\t\t\t\t\t\tonChange={editLine(i, \"field\")}\n\t\t\t\t\t\t\tdropdownRender={dropdownRender(\"All fields used.\")}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t))}\n\t\t\t<Button\n\t\t\t\tblock\n\t\t\t\ttype=\"primary\"\n\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\tstyle={{ marginTop: 30 }}\n\t\t\t\tonClick={addLine}\n\t\t\t>\n\t\t\t\tAdd ConditionalField\n\t\t\t</Button>\n\t\t</>\n\t);\n};\n\nconst makeLine = (allLines) => {\n\tvar _id = Math.floor(Math.random() * 10000);\n\tif (!allLines.length) return { _id };\n\treturn { ...allLines[allLines.length - 1], field: null, _id };\n};\n\nconst filterField = (current, lines) => (c) =>\n\t!lines.find((b) => c.value === b.field && b.field !== current.field);\n\nconst dropdownRender = (notFoundText) => (a) => {\n\tif (a.props.options.length) return a;\n\treturn (\n\t\t<>\n\t\t\t{a}\n\t\t\t<center style={{ marginTop: -15, marginBottom: 10 }}>\n\t\t\t\t{notFoundText}\n\t\t\t</center>\n\t\t</>\n\t);\n};\n\nconst OPTIONS = [\n\t{ value: \"pizza\", label: \"Pizza\" },\n\t{ value: \"steak\", label: \"Steak\" },\n\t{ value: \"sushi\", label: \"Sushi\" },\n\t{ value: \"hamburger\", label: \"Hamburger\" },\n\t{ value: \"noodles\", label: \"Noodles\" },\n];\n\nexport default ConditionalField;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport {\n  PlusOutlined,\n  QuestionCircleOutlined,\n  UpOutlined,\n  DownOutlined,\n  DeleteOutlined,\n} from \"@ant-design/icons\";\nimport {\n  Input,\n  Form,\n  Checkbox,\n  Collapse,\n  Row,\n  Col,\n  Typography,\n  Select,\n  Divider,\n  Button,\n  Tooltip,\n} from \"antd\";\nimport { SETTINGS, SETTINGS2 } from \"../constants\";\nimport {\n  queryFieldTree,\n  getInitRowQuerySchema,\n  getSingleRowQuerySchema,\n  disabledPlaceholderSet,\n} from \"./data-field\";\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\nimport ConditionalField from \"./conditional_field\";\n\nconst RenderSetting = (props) => {\n  const { settingState, setSettingState } = props;\n  const [optionsStep] = useState(() => logic.createStepOptions());\n\n  const onChangeField = (key, value) => {\n    const newSettings = { ...settingState };\n    newSettings[key] = value;\n    if (key === \"step\") {\n      onChangeSteps(newSettings, value);\n      return;\n    }\n    setSettingState(newSettings);\n  };\n\n  const onChangeSteps = (state, numberOfStep) => {\n    if (numberOfStep === \"No step\") {\n      state.step = numberOfStep;\n      state.steps = [];\n    }\n    const steps = [];\n    for (let i = 1; i <= numberOfStep; i++) {\n      steps.push({ placeholder: `label step ${i}`, value: `label step ${i}` });\n    }\n    state.steps = [...steps];\n    setSettingState(state);\n  };\n\n  const onChangeInputSteps = (index, value) => {\n    const newSettings = { ...settingState };\n    newSettings.steps[index].value = value;\n    setSettingState(newSettings);\n  };\n\n  const onChangeCheckboxQuery = () => {\n    const newSettings = _.cloneDeep(settingState);\n    if (newSettings.querySchema.query) {\n      newSettings.querySchema.schema = [...getInitRowQuerySchema()];\n    }\n    newSettings.querySchema.query = !newSettings.querySchema.query;\n    setSettingState(newSettings);\n  };\n\n  const onChangeConditionalField = () => {\n    const newSettings = { ...settingState };\n    newSettings.conditionalField = !settingState.conditionalField;\n    setSettingState(newSettings);\n  };\n\n  const onChangeFieldQuerySchema = (index, key, value) => {\n    if (!key) {\n      return;\n    }\n    const newSettings = _.cloneDeep(settingState);\n    if (!newSettings.querySchema.schema[index]) {\n      return;\n    }\n    newSettings.querySchema.schema[index][key] = value;\n    setSettingState(newSettings);\n  };\n\n  const onAddQuerySchema = () => {\n    const newSettings = _.cloneDeep(settingState);\n    newSettings.querySchema.schema = [\n      ...newSettings.querySchema.schema,\n      { ...getSingleRowQuerySchema() },\n    ];\n    setSettingState(newSettings);\n  };\n\n  const onDeleteQuerySchema = (index) => {\n    const newSettings = _.cloneDeep(settingState);\n    if (!_.get(newSettings.querySchema?.schema, \"[1]\")) {\n      newSettings.querySchema.query = false;\n      newSettings.querySchema.schema = [...getInitRowQuerySchema()];\n    } else {\n      newSettings.querySchema.schema.splice(index, 1);\n    }\n    setSettingState(newSettings);\n  };\n\n  const onMoveUp = (index) => {\n    if (index === 0) return;\n    const newSettings = _.cloneDeep(settingState);\n    const { schema } = newSettings.querySchema;\n    schema.splice(index - 1, 2, schema[index], schema[index - 1]);\n    setSettingState(newSettings);\n  };\n\n  const onMoveDown = (index) => {\n    if (index === settingState.querySchema.schema.length - 1) return;\n    const newSettings = _.cloneDeep(settingState);\n    const { schema } = newSettings.querySchema;\n    schema.splice(index, 2, schema[index + 1], schema[index]);\n    setSettingState(newSettings);\n  };\n\n  const makeCheckboxValue = (allChoices) =>\n    _.chain(settingState)\n      .pick(allChoices)\n      .keys()\n      .filter((a) => settingState[a])\n      .value();\n\n  const onCheckboxChange = (trueChoices, allChoices) => {\n    var newState = { ...settingState };\n    for (var allChoice of allChoices) delete newState[allChoice];\n    for (var trueChoice of trueChoices) newState[trueChoice] = true;\n    setSettingState(newState);\n  };\n\n  return (\n    <Form>\n      <Typography.Title level={5}>Table Settings</Typography.Title>\n      <Input\n        style={styles.input}\n        placeholder=\"title\"\n        value={settingState?.title}\n        onChange={(event) => onChangeField(\"title\", event.target.value)}\n      />\n      <Input\n        style={styles.input}\n        placeholder=\"description\"\n        value={settingState?.description}\n        onChange={(event) => onChangeField(\"description\", event.target.value)}\n      />\n      <div style={styles.layoutMargin}>\n        <Checkbox.Group\n          style={{ marginBottom: 15, marginTop: 5 }}\n          options={SETTINGS}\n          value={makeCheckboxValue(SETTINGS)}\n          onChange={(a) => onCheckboxChange(a, SETTINGS)}\n        />\n        <Checkbox.Group\n          options={SETTINGS2}\n          value={makeCheckboxValue(SETTINGS2)}\n          onChange={(a) => onCheckboxChange(a, SETTINGS2)}\n        />\n        <Divider />\n        <div>\n          <Typography.Title level={5}>\n            Multi-step Form\n            <Tooltip\n              overlayInnerStyle={{ width: 400 }}\n              title='For complex form, you can divide your form into multiple steps. First, specify all the step names below. Then, go to \"Fields\" panel to assign each field to their respective step.'\n            >\n              <QuestionCircleOutlined\n                style={{ marginLeft: 10, color: \"#ccc\" }}\n              />\n            </Tooltip>\n          </Typography.Title>\n          <Row>\n            <Typography.Text style={{ padding: \"0.25rem 0.5rem 0 0\" }}>\n              Form Steps\n            </Typography.Text>\n            {Array.isArray(optionsStep) && (\n              <Select\n                defaultValue={settingState?.step || optionsStep[0].value}\n                style={{ flex: 1 }}\n                onChange={(value) => onChangeField(\"step\", value)}\n              >\n                {optionsStep.map((st, si) => (\n                  <Select.Option key={si.toString()} value={st.value}>\n                    {st.label}\n                  </Select.Option>\n                ))}\n              </Select>\n            )}\n          </Row>\n          <div style={{ paddingTop: \"1rem\" }}>\n            {Array.isArray(settingState?.steps) &&\n              settingState.steps.map((item, index) => (\n                <Row key={index.toString()} style={{ padding: \"0.5rem 0\" }}>\n                  <Col style={{ padding: \"0.25rem 0.5rem 0 0\", width: 65 }}>\n                    <Typography.Text>{`step ${index + 1}`}</Typography.Text>\n                  </Col>\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder={item.placeholder}\n                      value={item.value}\n                      onChange={(event) =>\n                        onChangeInputSteps(index, event.target.value)\n                      }\n                    />\n                  </Col>\n                </Row>\n              ))}\n          </div>\n        </div>\n        <Divider />\n        <div>\n          <Typography.Title level={5}>\n            Conditional Fields\n            <Tooltip\n              overlayInnerStyle={{ width: 400 }}\n              title=\"Some fields should be visible only when certain conditions are met. For example, the form may ask about the number of your children. This field should only show when your marriage status is 'married' or 'divorced' but not 'single'.\"\n            >\n              <QuestionCircleOutlined\n                style={{ marginLeft: 10, color: \"#ccc\" }}\n              />\n            </Tooltip>\n          </Typography.Title>\n          <Checkbox\n            checked={settingState.conditionalField || false}\n            onChange={() => onChangeConditionalField()}\n          >\n            enable conditional fields\n          </Checkbox>\n          {settingState.conditionalField && <ConditionalField {...props} />}\n        </div>\n        <Divider />\n        <div>\n          <Typography.Title level={5}>\n            Table Query\n            <Tooltip\n              overlayInnerStyle={{ width: 400 }}\n              title=\"You can specify the query used for table data. First, design your UI below. Then, implement the query logic in 'getMany' function later on.\"\n            >\n              <QuestionCircleOutlined\n                style={{ marginLeft: 10, color: \"#ccc\" }}\n              />\n            </Tooltip>\n          </Typography.Title>\n          <Checkbox\n            checked={settingState.querySchema?.query || false}\n            onChange={() => onChangeCheckboxQuery()}\n          >\n            enable table query\n          </Checkbox>\n          {settingState.querySchema?.query && (\n            <>\n              <div style={{ padding: \"1rem 0 0 0\" }}>\n                {_.get(settingState.querySchema?.schema, \"[0]\") && (\n                  <Collapse defaultActiveKey={[\"0\"]} accordion>\n                    {settingState.querySchema.schema.map((qs, qi) => (\n                      <Collapse.Panel\n                        key={qi.toString()}\n                        header={logic.getHeader(qs)}\n                        extra={\n                          <>\n                            <Button\n                              icon={<UpOutlined style={styles.gray} />}\n                              type=\"text\"\n                              onClick={(event) => {\n                                onMoveUp(qi);\n                                event.stopPropagation();\n                              }}\n                            />\n                            <Button\n                              icon={<DownOutlined style={styles.gray} />}\n                              type=\"text\"\n                              onClick={(event) => {\n                                onMoveDown(qi);\n                                event.stopPropagation();\n                              }}\n                            />\n                            <Button\n                              icon={<DeleteOutlined style={styles.gray} />}\n                              type=\"text\"\n                              onClick={(event) => {\n                                onDeleteQuerySchema(qi);\n                                event.stopPropagation();\n                              }}\n                            />\n                          </>\n                        }\n                      >\n                        <Row style={styles.rowInput}>\n                          <Col flex=\"1\">\n                            <Row>\n                              <Typography.Text\n                                style={{ padding: \"0.25rem 0.5rem 0 0\" }}\n                              >\n                                FieldType\n                              </Typography.Text>\n                              <Select\n                                defaultValue={queryFieldTree[0]}\n                                value={qs.fieldType}\n                                style={{ flex: 1 }}\n                                onChange={(value) =>\n                                  onChangeFieldQuerySchema(\n                                    qi,\n                                    \"fieldType\",\n                                    value\n                                  )\n                                }\n                                options={queryFieldTree}\n                              />\n                            </Row>\n                          </Col>\n                          <Col span=\"1\" />\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"label\"\n                              value={qs.label}\n                              onChange={(event) =>\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"label\",\n                                  event.target.value\n                                )\n                              }\n                            />\n                          </Col>\n                        </Row>\n                        <Row style={styles.rowInput}>\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"name\"\n                              value={qs.name}\n                              onChange={(event) =>\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"name\",\n                                  event.target.value\n                                )\n                              }\n                            />\n                          </Col>\n                          <Col span=\"1\" />\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"placeholder\"\n                              value={qs.placeholder}\n                              disabled={disabledPlaceholderSet.has(\n                                qs.fieldType\n                              )}\n                              onChange={(event) => {\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"placeholder\",\n                                  event.target.value\n                                );\n                              }}\n                            />\n                          </Col>\n                        </Row>\n                      </Collapse.Panel>\n                    ))}\n                  </Collapse>\n                )}\n              </div>\n              <div>\n                <Button\n                  block\n                  type=\"primary\"\n                  icon={<PlusOutlined />}\n                  style={styles.VerticalSpacer}\n                  onClick={onAddQuerySchema}\n                >\n                  Add Query\n                </Button>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </Form>\n  );\n};\n\nRenderSetting.propTypes = {\n  formState: PropTypes.array.isRequired,\n  setSettingState: PropTypes.func.isRequired,\n};\n\nexport default RenderSetting;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Form,\n  Button,\n  Collapse,\n  Select,\n  Row,\n  Col,\n  Input,\n  Checkbox,\n  Divider,\n  Typography,\n  Cascader,\n} from \"antd\";\nimport _ from \"lodash\";\nimport {\n  fieldOptions,\n  columnOptions,\n  placeholderDefault,\n  fieldTree,\n  disabledDefaultSet,\n  disabledPlaceholderSet,\n} from \"./data-field\";\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\nimport { UpOutlined, DownOutlined, DeleteOutlined } from \"@ant-design/icons\";\n\nconst FormFields = (props) => {\n  const { formState, setFormState, settingState } = props;\n\n  const [dataFieldOptions] = useState(() => logic.createOptions(fieldOptions));\n  const [dataColumnOptions] = useState(() =>\n    logic.createOptions(columnOptions)\n  );\n\n  useEffect(() => {\n    if (_.get(settingState?.steps, \"[0]\")) {\n      onSetDefaultStep();\n    }\n    var allInputs = document.querySelectorAll(\"input\");\n    for (var i = 0, ii = allInputs.length; i < ii; i++)\n      allInputs[i].setAttribute(\"size\", \"1\");\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [settingState]);\n\n  const onSetDefaultStep = () => {\n    let newForm = [...formState];\n    if (!Array.isArray(newForm)) {\n      return;\n    }\n    newForm = newForm.map((item) => {\n      const rowForm = { ...item };\n      if (!rowForm.step) {\n        rowForm.step = _.get(settingState.steps, \"[0].value\");\n      }\n      const isStepValueChanged =\n        rowForm.step &&\n        !settingState.steps.find((s) => s.value === rowForm.step);\n      if (isStepValueChanged) {\n        rowForm.step = _.get(settingState.steps, \"[0].value\");\n      }\n      return rowForm;\n    });\n    setFormState(newForm);\n  };\n\n  const onDeleteField = (index) => {\n    if (!Array.isArray(formState) || formState.length === 1) return;\n    const newForm = [...formState];\n    newForm.splice(index, 1);\n    setFormState(newForm);\n  };\n\n  const onMoveUp = (index) => {\n    if (!Array.isArray(formState) || index === 0) {\n      return;\n    }\n    const newForm = [...formState];\n    newForm.splice(index - 1, 2, formState[index], formState[index - 1]);\n    setFormState(newForm);\n  };\n\n  const onMoveDown = (index) => {\n    if (!Array.isArray(formState) || index === formState.length - 1) {\n      return;\n    }\n    const newForm = [...formState];\n    newForm.splice(index, 2, formState[index + 1], formState[index]);\n    setFormState(newForm);\n  };\n\n  const onChangeField = (index, key, value) => {\n    if (!Array.isArray(formState) || !key) {\n      return;\n    }\n    let newForm = [...formState];\n    if (!newForm[index]) {\n      return;\n    }\n    newForm[index][key] = value;\n    if (key === \"fieldType\" && disabledDefaultSet.has(value)) {\n      newForm[index].defaultValue = \"\";\n    }\n    setFormState([...newForm]);\n  };\n\n  const onChangeConfig = (key, index, options) => {\n    let newForm = [...formState];\n    const data = key === \"field\" ? fieldOptions : columnOptions;\n    const newOptionConfig = logic.createConfig(index, options, newForm, data);\n    setFormState([...newOptionConfig]);\n  };\n\n  return (\n    <Form>\n      {formState.length && (\n        <Collapse defaultActiveKey={formState[0].name} accordion>\n          {formState.map((item, index) => (\n            <Collapse.Panel\n              key={item.name}\n              header={logic.getHeader(item)}\n              extra={\n                <>\n                  <Button\n                    icon={<UpOutlined style={styles.gray} />}\n                    type=\"text\"\n                    onClick={(event) => {\n                      onMoveUp(index);\n                      event.stopPropagation();\n                    }}\n                  />\n                  <Button\n                    icon={<DownOutlined style={styles.gray} />}\n                    type=\"text\"\n                    onClick={(event) => {\n                      onMoveDown(index);\n                      event.stopPropagation();\n                    }}\n                  />\n                  <Button\n                    icon={<DeleteOutlined style={styles.gray} />}\n                    type=\"text\"\n                    onClick={(event) => {\n                      onDeleteField(index);\n                      event.stopPropagation();\n                    }}\n                  />\n                </>\n              }\n            >\n              <Row style={styles.rowInput}>\n                <Col flex=\"90px\">\n                  <Typography.Text\n                    style={{\n                      height: 32,\n                      lineHeight: \"32px\",\n                    }}\n                  >\n                    FieldType\n                  </Typography.Text>\n                </Col>\n                <Col flex=\"auto\">\n                  <Cascader\n                    showSearch\n                    allowClear={false}\n                    fieldNames={{ label: \"l\", value: \"l\", children: \"c\" }}\n                    options={fieldTree}\n                    value={item._fieldType}\n                    style={{ width: \"100%\" }}\n                    dropdownRender={(a) => (\n                      <div className=\"large-field-type\">{a}</div>\n                    )}\n                    onChange={(value) => {\n                      onChangeField(index, \"_fieldType\", value);\n                      onChangeField(index, \"fieldType\", value.join(\"|\"));\n                    }}\n                  />\n                </Col>\n              </Row>\n              <Row style={styles.rowInput}>\n                <Col flex=\"1\">\n                  <Input\n                    placeholder=\"label\"\n                    value={item.label}\n                    onChange={(event) =>\n                      onChangeField(index, \"label\", event.target.value)\n                    }\n                  />\n                </Col>\n                <Col span=\"1\" />\n                <Col flex=\"1\">\n                  <Input\n                    placeholder=\"name\"\n                    value={item.name}\n                    onChange={(event) =>\n                      onChangeField(index, \"name\", event.target.value)\n                    }\n                  />\n                </Col>\n              </Row>\n              <Row style={styles.rowInput}>\n                <Col flex=\"1\">\n                  <Input\n                    placeholder=\"placeholder\"\n                    value={item.placeholder}\n                    disabled={disabledPlaceholderSet.has(item.fieldType)}\n                    onChange={(event) =>\n                      onChangeField(index, \"placeholder\", event.target.value)\n                    }\n                  />\n                </Col>\n                <Col span=\"1\" />\n                <Col flex=\"1\">\n                  <Input\n                    placeholder={\n                      \"defaultValue \" +\n                      (placeholderDefault[item.fieldType]\n                        ? \"ex. \" + placeholderDefault[item.fieldType]\n                        : \"\")\n                    }\n                    disabled={disabledDefaultSet.has(item.fieldType)}\n                    value={item.defaultValue}\n                    onChange={(event) =>\n                      onChangeField(index, \"defaultValue\", event.target.value)\n                    }\n                  />\n                </Col>\n              </Row>\n              {_.get(settingState?.steps, \"[0]\") && (\n                <Row style={styles.rowInput}>\n                  <Col flex=\"1\">\n                    <Row>\n                      <Col flex=\"45px\">\n                        <Typography.Text\n                          style={{\n                            height: 32,\n                            lineHeight: \"32px\",\n                          }}\n                        >\n                          Step\n                        </Typography.Text>\n                      </Col>\n                      <Col flex=\"auto\">\n                        <Select\n                          defaultValue={\n                            !_.isNil(item.step)\n                              ? item.step\n                              : settingState.steps[0].value\n                          }\n                          style={{ width: \"100%\" }}\n                          value={item.step || settingState.steps[0].value}\n                          onChange={(value) =>\n                            onChangeField(index, \"step\", value)\n                          }\n                        >\n                          {settingState.steps.map((st, si) => (\n                            <Select.Option key={si.toString()} value={st.value}>\n                              {st.value || `step ${si}`}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Col>\n                    </Row>\n                  </Col>\n                  <Col span=\"1\" />\n                  <Col flex=\"1\"></Col>\n                </Row>\n              )}\n              <Checkbox.Group\n                options={dataFieldOptions || []}\n                onChange={(option) => onChangeConfig(\"field\", index, option)}\n                style={{ marginTop: 10 }}\n              />\n              <Divider type=\"horizontal\" />\n              <Row>\n                <Col span=\"15\">\n                  <Checkbox.Group\n                    options={dataColumnOptions || []}\n                    onChange={(option) =>\n                      onChangeConfig(\"column\", index, option)\n                    }\n                    style={{ marginBottom: \"1rem\", lineHeight: \"32px\" }}\n                  />\n                </Col>\n                <Col span=\"1\" />\n                <Col span=\"8\">\n                  <Input\n                    type=\"number\"\n                    placeholder=\"columnWidth\"\n                    value={item.columnWidth}\n                    onChange={(event) =>\n                      onChangeField(index, \"columnWidth\", event.target.value)\n                    }\n                  />\n                </Col>\n              </Row>\n            </Collapse.Panel>\n          ))}\n        </Collapse>\n      )}\n    </Form>\n  );\n};\n\nFormFields.propTypes = {\n  formState: PropTypes.array.isRequired,\n  setFormState: PropTypes.func.isRequired,\n  settingState: PropTypes.object,\n};\n\nexport default FormFields;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport RenderSetting from \"./setting\";\nimport RenderFormFields from \"./form-fields\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"./styles\";\nimport _ from \"lodash\";\n\nconst LeftPanelView = (props) => {\n  const { view } = props;\n  const otherProps = _.omit(props, [\"view\"]) || {};\n\n  if (view === MENU_FORM.setting) {\n    return (\n      <div style={styles.Wrapper1}>\n        <RenderSetting {...otherProps} />\n      </div>\n    );\n  }\n  return (\n    <div style={styles.Wrapper2}>\n      <RenderFormFields {...otherProps} />\n    </div>\n  );\n};\n\nLeftPanelView.propTypes = {\n  view: PropTypes.oneOf([MENU_FORM.form, MENU_FORM.setting]),\n  formState: PropTypes.array.isRequired,\n  setFormState: PropTypes.func.isRequired,\n  settingState: PropTypes.object.isRequired,\n  setSettingState: PropTypes.func.isRequired,\n};\n\nLeftPanelView.defaultProps = {\n  view: MENU_FORM.form,\n};\n\nexport default LeftPanelView;\n","const panelColor = \"rgb(35,39,46)\";\nconst panelColor2 = \"#dfe6e9\";\n\nexport const LayoutContainer = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  minWidth: 800,\n};\n\nexport const panelContainer = {\n  flex: 1,\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  width: \"100%\",\n};\n\nexport const resizableContainer = {\n  height: \"100%\",\n  width: 5,\n  cursor: \"col-resize\",\n};\n\nexport const leftPanelContainer = {\n  backgroundColor: \"white\",\n  padding: \"1rem\",\n  marginLeft: 6,\n  marginBottom: 6,\n  borderRadius: 8,\n  border: `1px solid ${panelColor}`,\n  position: \"relative\",\n};\n\nexport const rightPanelContainer = {\n  backgroundColor: panelColor,\n};\n\nexport const rightPanelContainer2 = {\n  backgroundColor: panelColor2,\n};\n\nexport const LeftContent = {\n  height: \"100%\",\n};\n\nexport const brandingText = {\n  marginLeft: \"1rem\",\n  top: 6,\n  display: \"inline\",\n  position: \"relative\",\n};\n\nexport const githubStar = {\n  marginLeft: 20,\n  marginTop: 3,\n  verticalAlign: \"middle\",\n};\n\nexport const githubText = { top: 2, position: \"relative\" };\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CheckCircleTwoTone, CloseCircleTwoTone } from \"@ant-design/icons\";\nimport { Row, Button } from \"antd\";\nimport { useWindowSize } from \"./hooks\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"../styles\";\nimport * as innerStyles from \"./styles\";\n\nconst MIN_WIDTH = 400;\nconst OTHER_ELEM_SIZE = 52;\nconst INNER_ELEM_SIZE = 72;\n\nconst PanelView = (props) => {\n  const {\n    leftView,\n    rightView,\n    rightViewStyle,\n    menu,\n    bottomBar,\n    currentView,\n    validateSchema,\n  } = props;\n  const splitPanelRef = useRef();\n  const leftPanelRef = useRef();\n  const [isDragging, setIsDragging] = useState(false);\n  const [separatorXPosition, setSeparatorXPosition] = useState();\n  const [leftPanelWidth, setLeftPanelWidth] = useState();\n  const [windowHeight] = useWindowSize();\n  const [showError, setShowError] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"touchmove\", onTouchMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n    };\n  });\n\n  useEffect(() => {\n    if (validateSchema?.isValidate && showError) {\n      setShowError(false);\n    }\n  }, [showError, validateSchema]);\n\n  const onEventMouseDown = (event) => {\n    if (!event) {\n      return;\n    }\n    setSeparatorXPosition(event.clientX);\n    if (!isDragging) {\n      setIsDragging(true);\n    }\n    if (!leftPanelWidth && leftPanelRef.current) {\n      setLeftPanelWidth(leftPanelRef.current.clientWidth);\n    }\n  };\n\n  const onMouseMove = (e) => {\n    if (isDragging) {\n      e.preventDefault();\n    }\n    onMove(e.clientX);\n  };\n\n  const onTouchMove = (e) => {\n    if (!e) {\n      return;\n    }\n    onMove(e.touches[0].clientX);\n  };\n\n  const onMouseUp = () => {\n    setSeparatorXPosition(undefined);\n    setIsDragging(false);\n  };\n\n  const onMove = (clientX) => {\n    if (!clientX) {\n      return;\n    }\n    if (isDragging && leftPanelWidth && separatorXPosition) {\n      const newLeftWidth = leftPanelWidth + clientX - separatorXPosition;\n      setSeparatorXPosition(clientX);\n      if (newLeftWidth < MIN_WIDTH) {\n        setLeftPanelWidth(MIN_WIDTH);\n        return;\n      }\n      if (splitPanelRef.current) {\n        const splitPaneWidth = splitPanelRef.current.clientWidth;\n        if (newLeftWidth > splitPaneWidth - MIN_WIDTH) {\n          setLeftPanelWidth(splitPaneWidth - MIN_WIDTH);\n          return;\n        }\n      }\n      setLeftPanelWidth(newLeftWidth);\n    }\n  };\n\n  const getElemSize = () => {\n    const defaultSize = OTHER_ELEM_SIZE + INNER_ELEM_SIZE;\n    if (currentView === MENU_FORM.form) {\n      return defaultSize + 40 + 60;\n    }\n    return defaultSize;\n  };\n\n  return (\n    <div ref={splitPanelRef} style={styles.panelContainer}>\n      <div\n        ref={leftPanelRef}\n        style={{\n          ...styles.leftPanelContainer,\n          width: leftPanelWidth || \"50%\",\n          ...(windowHeight && {\n            height: windowHeight - OTHER_ELEM_SIZE,\n          }),\n        }}\n      >\n        <div style={{ height: 40 }}>{menu}</div>\n        {currentView === MENU_FORM.form && (\n          <Row\n            style={{\n              alignItems: \"center\",\n              margin: \"0.5rem 1rem 1rem 1rem\",\n              height: 32,\n            }}\n          >\n            {validateSchema?.isValidate && (\n              <CheckCircleTwoTone\n                twoToneColor=\"#52c41a\"\n                style={{ fontSize: 24 }}\n              />\n            )}\n            {!validateSchema?.isValidate && (\n              <CloseCircleTwoTone\n                twoToneColor=\"#eb2f96\"\n                style={{ fontSize: 24 }}\n              />\n            )}\n            <span style={{ paddingLeft: \"0.5rem\" }}>Validate Schema</span>\n            {!validateSchema?.isValidate && (\n              <Button\n                style={{ marginLeft: 16 }}\n                type=\"primary\"\n                danger\n                onClick={() => setShowError(!showError)}\n              >\n                {showError ? \"HIDE ERROR\" : \"SHOW ERROR\"}\n              </Button>\n            )}\n          </Row>\n        )}\n        <div\n          style={{\n            overflow: \"auto\",\n            height: \"100%\",\n            ...(windowHeight && {\n              maxHeight: windowHeight - getElemSize(),\n            }),\n          }}\n        >\n          {leftView}\n        </div>\n        {currentView === MENU_FORM.form && (\n          <div style={{ height: 40, paddingTop: 8 }}>{bottomBar}</div>\n        )}\n      </div>\n      <div style={styles.resizableContainer} onMouseDown={onEventMouseDown} />\n      <div\n        style={{\n          ...(leftPanelRef.current && {\n            height: windowHeight - OTHER_ELEM_SIZE,\n          }),\n          ...(rightViewStyle && rightViewStyle),\n          ...innerStyles.rightPanel,\n        }}\n      >\n        <div>\n          {!showError && rightView}\n          {showError && (\n            <>\n              <h2 style={{ color: \"white\" }}>SCHEMA ERROR</h2>\n              <span style={{ color: \"white\", fontSize: 20 }}>\n                {validateSchema?.message}\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nPanelView.propTypes = {\n  currentView: PropTypes.oneOf([MENU_FORM.form, MENU_FORM.setting]).isRequired,\n  menu: PropTypes.any,\n  bottomBar: PropTypes.any,\n  leftView: PropTypes.any.isRequired,\n  rightView: PropTypes.any.isRequired,\n  rightViewStyle: PropTypes.object,\n  validateSchema: PropTypes.object.isRequired,\n};\n\nPanelView.defaultProps = {\n  rightViewStyle: null,\n  menu: null,\n};\n\nexport default PanelView;\n","import { useLayoutEffect, useState } from \"react\";\n\nexport const useWindowSize = () => {\n  const [size, setSize] = useState([0, 0]);\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerHeight, window.innerWidth]);\n    }\n    window.addEventListener(\"resize\", updateSize);\n    updateSize();\n    return () => window.removeEventListener(\"resize\", updateSize);\n  }, []);\n  return size;\n};\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Typography, Button } from \"antd\";\nimport _ from \"lodash\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport MenuView from \"./views/menu\";\nimport MenuFormView from \"./views/menu-form\";\nimport RightPanelView from \"./right-panel-views\";\nimport LeftPanelView from \"./left-panel-views\";\nimport PanelContainerView from \"./views/panel\";\nimport { MENU, MENU_FORM } from \"./constants\";\nimport {\n  getInitRowField,\n  getInitRowQuerySchema,\n  getSingleRow,\n} from \"./left-panel-views/data-field\";\n\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\n\nconst DELAY_TIMER = 500;\n\nconst EditorScreen = () => {\n  const [currentMenuState, setCurrentMenuState] = useState({\n    current: MENU.ui,\n  });\n  const [currentMenuFormState, setCurrentMenuFormState] = useState({\n    current: MENU_FORM.form,\n  });\n  const [formState, setFormState] = useState(() => getInitRowField());\n  const [settingState, setSettingState] = useState(() => ({\n    title: \"Table Header\",\n    canCreate: true,\n    canUpdate: true,\n    canDelete: true,\n    querySchema: {\n      query: false,\n      schema: [...getInitRowQuerySchema()],\n    },\n    steps: [],\n  }));\n  const [tableSettingProps, setTableSettingProps] = useState();\n  const [schemaProps, setSchemaProps] = useState();\n  const [schemaValidateState, setSchemaValidateState] = useState({\n    isValidate: true,\n    message: \"\",\n  });\n\n  useEffect(() => {\n    if (_.get(settingState, \"title\")) {\n      debounceTableTrans();\n    }\n  }, [settingState]);\n\n  useEffect(() => {\n    if (_.get(formState, \"[0]\")) {\n      debounceSchemaTrans();\n    }\n  }, [formState]);\n\n  const onSettingChange = () => {\n    const setting = logic.cleanTableSettingBeforeTrans(settingState);\n    setTableSettingProps(setting);\n  };\n\n  const onFormSchemaChange = () => {\n    const schema = logic.cleanFormBeforeTrans(formState, settingState?.steps);\n    setSchemaProps(schema);\n    const [isValidate, message] = logic.validateSchema(schema);\n    setSchemaValidateState({ isValidate, message });\n  };\n\n  const onAddField = () => {\n    if (!Array.isArray(formState)) {\n      return;\n    }\n    const newForm = [...formState];\n    newForm.push({ ...getSingleRow(settingState?.steps) });\n    setFormState(newForm);\n  };\n\n  const debounceTableTrans = _.debounce(onSettingChange, DELAY_TIMER);\n  const debounceSchemaTrans = _.debounce(onFormSchemaChange, DELAY_TIMER);\n\n  const onEventResetForm = () => {\n    setSettingState({\n      title: \"Table Header\",\n      canCreate: true,\n      canUpdate: true,\n      canDelete: true,\n      querySchema: {\n        query: false,\n        schema: [...getInitRowQuerySchema()],\n      },\n      steps: [],\n    });\n    setFormState(() => getInitRowField());\n  };\n\n  return (\n    <div style={styles.LayoutContainer}>\n      <Row>\n        <Col flex=\"10\">\n          <Typography.Title level={3} style={styles.brandingText}>\n            Joi-auto-admin Generator\n          </Typography.Title>\n          <iframe\n            src=\"https://ghbtns.com/github-btn.html?user=heartnetkung&repo=joi-auto-admin&type=star&count=true\"\n            frameBorder=\"0\"\n            scrolling=\"0\"\n            width=\"90\"\n            height=\"20\"\n            title=\"GitHub\"\n            style={styles.githubStar}\n          />\n          <Typography.Text style={styles.githubText}>\n            Please star my project if you like it. :D\n          </Typography.Text>\n        </Col>\n        <Col flex=\"1\">\n          <MenuView\n            currentMenu={currentMenuState}\n            setCurrentMenu={setCurrentMenuState}\n          />\n        </Col>\n      </Row>\n      <PanelContainerView\n        validateSchema={schemaValidateState}\n        currentView={currentMenuFormState.current}\n        menu={\n          <MenuFormView\n            currentMenu={currentMenuFormState}\n            setCurrentMenu={setCurrentMenuFormState}\n            onClearForm={onEventResetForm}\n          />\n        }\n        bottomBar={\n          <Button\n            block\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            onClick={onAddField}\n          >\n            Add Field\n          </Button>\n        }\n        leftView={\n          <>\n            <LeftPanelView\n              view={currentMenuFormState.current}\n              formState={formState}\n              setFormState={setFormState}\n              settingState={settingState}\n              setSettingState={setSettingState}\n            />\n          </>\n        }\n        rightView={\n          <RightPanelView\n            view={currentMenuState.current}\n            settings={tableSettingProps}\n            editors={schemaProps || formState}\n          />\n        }\n        rightViewStyle={\n          currentMenuState.current === MENU.ui\n            ? styles.rightPanelContainer2\n            : styles.rightPanelContainer\n        }\n      />\n    </div>\n  );\n};\n\nEditorScreen.propTypes = {};\n\nexport default EditorScreen;\n","import React from \"react\";\nimport EditorScreen from \"./screens/editor-tool\";\n\nconst RenderScreen = () => {\n  return <EditorScreen />;\n};\n\nRenderScreen.propTypes = {};\n\nexport default RenderScreen;\n","import ReactDOM from \"react-dom\";\nimport \"antd/dist/antd.css\";\nimport \"./lib/index.css\";\n// import App from \"./App3\";\n// import App from \"./App4_2\";\n// import App from \"./App5\";\n// import App from \"./App6\";\n// import App from \"./App7\";\n// import App from \"./App8\";\n// import App from \"./App4\";\n// import App from \"./App9\";\n// import App from \"./App20\";\n// import App from \"./App21\";\n// import App from \"./App10\";\nimport React from \"react\";\nimport App from \"./editor\";\n\n// strict mode disabled because antd doesn't support it\n// https://github.com/ant-design/ant-design/issues/22493\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}