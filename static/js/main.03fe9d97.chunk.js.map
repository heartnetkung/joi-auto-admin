{"version":3,"sources":["editor/screens/editor-tool/constants.js","editor/screens/editor-tool/views/menu.js","editor/screens/editor-tool/views/styles.js","editor/screens/editor-tool/views/menu-form.js","editor/screens/editor-tool/right-panel-views/code-blocks.js","lib/table/row_menu.js","lib/table/table_menu.js","lib/table/logic.js","lib/shared/file_upload.js","lib/table/other_menu.js","lib/shared/hook.js","lib/table/index.js","lib/controller/util.js","lib/formik/logic.js","lib/formik/submit_line.js","lib/formik/components/cascader.js","lib/formik/components/barcode.js","lib/formik/components/file_upload.js","lib/formik/field.js","lib/formik/inner-form.js","lib/formik/form.js","lib/controller/header.js","lib/controller/edit_modal.js","lib/joi/error_message.js","lib/joi/prepare_joi.js","lib/assets/fallback_image.js","lib/formik/components/col_image.js","lib/joi/joi_wrapper.js","lib/shared/xlsx.js","lib/joi/serialize.js","lib/controller/excel_error_modal.js","lib/controller/index.js","lib/controller/open_form_modal.js","editor/logic/util.js","editor/logic/advanced_component.js","editor/logic/joi_line.js","editor/logic/chance.js","editor/logic/template.js","editor/logic/index.js","editor/screens/editor-tool/right-panel-views/index.js","editor/screens/editor-tool/left-panel-views/data-field.js","editor/screens/editor-tool/left-panel-views/styles.js","editor/screens/editor-tool/left-panel-views/logic.js","editor/screens/editor-tool/left-panel-views/setting.js","editor/screens/editor-tool/left-panel-views/form-fields.js","editor/screens/editor-tool/left-panel-views/index.js","editor/screens/editor-tool/styles.js","editor/screens/editor-tool/views/panel.js","editor/screens/editor-tool/views/hooks.js","editor/screens/editor-tool/logic.js","editor/screens/editor-tool/index.js","editor/index.js","index.js"],"names":["MENU","MENU_FORM","SETTINGS","MenuView","props","currentMenu","setCurrentMenu","onClick","e","current","key","selectedKeys","mode","style","float","flexDirection","minWidth","marginRight","Item","rowMenu","display","marginBottom","button","rightPanel","flex","borderRadius","padding","overflow","position","MenuFormView","onClearForm","onEventClick","type","styles","ghost","block","danger","RenderCodeBlocks","text","useState","language","theme","dracula","RowMenu","buttons","record","updateDataAtRow","map","action","index","NOOP","label","defaultProps","TableMenu","deleteButtonLabel","createButtonLabel","selectedRows","onCreate","onDelete","setSelectedRows","otherMenu","onDelete2","useCallback","a","textAlign","margin","length","icon","DeleteOutlined","PlusOutlined","overlay","placement","sorter","b","dataIndex","this","_","get","onFilter","value","render","addFilter","data","column","filters","chain","join","identity","uniq","sortBy","ans","disableSorting","bind","disableFilter","FileUploader","handleFile","children","accept","props2","omit","hiddenFileInput","useRef","event","click","ref","onChange","target","files","OtherMenu","onDownloadExcel","onUploadExcel","onExampleExcel","downloadExcelLabel","uploadExcelLabel","exampleExcelLabel","DownloadOutlined","UploadOutlined","EyeOutlined","useAPI","func","loadingInit","manualComplete","loading","apiState","setApiState","setData","apply","useModal","visible","setVisible","onClose","usePersistFn","fn","fnRef","persistFn","args","useMaxWidth","width","window","innerWidth","isMatch","setMatch","listener","matches","useEffect","mediaQuery","matchMedia","addListener","removeListener","TableComp","schema","rowButtons","onEdit","paginationSize","tableScroll","columns","useMemo","filter","cellHide","rowButtons2","unshift","EditOutlined","push","title","rowSelection","selectedRowKeys","smallScreen","tableScroll2","x","y","tableStyle","undefined","Math","min","opacity","dataSource","pagination","defaultPageSize","scroll","rowKey","alert","content","Modal","success","error","message","appendId","_id","nanoid","inputValue","path","some","option","_labelField","toLowerCase","indexOf","lookupOptionsEnum","cascader","isSmall","allTargets","options","c","l","fieldNames","onSubmitHook","thirdNames","compLabels","name","forthNames","thirdValue","set","split","className","dropdownRender","Menu","touchAll","context","validateForm","errors","Object","keys","setTouched","setNestedObjectValues","SubmitLine","steps","currentStep","prevStep","nextStep","submitButtonLabel","resetButtonLabel","useFormikContext","touch","executed","submitStyle","next","submitCount","isValid","isSubmitting","setTimeout","touchFirstSubmit","marginTop","disabled","CASCADER_OMIT","MyCascader","asyncLoad","showSearch","options2","setOptions","loadData","selected","lastRow","placeholder","OMIT_FIELDS","Text","Typography","Barcode","loadBarcodeName","barcodes","setBarcodes","setInputValue","onKeyDown","random","preventDefault","remove","i","helpers","validator","BarcodeLine","loadItemName","memo","itemName","setItemName","then","catch","span","size","CloseOutlined","shape","marginLeft","FileUpload","multiple","dataType","uploadFileType","uploadFile","uploadFileInit","fileListState","setFileListState","values","setFieldValue","abortRef","AbortController","Array","isArray","urlToFileList","abort","onUpload","onSuccess","onError","file","uploadURL","signal","aborted","status","uri","url","URL","createObjectURL","console","onChangeFile","info","newFileList","fileList","slice","response","listFile","renderHelper","listType","customRequest","noop","encodeURIComponent","pop","WeekPicker","DatePicker","RangePicker","MonthPicker","Field","fieldType","required","validate","meta","labelCol","wrapperCol","colSpan","offset","containerStyle","onFieldRender","defaultValue","moment","Password","TextArea","valid","entries","k","v","Option","InnerForm","formSpec","inline","isInline","isPreviousLeft","ii","twoColumn","hasNext","calculateSpan","spec","fieldHide","step","Step","Steps","CombinedForm","onSubmit","initialValues","allCascader","allSpecs","keyBy","allTargetsHolder","newCascader","targets","flatten","cascaderHook","result","handleCascader","onSubmitHooks","concat","onSubmit2","postData","actions","cloneDeep","hook","names","pick","test","setStep","useSteps","toDefaultValues","colon","gutter","justify","Title","Paragraph","Header","description","small","headerContainerStyle","titleStyle","descriptionStyle","name2","title2","level","EditModal","isEdit","createHeader","editHeader","initialValue","centered","footer","onCancel","maskClosable","showIcon","errorTranslation","errorObj","limit","getErrorMessage","replace","found","prepare","joiObj","describeObj","devMode","paths","traverse","node","flags","presence","fork","allow","fixEmptyString","optional","handleDevMode","metas","handleFieldHide","append","Joi","any","IMAGE_FALLBACK","ColImage","src","fallback","PreviewGroup","item","toString","OMIT_META","JoiWrapper","isSchema","Error","describe","handleCellShow","defaultValues","JoiField","hasCellShow","cellShow","field","getMeta","guessFieldType","_extractedSchema","getExtractedSchema","default","getColumn","extract","pattern","email","scheme","$this","ellipsis","cellEllipsis","cellFormat","cellWidth","m","p1","p2","p3","wordWrap","wordBreak","maxWidth","numeral","format","Date","only","validLabel","getUploadUrl","firebaseConfig","rawError","details","tableToExcel","dataArray","fileName","forEach","handleNested","worksheet","utils","json_to_sheet","dateNF","workbook","book_new","book_append_sheet","writeFile","parseExcelDate","date","SSF","parse_date_code","momentInput","M","d","h","H","s","S","parseZone","toDate","excelToTable","fileObject","Promise","res","rej","reader","FileReader","onload","read","firstSheet","Sheets","SheetNames","sheet_to_json","parse","onerror","readAsBinaryString","obj","isObject","prototype","call","SerializeError","captureStackTrace","constructor","deserializeTable","table","deserializeRow","mapError","line","excelRow","columnCache","attempt","abortEarly","serializeTable","showDisabled","rowData","newRow","COLUMNS","ExcelErrorModal","ExclamationCircleFilled","color","INITIAL_FORM_STATUS","Controller","getMany","createMany","updateOne","deleteMany","uploadPreviewUrl","querySchema","disableExcelDownload","disableExcelUpload","editModalData","setEditModalData","excelError","setExcelError","getManyStatus","doGetMany","deleteStatus","doDelete","editModalControl","excelModalControl","schema2","querySchema2","tableData","originalData","unset","returnData","setSubmitting","selectedSet","Set","has","onQuery","query","open","focus","rawExcel","newRows","newData","getOne","FormModal","setError","raw","isObj","regex","showRaw","softEval","Function","str","ReactiveComponent","values2","JSON","stringify","makeJoiLine","editor","settings","newFieldType","suffix","require","extraMargin","assign","columnWidth","joiList","joi","makeObject","toSource","makeString","chance","randomData","editors","count","seed","Chance","getChance","newValue","editorToChance","newRandom","protocol","max","wait","ms","renderJoi","isComp","renderProps","canCreate","canUpdate","canDelete","extras","renderTemplate","add","renderImport","renderFunction","objSpec","genChanceString","isJson","prettier","parser","plugins","parserBabel","editorSchemaInner","object","string","_fieldType","number","boolean","columnHide","editorSchema1","array","items","strip","unique","editorSchema2","makeJoiObj","App","RightPanelView","view","codeText","generateId","floor","getInitRowField","rowField","id","getSingleRow","stepOptions","row","lodash","getInitRowQuerySchema","rowQuerySchema","getSingleRowQuerySchema","disabledSorting","disabledDefaultList","placeholderDefault","checkbox","fieldOptions","columnOptions","fieldTree","queryFieldTree","Wrapper1","Wrapper2","layoutMargin","input","VerticalSpacer","rowInput","checkIsDisabledDefault","findIndex","createOptions","RenderSetting","settingState","setSettingState","logic","optionsStep","cloneState","onChangeField","newSettings","onChangeSteps","state","numberOfStep","onChangeFieldQuerySchema","checked","onChangeCheckbox","st","si","paddingTop","onChangeInputSteps","onChangCheckboxQuery","defaultActiveKey","accordion","qs","qi","Panel","header","extra","splice","onDeleteQuerySchema","stopPropagation","ft","fi","FormFields","formState","setFormState","dataFieldOptions","dataColumnOptions","onSetDefaultStep","newForm","rowForm","find","hasOwnProperty","onChangeConfig","newOptionConfig","dataOptions","defaultConfig","keyDiffOptions","difference","onDeleteField","allowClear","isNil","Group","LeftPanelView","otherProps","panelColor","LayoutContainer","height","panelContainer","justifyContent","resizableContainer","cursor","leftPanelContainer","backgroundColor","border","rightPanelContainer","rightPanelContainer2","MIN_WIDTH","PanelView","leftView","rightView","rightViewStyle","menu","bottomBar","currentView","validateSchema","splitPanelRef","leftPanelRef","isDragging","setIsDragging","separatorXPosition","setSeparatorXPosition","leftPanelWidth","setLeftPanelWidth","setSize","useLayoutEffect","updateSize","innerHeight","addEventListener","removeEventListener","useWindowSize","windowHeight","showError","setShowError","document","onMouseMove","onTouchMove","onMouseUp","isValidate","onMove","clientX","touches","newLeftWidth","splitPaneWidth","clientWidth","alignItems","CheckCircleTwoTone","twoToneColor","fontSize","CloseCircleTwoTone","paddingLeft","maxHeight","defaultSize","OTHER_ELEM_SIZE","onMouseDown","innerStyles","OMIT_SETTING","cleanFormBeforeTrans","settingSteps","stepValue","findStep","colWidth","parseInt","cleanColWidth","cleanDefault","EditorScreen","currentMenuState","setCurrentMenuState","currentMenuFormState","setCurrentMenuFormState","tableSettingProps","setTableSettingProps","schemaProps","setSchemaProps","schemaValidateState","setSchemaValidateState","debounceTableTrans","debounceSchemaTrans","debounce","setting","newSetting","omitSetting","left","top","RenderScreen","ReactDOM","getElementById"],"mappings":"mWAAaA,EACP,KADOA,EAEL,OAGKC,EACL,SADKA,EAEF,iBAGEC,EAAW,CACtB,YACA,YACA,YACA,uBACA,sBCeaC,EAzBE,SAACC,GAAW,IACnBC,EAAgCD,EAAhCC,YAAaC,EAAmBF,EAAnBE,eAMrB,OACE,kBAAC,IAAD,CACEC,QANiB,SAACC,GACpBF,EAAe,CAAEG,QAASD,EAAEE,OAM1BC,aAAc,CAACN,EAAYI,SAC3BG,KAAK,aACLC,MAAO,CAAEC,MAAO,QAASC,cAAe,cAAeC,SAAU,IAAKC,YAAa,IAEnF,kBAAC,IAAKC,KAAN,CAAWR,IAAKV,GAAYA,GAC5B,kBAAC,IAAKkB,KAAN,CAAWR,IAAKV,GAAUA,KCpBnBmB,EAAU,CACrBC,QAAS,OACTC,aAAc,QAGHC,EAAS,CACpBL,YAAa,QAGFM,EAAa,CACxBC,KAAM,EACNC,aAAc,EACdR,YAAa,EACbI,aAAc,EACdK,QAAS,YACTC,SAAU,OACVC,SAAU,YC6BGC,EAvCM,SAACzB,GAAW,IACvBC,EAA6CD,EAA7CC,YAAaC,EAAgCF,EAAhCE,eAAgBwB,EAAgB1B,EAAhB0B,YAE/BC,EAAe,SAACC,GACpB1B,EAAe,CAAEG,QAASuB,KAG5B,OACE,yBAAKnB,MAAOoB,GACV,kBAAC,IAAD,CACED,KAAK,UACLE,OAAkB,OAAX7B,QAAW,IAAXA,OAAA,EAAAA,EAAaI,WAAYR,EAChCkC,OAAK,EACL5B,QAAS,kBAAMwB,EAAa9B,KAE3BA,GAEH,kBAAC,IAAD,CACE+B,KAAK,UACLE,OAAkB,OAAX7B,QAAW,IAAXA,OAAA,EAAAA,EAAaI,WAAYR,EAChCkC,OAAK,EACLtB,MAAOoB,EACP1B,QAAS,kBAAMwB,EAAa9B,KAE3BA,GAEH,kBAAC,IAAD,CAAQ+B,KAAK,SAASI,QAAM,EAAC7B,QAASuB,GAAtC,W,SCdSO,EAdU,SAACjC,GAAW,IAC3BkC,EAASlC,EAATkC,KAD0B,EAEfC,mBAAS,OAArBC,EAF2B,oBAGlC,OAAKpC,EAIE,kBAAC,IAAD,CAAWkC,KAAMA,EAAME,SAAUA,EAAUC,MAAOC,MAHhD,M,6ECJLC,EAAU,SAACvC,GAAW,IACnBwC,EAAqCxC,EAArCwC,QAASC,EAA4BzC,EAA5ByC,OAAQC,EAAoB1C,EAApB0C,gBAEzB,OACC,kBAAC,IAAD,KACEF,EAAQG,KAAI,SAACC,EAAQC,GACrB,OACC,kBAAC,IAAD,iBACKD,EADL,CAECtC,IAAKuC,EACL1C,QACCyC,EAAOzC,QACJ,kBAAMyC,EAAOzC,QAAQsC,EAAQC,IAC7BI,IAGHF,EAAOG,YAcdR,EAAQS,aAAe,CACtBN,gBAAiB,MAGlB,IAAMI,EAAO,aAEEP,I,kBClCTU,EAAY,SAACjD,GAAW,IACrBkD,EAAuDlD,EAAvDkD,kBAAmBC,EAAoCnD,EAApCmD,kBAAmBC,EAAiBpD,EAAjBoD,aACtCC,EAAmDrD,EAAnDqD,SAAUC,EAAyCtD,EAAzCsD,SAAUC,EAA+BvD,EAA/BuD,gBAAiBC,EAAcxD,EAAdwD,UAEvCC,EAAYC,sBAAW,sBAAC,sBAAAC,EAAA,sEACvBL,EAASF,GADc,OAE7BG,EAAgB,IAFa,2CAG3B,CAACH,EAAcE,EAAUC,IAE5B,OACC,yBAAK9C,MAAO,CAAEmD,UAAW,QAASC,OAAQ,KACzC,kBAAC,IAAD,OACIT,EAAaU,QAAUR,GACzB,kBAAC,IAAD,CACC1B,KAAK,SACLzB,QAASsD,EACTM,KAAM,kBAACC,EAAA,EAAD,OAELd,IAGDE,EAAaU,QAAUT,GACxB,kBAAC,IAAD,CACCzB,KAAK,UACLzB,QAASkD,EACTU,KAAM,kBAACE,EAAA,EAAD,OAELd,GAGFK,GACA,kBAAC,IAAD,CAAUU,QAASV,EAAWW,UAAU,eACvC,kBAAC,IAAD,mEAiBNlB,EAAUD,aAAe,CACxBG,kBAAmB,iCACnBD,kBAAmB,eACnBG,SAAU,KACVC,SAAU,KACVE,UAAW,MAGGP,QC7DTmB,EAAS,SAAUT,EAAGU,GAAI,IACxBC,EAAcC,KAAdD,UACN,OAAOE,IAAEC,IAAId,EAAGW,GAAaE,IAAEC,IAAIJ,EAAGC,IAAc,EAAI,GAGpDI,EAAW,SAAUC,EAAOlC,GAAS,IACnC6B,EAAsBC,KAAtBD,UAAWM,EAAWL,KAAXK,OACjB,OAAIA,EAAeA,EAAOnC,EAAO6B,MAAgBK,EAC1ClC,EAAO6B,KAAeK,GAGlBE,EAAY,SAACC,GACxB,OAAO,SAACC,GACN,IAAIC,EAAUR,IAAES,MAAMH,GACnBnC,IAAIoC,EAAOT,UAAUY,KAAK,MAC1BvC,IAAIoC,EAAOH,QAAUJ,IAAEW,UACvBC,OACAC,SACA1C,KAAI,SAACgB,GAAD,MAAQ,CAAEzB,KAAMyB,EAAGgB,MAAOhB,MAC9BgB,QACCW,EAAG,eAAQP,GAMf,OALKA,EAAOQ,iBAAgBD,EAAIlB,OAASA,EAAOoB,KAAKF,IACjDN,EAAQlB,OAAS,IAAMkB,EAAQlB,SAAWiB,EAAOU,gBACnDH,EAAIZ,SAAWA,EAASc,KAAKF,GAC7BA,EAAIN,QAAUA,GAETM,I,2BCUII,EAhCM,SAAC1F,GAAW,IACxB2F,EAAiC3F,EAAjC2F,WAAYC,EAAqB5F,EAArB4F,SAAUC,EAAW7F,EAAX6F,OAExBC,EAAStB,IAAEuB,KAAK/F,EAAO,CAAC,aAAc,aACtCgG,EAAkBC,iBAAO,MAI/B,OACC,oCACC,kBAAC,IAAD,iBAAYH,EAAZ,CAAoB3F,QALF,SAAC+F,GAAD,OAAWF,EAAgB3F,QAAQ8F,WAMnDP,GAEF,2BACCC,OAAQA,EACRjE,KAAK,OACLwE,IAAKJ,EACLK,SAXkB,SAACH,GAAD,OAAWP,EAAWO,EAAMI,OAAOC,MAAM,KAY3D9F,MAAO,CAAEO,QAAS,YCdhBwF,EAAY,SAACxG,GAAW,IACrByG,EAAmDzG,EAAnDyG,gBAAiBC,EAAkC1G,EAAlC0G,cAAeC,EAAmB3G,EAAnB2G,eAChCC,EAA4D5G,EAA5D4G,mBAAoBC,EAAwC7G,EAAxC6G,iBAAkBC,EAAsB9G,EAAtB8G,kBAE9C,OACC,kBAAC,IAAD,KACEL,GACA,kBAAC,IAAK3F,KAAN,CAAWR,IAAI,KACd,kBAAC,IAAD,CACCsB,KAAK,OACLzB,QAASsG,EACT1C,KAAM,kBAACgD,EAAA,EAAD,MACNhF,OAAK,EACLtB,MAAO,CAAEmD,UAAW,SAEnBgD,IAIHF,GACA,kBAAC,IAAK5F,KAAN,CAAWR,IAAI,KACd,kBAAC,EAAD,CACCsB,KAAK,OACL+D,WAAYe,EACZ3C,KAAM,kBAACiD,EAAA,EAAD,MACNnB,OAAO,QACP9D,OAAK,EACLtB,MAAO,CAAEmD,UAAW,SAEnBiD,IAIHF,GACA,kBAAC,IAAK7F,KAAN,CAAWR,IAAI,KACd,kBAAC,IAAD,CACCsB,KAAK,OACLzB,QAASwG,EACT5C,KAAM,kBAACkD,EAAA,EAAD,MACNlF,OAAK,EACLtB,MAAO,CAAEmD,UAAW,SAEnBkD,MAePN,EAAUxD,aAAe,CACxByD,gBAAiB,KACjBC,cAAe,KACfC,eAAgB,KAChBC,mBAAoB,+DACpBC,iBAAkB,mDAClBC,kBAAmB,qGAGLN,SC1EFU,GAAS,SAACC,EAAMC,EAAaC,GAAoB,IAAD,EAC5BlF,mBAAS,CACxCmF,UAAWF,EACXtC,KAAM,OAHqD,mBACrDyC,EADqD,KAC3CC,EAD2C,KAKtDC,EAAU,SAAC3C,GAAD,OAAU0C,EAAY,CAAEF,SAAS,EAAOxC,UAcxD,MAAO,CAACyC,EAZG,uCAAG,WAAgB5D,EAAGU,GAAnB,2BAAAV,EAAA,6DACb6D,GAAY,SAAC7D,GAAD,MAAQ,CAAE2D,SAAS,EAAMxC,KAAMnB,EAAEmB,SADhC,kBAGKqC,EAAKO,MAAM,KAAX,GAHL,cAGR5C,EAHQ,OAIPuC,GAAgBI,EAAQ3C,GAJjB,kBAKLA,GALK,sCAOZ0C,GAAY,SAAC7D,GAAD,MAAQ,CAAE2D,SAAS,EAAOxC,KAAM,SAPhC,8DAAH,wDAYc2C,IAGbE,GAAW,WAAO,IAAD,EACCxF,oBAAS,GADV,mBACtByF,EADsB,KACbC,EADa,KAG7B,MAAO,CAAED,UAASE,QADF,kBAAMD,GAAW,IACNA,eAGfE,GAAe,SAACC,GAC5B,IAAMC,EAAQhC,iBAAO+B,GACrBC,EAAM5H,QAAU2H,EAEhB,IAAME,EAAYjC,mBAMlB,OALKiC,EAAU7H,UACd6H,EAAU7H,QAAU,WAAoB,IAAD,uBAAN8H,EAAM,yBAANA,EAAM,gBACtC,OAAOF,EAAM5H,QAAQqH,MAAMnD,KAAM4D,KAG5BD,EAAU7H,SAGL+H,GAAc,SAACC,GAAW,IAAD,EACTlG,mBAASmG,OAAOC,YAAcF,GADrB,mBAC9BG,EAD8B,KACrBC,EADqB,KAE/BC,EAAW,SAAC/E,GAAD,OAAO8E,EAAS9E,EAAEgF,UAOnC,OALAC,qBAAU,WACT,IAAIC,EAAaP,OAAOQ,WAAP,sBAAiCT,EAAjC,QAEjB,OADAQ,EAAWE,YAAYL,GAChB,kBAAMG,EAAWG,eAAeN,MACrC,IACIF,GCzCFS,GAAY,SAACjJ,GAAW,IACpB8E,EAAqD9E,EAArD8E,KAAMoE,EAA+ClJ,EAA/CkJ,OAAQC,EAAuCnJ,EAAvCmJ,WAAYC,EAA2BpJ,EAA3BoJ,OAAQC,EAAmBrJ,EAAnBqJ,eAClC/F,EAAqDtD,EAArDsD,SAAUD,EAA2CrD,EAA3CqD,SAAUiG,EAAiCtJ,EAAjCsJ,YAAa5G,EAAoB1C,EAApB0C,gBACjC4E,EAA4DtH,EAA5DsH,QAASb,EAAmDzG,EAAnDyG,gBAAiBC,EAAkC1G,EAAlC0G,cAAeC,EAAmB3G,EAAnB2G,eAHtB,EAKaxE,mBAAS,IALtB,mBAKpBiB,EALoB,KAKNG,EALM,KAOrBgG,EAAUC,mBAAQ,WACtB,IAAIlE,EAAM4D,EAAOK,QACd5G,IAAIkC,EAAUC,IACd2E,QAAO,SAAC1E,GAAD,OAAaA,EAAO2E,YAE1BC,EAAW,YAAOR,GAItB,GAHIC,GACFO,EAAYC,QAAQ,CAAE7F,KAAM,kBAAC8F,EAAA,EAAD,MAAkB1J,QAASiJ,IAErDO,EAAY7F,OAAQ,CACtB,IAOMuE,EAAQ,GAAKsB,EAAY7F,OAAS,GACxCwB,EAAIwE,KAAK,CAAEC,MAAO,2BAAQ1B,QAAOzD,OARlB,SAAC1C,EAAMO,GAAP,OACb,kBAAC,EAAD,CACED,QAASmH,EACTlH,OAAQA,EACRC,gBAAiBA,OAOvB,OAAO4C,IACN,CAAC4D,EAAQpE,EAAMqE,EAAYC,EAAQ1G,IAEhCsH,IAAiB1G,GAAY,CACjC2G,gBAAiB7G,EACjBiD,SAAU9C,GAGN2G,EAAc9B,GAAY,KAC1B+B,EAAeD,EAAc,CAAEE,GAAG,EAAMC,GAAG,GAASf,EACpDgB,EAAaJ,OACfK,EACA,CAAE3J,SAAU4J,KAAKC,IAAqB,IAAjBlB,EAAQzF,OAAc,MAE/C,OACE,oCACE,yBAAKrD,MAAO,CAAEiK,QAASpD,EAAU,GAAM,IACrC,kBAAC,EAAD,CACElE,aAAcA,EACdG,gBAAiBA,EACjBD,SAAUA,EACVD,SAAUA,EACVG,UACGiD,GAAoBC,GAAkBC,EACrC,kBAAC,GAAD,CACEF,gBAAiBA,EACjBC,cAAeA,EACfC,eAAgBA,IAJoC,QAU9D,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEW,QAASA,EACTiC,QAASA,EACToB,WAAY7F,EACZ8F,WAAY,CAAEC,gBAAiBxB,GAC/ByB,OAAQX,EACRH,aAAcA,EACde,OAAO,MACPtK,MAAO6J,OAsBjBrB,GAAUjG,aAAe,CACvBmG,WAAY,GACZ7F,SAAU,KACVD,SAAU,KACV+F,OAAQ,KACRC,eAAgB,GAChBC,YAAa,CAAEe,EAAG,IAAKD,GAAG,GAC1B9C,SAAS,EACTb,gBAAiB,KACjBC,cAAe,KACfC,eAAgB,KAChBjE,gBAAiB,MAGJuG,U,oBClHF+B,GACH,SAACC,GAAD,OAAaC,KAAMC,QAAQ,CAAEF,aAD1BD,GAEL,SAAC5K,GAAD,OAAO8K,KAAME,MAAM,CAAEH,QAAS7K,EAAEiL,SAAWjL,EAAI,MAG1CkL,GAAW,SAAC3H,GACxB,YAAc4G,IAAV5G,EAAE4H,IAA0B,2BAAK5H,GAAZ,IAAe4H,IAAKC,iBACtC7H,G,2DCoCF8F,GAAS,SAAUgC,EAAYC,GAAO,IAAD,OAC1C,OAAOA,EAAKC,MACX,SAACC,GAAD,OACCA,EAAO,EAAKC,aACVC,cACAC,QAAQN,EAAWK,gBAAkB,MAIpCE,GAAoB,SAACC,EAAUC,EAASC,GAAgB,IAAD,YAC5D,GAAkD,wEAAtC,OAARF,QAAQ,IAARA,GAAA,UAAAA,EAAUG,eAAV,mBAAoB,UAApB,mBAAwBC,SAAxB,mBAA4B,UAA5B,mBAAgCA,SAAhC,mBAAoC,UAApC,eAAwCC,GAA0B,CACrE,IAAIhH,EAAG,2BACH2G,GADG,IAENM,WAAY,CAAExJ,MAAO,IAAK4B,MAAO,IAAKiB,SAAU,KAChD4G,aAAc,SAAC7I,GACd,IAAI8I,EAAaN,EAAWxH,MAAMsH,EAASS,WAAW,IAAIC,KACtDC,EAAaT,EAAWxH,MAAMsH,EAASS,WAAW,IAAIC,KACtDE,EAAarI,IAAEC,IAAId,EAAG8I,GAC1B,IAAKI,EAAY,OAAOlJ,EAExB,IAAI2B,EAAG,eAAQ3B,GAGf,OAFAa,IAAEsI,IAAIxH,EAAKmH,EAAYI,EAAWE,MAAM,KAAK,IAC7CvI,IAAEsI,IAAIxH,EAAKsH,EAAYC,EAAWE,MAAM,KAAK,IACtCzH,KAST,OANI4G,IACH5G,EAAI0H,UAAY,YAChB1H,EAAI2H,eAAiB,SAACC,GAAD,OACpB,yBAAKF,UAAU,aAAaE,KAGvB5H,EAER,OAAO2G,GAiEKkB,GAAQ,uCAAG,WAAOC,GAAP,eAAAzJ,EAAA,sEACFyJ,EAAQC,eADN,UACjBC,EADiB,OAEY,IAA/BC,OAAOC,KAAKF,GAAQxJ,OAFD,0CAEsB,GAFtB,OAGlBsJ,EAAQK,WAAWC,aAAsBJ,GAAQ,IAH/B,2CAAH,sD,UCzIfK,GAAa,SAAC3N,GAAW,IACtB4N,EAA2C5N,EAA3C4N,MAAOC,EAAoC7N,EAApC6N,YAAaC,EAAuB9N,EAAvB8N,SAAUC,EAAa/N,EAAb+N,SAC9BC,EAAwChO,EAAxCgO,kBAAmBC,EAAqBjO,EAArBiO,iBAErBb,EAAUc,eACVC,EAAQlI,iBAAO,CAAEmI,UAAU,IAC3BC,EACLT,EAAM9J,OAAS,GAAK+J,OAActD,EAAY,CAAEvJ,QAAS,QAEpDsN,EAAI,uCAAG,sBAAA3K,EAAA,sEACUwJ,GAASC,GADnB,eAECW,IAFD,2CAAH,qDAOV,OD+H+B,SAACX,EAAShH,GAAS,IAC1CgI,EAAahI,EAAI/F,QAAjB+N,SACHhB,EAAQmB,cAAeH,IACxBhB,EAAQoB,SAAWpB,EAAQqB,eAE/BrI,EAAI/F,QAAQ+N,UAAW,EACvBM,YAAW,kBACVtB,EAAQK,WAAWC,aAAsBN,EAAQE,QAAQ,SCxI1DqB,CAAiBvB,EAASe,GAGzB,4BAAQ1N,MAAOmN,EAAM9J,OAAS,CAAE8K,UAAW,IAAO,MACjD,kBAAC,IAAD,KACEhB,EAAM9J,QAAU+J,EAChB,kBAAC,IAAD,CAAQ1N,QAAS2N,GAAjB,oDACG,KACHF,EAAM9J,QAAU8J,EAAM9J,OAAS,EAAI+J,EACnC,kBAAC,IAAD,CAAQjM,KAAK,UAAUzB,QAASmO,GAAhC,kCAGG,KACFV,EAAM9J,OAEJ,KADH,kBAAC,KAAD,KAAcmK,GAEf,kBAAC,KAAD,CACCrM,KAAK,UACLnB,MAAO4N,EACPQ,UAAU,GAETb,MAgBNL,GAAW3K,aAAe,CACzBiL,iBAAkB,6CAClBD,kBAAmB,wCAGLL,U,sEC1DTmB,GAAgB,CACrB,aACA,QACA,YACA,eACA,YACA,QAGKC,GAAa,SAAC/O,GAAW,IACtBgP,EAAmChP,EAAnCgP,UAAW5C,EAAwBpM,EAAxBoM,QAAS6C,EAAejP,EAAfiP,WADC,EAEE9M,mBAASiK,GAFX,mBAEtB8C,EAFsB,KAEZC,EAFY,KAGvBrJ,EAAStB,IAAEuB,KAAK/F,EAAO8O,IAEvBM,EAAWrH,GAAY,uCAAC,WAAOsH,GAAP,eAAA1L,EAAA,6DACzB2L,EAAUD,EAASA,EAASvL,OAAS,IACjCwD,SAAU,EAFW,SAGvB0H,EAAUK,GAHa,OAI7BC,EAAQhI,SAAU,EAClB6H,EAAW,YAAID,IALc,2CAAD,uDAQzBK,EACHvP,EAAMuP,cACLP,EAAY,iCAAU,wFAAoBhP,EAAM+C,MAElD,OACC,kBAAC,KAAD,iBACK+C,EADL,CAECsG,QAAS8C,EACTE,SAA+B,oBAAdJ,EAA2BI,EAAW,KACvDH,WACsB,oBAAdD,OAA2BzE,EAAY0E,EAE/CM,YAAaA,MAWhBR,GAAW/L,aAAe,CACzBgM,eAAWzE,EACX6B,QAAS,GACT6C,gBAAY1E,GAGEwE,U,SC/CTS,GAAc,CAAC,mBACbC,GAASC,IAATD,KAEFE,GAAU,SAAC3P,GAAW,IAClB4P,EAA0B5P,EAA1B4P,gBAAiBjD,EAAS3M,EAAT2M,KAEnB7G,EAAStB,IAAEuB,KAAK/F,EAAOwP,IAHJ,EAIOrN,mBAAS,IAJhB,mBAIlB0N,EAJkB,KAIRC,EAJQ,OAKW3N,mBAAS,IALpB,mBAKlBsJ,EALkB,KAKNsE,EALM,KAMnB3J,EAAMH,iBAAO,MAEb+J,EAAYjI,GAAY,uCAAC,WAAO7B,GAAP,SAAAvC,EAAA,yDACX,UAAduC,EAAM5F,IADmB,iDAEzB8F,EAAI/F,SAAS+F,EAAI/F,QAAQyJ,KAAK2B,GAClCqE,GAAY,SAACnM,GAAD,4BAAWA,GAAX,CAAc,CAAE8H,aAAYF,IAAKf,KAAKyF,eAClDF,EAAc,IACd7J,EAAMgK,iBALuB,2CAAD,uDAQxBC,EAASpI,IAAa,SAAClF,GACvBuD,EAAI/F,SAAS+F,EAAI/F,QAAQ8P,OAAOtN,GACpCiN,GAAY,SAACnM,GAAD,OAAOA,EAAE8F,QAAO,SAAC9F,EAAGyM,GAAJ,OAAUA,IAAMvN,WAGxC+B,EAASmD,IAAa,SAACsI,GAE3B,OADAjK,EAAI/F,QAAUgQ,EAEZ,oCACE,kBAAC,KAAD,iBACMvK,EADN,CAEEkK,UAAWA,EACXM,UAAW,KACX3D,KAAM,IAAMA,EACZhI,MAAO8G,EACPpF,SAAU,SAACH,GAAD,OAAW6J,EAAc7J,EAAMI,OAAO3B,WAElD,kBAAC,KAAD,MACCkL,EAASlN,KAAI,SAACgB,EAAGyM,GAAJ,OACZ,kBAACG,GAAD,CACEjQ,IAAKqD,EAAE4H,IACP1I,MAAOuN,EACPI,aAAcZ,EACdjD,KAAMA,EACNwD,OAAQA,EACRxL,MAAOhB,EAAE8H,oBAOnB,OAAO,kBAAC,KAAD,CAAYkB,KAAMA,EAAM/H,OAAQA,KAOzC+K,GAAQ3M,aAAe,GAEvB,IAAMuN,GAAcE,gBAAK,SAACzQ,GAAW,IAC3B6C,EAA6C7C,EAA7C6C,MAAO2N,EAAsCxQ,EAAtCwQ,aAAc7D,EAAwB3M,EAAxB2M,KAAMhI,EAAkB3E,EAAlB2E,MAAOwL,EAAWnQ,EAAXmQ,OADR,EAEFhO,mBAAS,IAFP,mBAE3BuO,EAF2B,KAEjBC,EAFiB,KAWlC,OANA/H,qBAAU,WACR4H,EAAa7L,GACViM,MAAK,SAACjN,GAAD,OAAOgN,EAAYhN,GAAK,yEAC7BkN,OAAM,kBAAMF,EAAY,2EAC1B,IAGD,oCACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKG,KAAM,GACT,kBAAC,KAAD,CACEjC,UAAU,EACVkC,KAAK,QACLtQ,MAAO,CAAEQ,aAAc,GACvB0L,KAAMA,EAAI,WAAO9J,EAAP,QAGd,kBAAC,IAAD,CAAKiO,KAAM,IACT,kBAAC,IAAD,CACE/M,KAAM,kBAACiN,GAAA,EAAD,MACND,KAAK,QACLE,MAAM,SACNxQ,MAAO,CAAEyQ,WAAY,IACrB/Q,QAAS,kBAAMgQ,EAAOtN,MAExB,kBAAC4M,GAAD,CAAMhP,MAAO,CAAEyQ,WAAY,KAAOR,SAO7Bf,M,UClGTwB,GAAa,SAACnR,GAAW,IACrB2M,EAAsD3M,EAAtD2M,KAAM5J,EAAgD/C,EAAhD+C,MAAOqO,EAAyCpR,EAAzCoR,SAAUvL,EAA+B7F,EAA/B6F,OAAQwL,EAAuBrR,EAAvBqR,SAAUxC,EAAa7O,EAAb6O,SACzCyC,EAA+CtR,EAA/CsR,eAAgBC,EAA+BvR,EAA/BuR,WAAYC,EAAmBxR,EAAnBwR,eAFR,EAGcrP,mBAAS,IAHvB,mBAGrBsP,EAHqB,KAGNC,EAHM,OAIMxD,eAA1ByD,EAJoB,EAIpBA,OAAQC,EAJY,EAIZA,cACVC,EAAW5L,iBAAO,MACC,OAArB4L,EAASxR,UAAkBwR,EAASxR,QAAU,IAAIyR,iBAEtDlJ,qBAAU,WACR,IAAIjE,EAAQH,IAAEC,IAAIkN,EAAQhF,GAI1B,MAHqB,kBAAVhI,IAAoBA,EAAQ,CAACA,IACpCoN,MAAMC,QAAQrN,IAAQ+M,EAAiB/M,EAAMhC,IAAIsP,KACrDT,IACO,kBAAMK,EAASxR,QAAQ6R,WAE7B,CAACvF,IAEJ,IAAMwF,EAAWpK,GAAY,uCAAC,WAAOqE,GAAP,qBAAAzI,EAAA,yDACpByO,EAA6BhG,EAA7BgG,UAAWC,EAAkBjG,EAAlBiG,QAASC,EAASlG,EAATkG,KADA,0EAKFf,EAAWe,GALT,OAKpBC,EALoB,OAMrBV,EAASxR,QAAQmS,OAAOC,SAC3BL,EAAU,CACRM,OAAQ,IACRC,IAAKJ,EAAUxF,MAAM,QAAQ,GAC7B6F,IAAKC,IAAIC,gBAAgBR,KAVH,kDAa1BS,QAAQ3H,MAAR,MACAiH,EAAQ,IACRrH,GAAY,4HAfc,0DAAD,uDAmBvBgI,EAAejL,IAAa,SAACkL,GACjC,IAAIC,EAAcD,EAAKE,SAASC,MAAMhC,EAAW,GAAK,GACtD8B,EAAcA,EAAYvQ,KAAI,SAAC2P,GAK7B,OAJIA,EAAKe,WACPf,EAAKK,IAAML,EAAKe,SAASV,IACzBL,EAAKM,IAAMN,EAAKe,SAAST,KAEpBN,KAETZ,EAAiBwB,GAEjB,IAAII,EAAWJ,EAAYvQ,KAAI,SAACgB,GAAD,OAAOA,EAAEgP,OAAKlJ,QAAO,SAAC9F,GAAD,QAASA,KAC5C,WAAb0N,IAAuBiC,EAAWA,EAAS,IAC/C1B,EAAcjF,EAAM2G,GAAU,MAG1BC,EAAexL,IAAa,WAChC,OACE,oCACE,kBAAC,KAAD,CACE4E,KAAMA,EACN6G,SAA6B,UAAnBlC,EAA6B,UAAY,KACnDF,SAAUA,EACVvL,OAAQA,EACRsN,SAAU1B,EACVpL,SAAU2M,EACVS,cAAetB,EACftD,SAAUA,GAEV,kBAAC,IAAD,CAAQ9K,KAAM,kBAACiD,EAAA,EAAD,MAAoB6H,SAAUA,GACzC9L,QAOX,OAAO,kBAAC,KAAD,CAAY4J,KAAMA,EAAM/H,OAAQ2O,KAezCpC,GAAWnO,aAAe,CACxBD,MAAO,qEACPqO,UAAU,EACVvL,OAAQ,IACRgJ,UAAU,EACV2C,eAAgBhN,IAAEkP,MAGpB,IAAMzB,GAAgB,SAACtO,GAAD,MAAQ,CAC5BgJ,KAAMgH,mBAAmBhQ,EAAEoJ,MAAM,QAAQ,GAAGA,MAAM,MAAM6G,OACxDhB,IAAKjP,EACLgP,IAAKhP,IAGQwN,M,oBC9FP0C,GAAyCC,KAAzCD,WAAYE,GAA6BD,KAA7BC,YAAaC,GAAgBF,KAAhBE,YAE3BC,GAAQ,SAACjU,GAAW,IACjBkU,EAAqDlU,EAArDkU,UAAWnR,EAA0C/C,EAA1C+C,MAAOoR,EAAmCnU,EAAnCmU,SAAUxH,EAAyB3M,EAAzB2M,KAAMyH,EAAmBpU,EAAnBoU,SAAUC,EAASrU,EAATqU,KAC5CC,EAAqDtU,EAArDsU,SAAUC,EAA2CvU,EAA3CuU,WAAYC,EAA+BxU,EAA/BwU,QAASC,EAAsBzU,EAAtByU,OAAQzH,EAAchN,EAAdgN,UACvC0H,EAAwC1U,EAAxC0U,eAAgBC,EAAwB3U,EAAxB2U,cAAe/S,EAAS5B,EAAT4B,KACjCkE,EAAM,2BAAQuO,GAAR,IAAc1H,SAE1B,OACC,kBAAC,IAAD,CACCmE,KAAM0D,GAAW,GACjBC,OAAQA,EACRzH,UAAWA,EACXvM,MAAOiU,GAEP,kBAAC,KAAK5T,KAAN,CACCiC,MAAOA,EACPoR,SAAUA,EACVxH,KAAMA,EACNyH,SAAUA,EACVE,SAAUA,EACVC,WAAYA,GAEG,WAAdL,GACAS,GACAA,EAAc7O,GACA,YAAdoO,GACA,kBAAC,GAAD,eACC3E,YAAY,0GACRzJ,IAGS,aAAdoO,GAA4B,kBAAC,GAAapO,GAC5B,aAAdoO,GAA4B,kBAAC,KAAapO,GAC5B,eAAdoO,GACA,kBAAC,KAAD,eACC3E,YAAY,sEACRzJ,EAFL,CAGC8O,aACC9O,EAAO8O,cAAgBC,KAAO/O,EAAO8O,cAEtCnU,MAAK,2BAAOqF,EAAOrF,OAAd,IAAqB4H,MAAO,YAGpB,eAAd6L,GAA8B,kBAACL,GAAe/N,GAChC,gBAAdoO,GAA+B,kBAACH,GAAgBjO,GAClC,gBAAdoO,GAA+B,kBAACF,GAAgBlO,GAClC,UAAdoO,GAAyB,kBAAC,KAAUpO,GACtB,eAAdoO,GACA,kBAAC,KAAD,iBAAWpO,EAAX,CAAmBlE,KAAK,WAEV,gBAAdsS,GACA,kBAAC,KAAD,iBACKpO,EADL,CAECrF,MAAK,2BAAOqF,EAAOrF,OAAd,IAAqB4H,MAAO,YAGpB,aAAd6L,GAA4B,kBAAC,KAAD,iBAAWpO,EAAX,CAAmBlE,KAAK,SACtC,eAAdsS,GACA,kBAAC,KAAD,eACC3E,YAAY,uCACRzJ,EAFL,CAGClE,KAAK,SAGQ,kBAAdsS,GACA,kBAAC,KAAMY,SAAahP,GAEN,aAAdoO,GAA4B,kBAAC,KAAMa,SAAajP,GAClC,WAAdoO,GACA,kBAAC,KAAD,eACC3E,YAAY,kCACRzJ,EAFL,CAGCrF,MAAK,2BAAOqF,EAAOrF,OAAd,IAAqBmD,UAAW,WAEpCkC,EAAOkP,OACPzH,OAAO0H,QAAQnP,EAAOkP,OAAOrS,KAAI,mCAAEuS,EAAF,KAAKC,EAAL,YAChC,kBAAC,KAAOC,OAAR,CAAe9U,IAAK4U,EAAGvQ,MAAOuQ,GAC5BC,OAKS,WAAdjB,GAA0B,kBAAC,KAAWpO,GACxB,eAAdoO,GACA,kBAAC,GAAD,iBAAgBpO,EAAhB,CAAwBuL,SAAUzP,QAyCvCqS,GAAMjR,aAAe,CACpBsR,cAAU/J,EACVgK,gBAAYhK,EACZiK,aAASjK,EACTkK,YAAQlK,EACRyC,eAAWzC,EACXmK,oBAAgBnK,EAChBoK,mBAAepK,GAGD0J,UCtHAoB,GA7BG,SAACrV,GAAW,IACrBsV,EAAkCtV,EAAlCsV,SAAUC,EAAwBvV,EAAxBuV,OAAQ1H,EAAgB7N,EAAhB6N,YAClB8D,EAAWzD,eAAXyD,OAgBR,OAdkBnI,mBAAQ,WACzB,ONN2B,SAAC8L,EAAUE,GACvC,GAAIA,EACH,OAAOF,EAAS3S,KAAI,SAACgB,GAAD,mBAAC,eACjBA,GADgB,IAEnB6Q,QAAS,EACTF,SAAU,CAAExD,KAAM,IAClByD,WAAY,CAAEzD,KAAM,SAKtB,IAFA,IAAIxL,EAAM,GACNmQ,GAAiB,EACZrF,EAAI,EAAGsF,EAAKJ,EAASxR,OAAQsM,EAAIsF,EAAItF,IAAK,CAClD,IAAI/P,EAAUiV,EAASlF,GACvB,GAAK/P,EAAQsV,UAGN,IAAuB,IAAnBF,EAA0B,CAAC,IAAD,EAEhCG,EAAO,UAAGN,EAASlF,EAAI,UAAhB,aAAG,EAAiBuF,UAC/BrQ,EAAIwE,KAAJ,2BACIzJ,GADJ,IAECmU,QAASoB,EAAU,GAAK,GACxBtB,SAAUsB,EAAU,CAAE9E,KAAM,GAAM,CAAEA,KAAM,GAC1CyD,WAAYqB,EAAU,CAAE9E,KAAM,IAAO,CAAEA,KAAM,MAE9C2E,GAAiB,OAGjBnQ,EAAIwE,KAAJ,2BACIzJ,GADJ,IAECmU,QAAS,GACTF,SAAU,CAAExD,KAAM,GAClByD,WAAY,CAAEzD,KAAM,IACpB9D,UAAW,wBAEZyI,GAAiB,OArBjBnQ,EAAIwE,KAAKzJ,GACToV,GAAiB,EAuBnB,OAAOnQ,EMhCCuQ,CACNP,EAAS7L,QAAO,SAACqM,GAAU,IAClBC,EAAoBD,EAApBC,UAAWC,EAASF,EAATE,KACnB,GAAyB,oBAAdD,GACV,GAAIA,EAAUpE,GAAS,OAAO,OACxB,GAAIoE,EAAW,OAAO,EAC7B,OAAqB,IAAjBlI,GAAsBA,IAAgBmI,KAG3CT,KAEC,CAACD,EAAU3D,EAAQ4D,EAAQ1H,IAEblL,KAAI,SAAC3C,GAAD,OACpB,kBAAC,GAAD,iBAAWA,EAAX,CAAkBM,IAAKN,EAAM2M,KAAMkB,YAAaA,SCd1CoI,GAASC,KAATD,KAEFE,GAAe,SAACnW,GAAW,IACxBoW,EAA2CpW,EAA3CoW,SAAUb,EAAiCvV,EAAjCuV,OAAQc,EAAyBrW,EAAzBqW,cAAezI,EAAU5N,EAAV4N,MACjCK,EAAgDjO,EAAhDiO,iBAAkBD,EAA8BhO,EAA9BgO,kBAAmB9E,EAAWlJ,EAAXkJ,OACvCgD,EAAU9D,GAAY,KAHG,EAKCoB,mBAAQ,WAAO,IAAD,EPiEjB,SAAC8L,EAAUpJ,GACxC,IADoD,EAChD5G,EAAM,GACNgR,EAAc,GACdC,EAAW/R,IAAEgS,MAAMlB,EAAU,SAC7BmB,EAAmB,GAJ6B,cAMnCnB,GANmC,IAMpD,2BAA2B,CAAC,IAAnBQ,EAAkB,QAC1BxQ,EAAIwE,KAAKgM,GADiB,IAGpB7J,EAAa6J,EAAKzB,KAAlBpI,SACN,GAAKA,IAEAqK,EAAYrK,EAASlJ,OAAQ,CAAC,IAAD,EACjCkJ,EAAWD,GAAkBC,EAAUC,EAASuK,GAChD,IAAIC,EAAeJ,EAAYrK,EAASlJ,OAAS,CAChDmR,UAAW,WACXrI,aAAa,UAAAI,EAASM,kBAAT,eAAqBxJ,QAAS,QAC3CsR,KAAK,2BAAMpI,GAAP,IAAiBgD,WAAY,KACjCtC,KAAMV,EAASlJ,MACfA,MAAOkJ,EAASlJ,MAChB4T,QAAQ,CAAEb,GAAH,mBAAY7J,EAASS,WAAW/J,KAAI,SAACgB,GAAD,OAAO4S,EAAS5S,QAC3DwQ,WAAYlI,EAASkI,SACrBC,SAAU5P,IAAEkP,KACZqC,UAAW9J,EAAS8J,UACpBC,KAAM/J,EAAS+J,MAEhBU,EAAYrC,KAAKpF,WAAWxF,OAASA,GAAOjE,KAAKkR,GACjDpR,EAAIwE,KAAK4M,KA3ByC,8BA+BpD,IAAIvK,EAAcsK,EAAiB9R,MAAQH,IAAES,MAAMqR,GACjD3T,IAAI,WACJiU,UACAJ,MAAM,SACN7R,QAgBF,MAAO,CAAE2Q,SAfThQ,EAAMA,EAAImE,QAAO,SAAC9F,GAAD,OAAQwI,EAAWxI,EAAEZ,UAed8T,aAbL,SAAC/R,GACnB,IAAIgS,EAAM,eAAQhS,GAClB,IAAK,IAAI/B,KAAS+B,EACjB,GAAKwR,EAAYvT,GAAjB,CAGA,IAJuB,IAGjB4T,EAAYL,EAAYvT,GAAxB4T,QACGvG,EAAI,EAAGsF,EAAKiB,EAAQ7S,OAAQsM,EAAIsF,EAAItF,IAC5C5L,IAAEsI,IAAIgK,EAAQH,EAAQvG,GAAGzD,KAAM7H,EAAK/B,GAAOqN,WACrC0G,EAAO/T,GAEf,OAAO+T,IOhH4BC,CAClC7N,EAAOoM,SACPpJ,GAFOoJ,EADqC,EACrCA,SAIF0B,EAAgB,CALuB,EAC3BH,cAImBI,OACpC3B,EAAS3S,KAAI,SAACgB,GAAD,oBAAOA,QAAP,IAAOA,GAAP,UAAOA,EAAG0Q,YAAV,aAAO,EAAS7H,gBAAc/C,QAAO,SAAC9F,GAAD,QAASA,MAY5D,MAAO,CAAE2R,WAAU4B,UAVJ,uCAAG,WAAOC,EAAUC,GAAjB,uBAAAzT,EAAA,sDACjBwT,EAAW3S,IAAE6S,UAAUF,GADN,cAEAH,GAFA,IAEjB,2BAASM,EAAT,QAAgCH,EAAWG,EAAKH,GAF/B,qCAGbI,EAAQrO,EAAOoM,SAAS3S,KAAI,SAACgB,GAAD,OAAOA,EAAEgJ,QACrCrH,EAAMd,IAAEgT,KACXL,EACAI,EAAM9N,QAAO,SAAC9F,GAAD,OAAQ,WAAW8T,KAAK9T,OANrB,SAQXyS,EAAS9Q,EAAK8R,EAASD,GARZ,2CAAH,2DAWb,CAACjO,EAAQkN,EAAUlK,IAnBdoJ,EALuB,EAKvBA,SAAU4B,EALa,EAKbA,UALa,EP4HR,SAACtJ,GAAW,IAAD,EACHzL,mBAASyL,EAAM9J,OAAS,GAAK,GAD1B,mBAC3B+J,EAD2B,KACd6J,EADc,KAKlC,MAAO,CAAE3J,SAHQ,kBAChBF,EAAcD,EAAM9J,OAAS,GAAK4T,EAAQ7J,EAAc,IAEtCC,SADF,kBAAMD,EAAc,GAAK6J,EAAQ7J,EAAc,IACnCA,eOvGe8J,CAAS/J,GAA7CG,EA1BuB,EA0BvBA,SAAUD,EA1Ba,EA0BbA,SAAUD,EA1BG,EA0BHA,YAE5B,OACC,kBAAC,KAAD,CACCwI,cAAeA,GAAiBnN,EAAO0O,kBACvCxB,SAAUc,IAET,kBACA,kBAAC,KAAD,CACC5C,SAAU,CAAExD,KAAM,GAClByD,WAAY,CAAEzD,KAAM,IACpB+G,OAAQtC,GAEP3H,EAAM9J,OACN,kBAAC,IAAD,CAAKrD,MAAO,CAAEQ,aAAc,GAAI2N,UAAW,KAC1C,kBAAC,IAAD,CAAK6F,OAAQ,EAAG3D,KAAM,IACrB,kBAAC,KAAD,CAAOC,KAAK,QAAQ1Q,QAASwN,GAC3BD,EAAMjL,KAAI,SAACgB,GAAD,OACV,kBAACsS,GAAD,CAAM3V,IAAKqD,EAAGoG,MAAOpG,UAKtB,KAEJ,kBAAC,IAAD,CAAKmU,OAAQ,EAAGC,QAASxC,EAAS,cAAWhL,GAC5C,kBAAC,GAAD,CACC+K,SAAUA,EACVzH,YAAaA,EACb0H,OAAQA,IAERA,GACA,kBAAC,IAAD,CAAKzE,KAAM,GACV,kBAAC,KAAD,CACClP,KAAK,UACLnB,MAAO,CAAEQ,aAAc,KAEtB+M,KAKJuH,GAAU,kBAAC,KAAD,CAAS9U,MAAO,CAAEmO,UAAW,OACtC2G,GACD,kBAAC,GAAD,CACC3H,MAAOA,EACPC,YAAaA,EACbC,SAAUA,EACVC,SAAUA,EACVC,kBAAmBA,EACnBC,iBAAkBA,SAiBzBkI,GAAanT,aAAe,CAC3BqT,cAAe,KACfnN,OAAQ,KACRqM,QAAQ,EACR3H,MAAO,IAGOuI,UC7GP6B,GAAqBtI,IAArBsI,MAAOC,GAAcvI,IAAduI,UAETC,GAAS,SAAClY,GAAW,IAClB+J,EAA0C/J,EAA1C+J,MAAOoO,EAAmCnY,EAAnCmY,YAAaxL,EAAsB3M,EAAtB2M,KAAMyL,EAAgBpY,EAAhBoY,MAAOrU,EAAS/D,EAAT+D,KACjCsU,EAAuDrY,EAAvDqY,qBAAsBC,EAAiCtY,EAAjCsY,WAAYC,EAAqBvY,EAArBuY,iBAEpCC,EAAQ7L,EAAK7I,QAAU,SAAS2T,KAAK9K,EAAK,IAAM,IAAMA,EAAOA,EAC7D8L,EAAS1O,GAAK,8CAAayO,GAEjC,OACC,yBAAK/X,MAAO4X,GACX,kBAACL,GAAD,CAAOU,MAAON,EAAQ,EAAI,EAAG3X,MAAO6X,GAClCvU,EADF,IACS0U,GAERN,GACA,kBAACF,GAAD,CAAWxX,MAAO8X,GAAmBJ,KAezCD,GAAOlV,aAAe,CACrB+G,MAAO,GACPoO,YAAa,GACbxL,KAAM,GACN0L,qBAAsB,CAAEpX,aAAc,GAAI2C,UAAW,UACrD0U,WAAY,GACZC,iBAAkB,CAAE3U,UAAW,QAC/BwU,OAAO,EACPrU,KAAM,MAGQmU,UCvCTS,GAAY,SAAC3Y,GAAW,IACrB4H,EAAsD5H,EAAtD4H,QAASE,EAA6C9H,EAA7C8H,QAAS8Q,EAAoC5Y,EAApC4Y,OAAQ1P,EAA4BlJ,EAA5BkJ,OAAQkN,EAAoBpW,EAApBoW,SAAUxI,EAAU5N,EAAV4N,MAC5CiL,EAAkD7Y,EAAlD6Y,aAAcC,EAAoC9Y,EAApC8Y,WAAY1N,EAAwBpL,EAAxBoL,MAAO2N,EAAiB/Y,EAAjB+Y,aACnChP,EAAQ6D,EAAM9J,OAAS,GAAK8U,EAASE,EAAaD,EAGxD,OAAKjR,EAGJ,kBAAC,KAAD,CACCoR,UAAQ,EACRpR,QAASA,EACTS,MAAO,IACP4Q,OAAQ,KACRC,SAAUpR,EACVqR,cAAc,GAEbpP,GAAS,kBAAC,GAAD,CAAQA,MAAOA,EAAOqO,OAAK,IACpChN,GACA,kBAAC,KAAD,CACCC,QAASD,EAAMC,SAAWD,EAC1BxJ,KAAK,QACLwX,UAAQ,EACR3Y,MAAO,CAAEoD,OAAQ,GAAI5C,aAAc,GAAI2N,WAAY,MAGrD,kBAAC,GAAD,CACCyH,cAAe0C,EACf7P,OAAQA,EACRkN,SAAUA,EACVxI,MAAOA,KAxBW,MA2CtB+K,GAAU3V,aAAe,CACxB6V,aAAc,6FACdC,WAAY,qEACZ1N,MAAO,KACP2N,kBAAcxO,GAGAoO,U,oBC9DTU,GAAmB,CACxB,eAAgB,uFAChB,eAAgB,uFAChB,aAAc,mEACd,aAAc,SAACC,GAAD,6HACSA,EAASlM,QAAQmM,MAD1B,sDAEd,aAAc,SAACD,GAAD,2GACMA,EAASlM,QAAQmM,MADvB,sDAEd,eAAgB,6FAChB,cAAe,wFAGHC,GAAkB,SAACF,EAAUvW,GAAW,IAAD,IACnDA,EAAQA,IAAK,OAAIuW,QAAJ,IAAIA,GAAJ,UAAIA,EAAUlM,eAAd,aAAI,EAAmBrK,OADe,IAG7CsI,EAA2BiO,EAA3BjO,QAASzJ,EAAkB0X,EAAlB1X,KAAMwL,EAAYkM,EAAZlM,QACrB,GAAa,eAATxL,EAAuB,cAAOwL,QAAP,IAAOA,GAAP,UAAOA,EAAShC,aAAhB,aAAO,EAAgBC,QAClD,GAAI,kBAAQoM,KAAKpM,EAAQoO,QAAQ,WAAY,KAAM,OAAOpO,EAC1D,GAAI,UAAUoM,KAAK7V,IAASmB,EAAO,MAAM,GAAN,OAAUA,EAAV,gEAEnC,IAAI2W,EAAQL,GAAiBzX,GAC7B,OAAK8X,GAAS3W,EAAa,GAAN,OAAUA,EAAV,yEAA8BsI,EAA9B,KAChBqO,EAEgB,kBAAVA,EAA2BA,EAC/BA,EAAMJ,GAHK,mFAAN,OAAyBjO,EAAzB,M,qBC2BAsO,GAAU,SAACC,EAAQC,EAAaC,GAI5C,OAHAF,EA9C6B,SAACA,EAAQC,GACtC,IASIE,EAAQ,GAEZ,OAXiB,SAAXC,EAAYC,EAAMvO,EAAMpG,GAAS,IAAD,KAC7B,OAAJ2U,QAAI,IAAJA,GAAA,UAAAA,EAAMC,aAAN,eAAanX,QAAwB,YAAX,OAAJkX,QAAI,IAAJA,OAAA,EAAAA,EAAMrY,OACD,cAAtB,OAAJqY,QAAI,IAAJA,GAAA,UAAAA,EAAMC,aAAN,eAAaC,WAAyB7U,EAAIwE,KAAK4B,GAEpD,IAAI8B,EAAOyM,EAAKzM,KAChB,GAAIA,EACH,IAAK,IAAIlN,KAAOkN,EAAMwM,EAASxM,EAAKlN,GAAN,sBAAgBoL,GAAhB,CAAsBpL,IAAMgF,GAI5D0U,CAASH,EAAa,GAAIE,GACnBH,EAAOQ,KAAKL,GAAO,SAAC7Q,GAAD,OAAYA,EAAOmR,MAAM,OAkC1CC,CAAeV,EAAQC,GAC5BC,IAASF,EAhCe,SAACA,EAAQC,GACrC,IAUME,EAAQ,GAEd,OAZiB,SAAXC,EAAYC,EAAMvO,GAAU,IAAD,KACxB,OAAJuO,QAAI,IAAJA,GAAA,UAAAA,EAAMC,aAAN,eAAanX,SAAb,OAAsBkX,QAAtB,IAAsBA,GAAtB,UAAsBA,EAAMC,aAA5B,aAAsB,EAAaC,mBAC/BF,EAAKC,MAAMC,SAClBJ,EAAMjQ,KAAK4B,IAGZ,IAAI8B,EAAOyM,EAAKzM,KAChB,GAAIA,EAAM,IAAK,IAAIlN,KAAOkN,EAAMwM,EAASxM,EAAKlN,GAAN,sBAAgBoL,GAAhB,CAAsBpL,KAI/D0Z,CAASH,EAAa,IACfD,EAAOQ,KAAKL,GAAO,SAACpW,GAAD,OAAOA,EAAE4W,cAmBbC,CAAcZ,EAAQC,KAC5CD,EAjB8B,SAACA,EAAQC,GACvC,IAQIE,EAAQ,GAEZ,OAViB,SAAXC,EAAYC,EAAMvO,EAAMpG,GAAS,IAAD,OAC7B,OAAJ2U,QAAI,IAAJA,GAAA,UAAAA,EAAMC,aAAN,eAAanX,SAAb,OAAsBkX,QAAtB,IAAsBA,GAAtB,UAAsBA,EAAMQ,aAA5B,iBAAsB,EAAc,UAApC,aAAsB,EAAkB1E,YAAWzQ,EAAIwE,KAAK4B,GAEhE,IAAI8B,EAAOyM,EAAKzM,KAChB,GAAIA,EACH,IAAK,IAAIlN,KAAOkN,EAAMwM,EAASxM,EAAKlN,GAAN,sBAAgBoL,GAAhB,CAAsBpL,IAAMgF,GAI5D0U,CAASH,EAAa,GAAIE,GACnBH,EAAOQ,KAAKL,GAAO,SAAC7Q,GAAD,OAAYA,EAAOqR,cAMpCG,CAAgBd,EAAQC,IACnBc,OAAO,CAAEpP,IAAKqP,IAAIC,S,UCrDpBC,GACX,iqGCIIC,GAAW,SAAC/a,GAAW,IACnBgb,EAAehb,EAAfgb,IAAK3S,EAAUrI,EAAVqI,MAEb,MAAmB,kBAAR2S,EACF,kBAAC,KAAD,CAAOA,IAAKA,EAAK3S,MAAOA,EAAO4S,SAAUH,KAE7C/I,MAAMC,QAAQgJ,GAIjB,kBAAC,KAAME,aAAP,KACGF,EAAIrY,KAAI,SAACwY,EAAMtY,GAAP,OACP,kBAAC,KAAD,CACEvC,IAAKuC,EAAMuY,WACXJ,IAAKG,EACL9S,MAAOA,EACP5H,MAAO,CAAEa,QAAS,qBAClB2Z,SAAUH,SAVT,kBAAC,KAAD,CAAOE,IAAI,QAAQ3S,MAAOA,EAAO4S,SAAUH,MA0BtDC,GAAS/X,aAAe,CACtBqF,MAAO,KAGM0S,UCjCTM,GAAY,CACjB,YACA,eACA,YACA,aACA,aACA,YACA,eACA,WACA,YACA,iBACA,OACA,iBACA,gBACA,iBAGKC,G,WACL,WAAY1B,EAAQE,GACnB,GAD6B,sBACxBc,IAAIW,SAAS3B,GAAS,MAAM,IAAI4B,MAAM,sBAE3CjX,KAAKkX,SAAW7B,EAAO6B,WACvBlX,KAAKqV,OAASD,GAAQC,EAAQrV,KAAKkX,SAAU3B,GAC7CvV,KAAK+Q,SAAW,GAChB0E,GAASzV,KAAKkX,SAAU,GAAIlX,KAAK+Q,SAAU/Q,KAAKqV,QAChD8B,GAAenX,KAAK+Q,UACpB/Q,KAAKgF,QAAUhF,KAAK+Q,SAAS3S,KAAI,SAACgB,GAAD,OAAOA,EAAEoB,UAC1CR,KAAKqT,gBAAkBrT,KAAKqT,gBAAgBpS,KAAKjB,M,oDAGlD,WACC,IAAKA,KAAKoX,cAAe,CACxB,IADwB,EACpBrW,EAAOf,KAAKoX,cAAgB,GADR,cAEWpX,KAAK+Q,UAFhB,IAExB,2BAAkD,CAAC,IAAD,UAAvC3I,EAAuC,EAAvCA,KAAMiI,EAAiC,EAAjCA,aACY,oBAAjBA,IACVA,EAAeA,UACKrK,IAAjBqK,GAA4BpQ,IAAEsI,IAAIxH,EAAKqH,EAAMiI,IAL1B,+BAQzB,OAAOrQ,KAAKoX,kB,KAIR3B,GAAW,SAAXA,EAAYC,EAAMvO,EAAMpG,EAAKsU,GAAY,IAAD,GAC7C,OAAIK,QAAJ,IAAIA,GAAJ,UAAIA,EAAMC,aAAV,aAAI,EAAanX,QAAOuC,EAAIwE,KAAK,IAAI8R,GAAS3B,EAAMvO,EAAMkO,IAE1D,IAAIpM,EAAOyM,EAAKzM,KAChB,GAAIA,EACH,IAAK,IAAIlN,KAAOkN,EAAMwM,EAASxM,EAAKlN,GAAN,sBAAgBoL,GAAhB,CAAsBpL,IAAMgF,EAAKsU,IAG3D8B,GAAiB,SAACpG,GACvB,IADoC,EAChCuG,GAAc,EADkB,cAEnBvG,GAFmB,IAEpC,4BACC,GADD,QACUjB,KAAKyH,SAAU,CACvBD,GAAc,EACd,QALkC,8BAQpC,GAAIA,EAAJ,qBACkBvG,GADlB,IACC,gCAASQ,EAAT,QACKA,EAAKzB,KAAKyH,gBAAiBhG,EAAKzB,KAAKyH,SACpChG,EAAK/Q,OAAO2E,UAAW,GAH9B,iCAMKkS,G,WACL,WAAYG,EAAOrQ,EAAMkO,GAAS,IAAD,2BAChC,IAAIvF,EAAO9P,KAAKyX,QAAQD,GAExBxX,KAAK4P,SAAsC,cAAtB,OAAL4H,QAAK,IAALA,GAAA,UAAAA,EAAO7B,aAAP,eAAcC,UAC9B5V,KAAKxB,MAAL,OAAagZ,QAAb,IAAaA,GAAb,UAAaA,EAAO7B,aAApB,aAAa,EAAcnX,MAC3BwB,KAAKoI,KAAOjB,EAAKxG,KAAK,KACtBX,KAAK2P,UAAY3P,KAAK0X,eAAeF,EAAO1H,GAC5C9P,KAAK2X,iBAAmB3X,KAAK4X,mBAAmBvC,EAAQlO,GACxDnH,KAAK6P,SAAW7P,KAAK6P,SAAS5O,KAAKjB,MACnCA,KAAK3C,KAAOma,EAAMna,KAClB2C,KAAKqQ,aAAL,OAAoBmH,QAApB,IAAoBA,GAApB,UAAoBA,EAAO7B,aAA3B,aAAoB,EAAckC,QAClC7X,KAAKQ,OAASR,KAAK8X,UAAUhI,EAAM9P,MAGnCA,KAAKoR,UAAYtB,EAAKsB,UACtBpR,KAAKwR,UAAY1B,EAAK0B,UACtBxR,KAAKmQ,eAAiBL,EAAKK,eAC3BnQ,KAAKyR,KAAO3B,EAAK2B,KACjBzR,KAAKoQ,cAAgBN,EAAKM,cAC1BpQ,KAAK8P,KAAO7P,IAAEuB,KAAKsO,EAAMgH,I,uDAG1B,SAAmBzB,EAAQlO,GAAO,IAC3BwI,EAAc3P,KAAd2P,UACF5O,EAAMsU,EAAO0C,QAAQ5Q,GACzB,MAAkB,eAAdwI,EACI5O,EAAIiX,QAAQ,mCACF,eAAdrI,EAAmC5O,EAAIkX,QACzB,aAAdtI,EACI5O,EAAIqN,IAAI,CAAE8J,OAAQ,CAAC,OAAQ,WAC5BnX,I,uBAGR,SAAU+O,EAAMqI,GAAQ,IACjBxI,EAAiCwI,EAAjCxI,UAAWtS,EAAsB8a,EAAtB9a,KAAMmB,EAAgB2Z,EAAhB3Z,MAAO4J,EAAS+P,EAAT/P,KAC1BrH,EAAM,CACTqX,SAAUtI,EAAKuI,aACfhY,OAAQyP,EAAKwI,WACbxU,MAAOgM,EAAKyI,UACZpT,SAAU2K,EAAK3K,SACfnE,eAAgB8O,EAAK9O,eACrBE,cAAe4O,EAAK5O,cACpBsE,MAAOhH,EACPuB,UAAWqI,EAAKI,MAAM,KACtBzM,IAAKqM,EACL/K,OACAsS,aA+DD,OA5DK5O,EAAI+C,QACK,WAATzG,EAAmB0D,EAAI+C,MAAQ,GACjB,SAATzG,EAAiB0D,EAAI+C,MAAQ,IACf,eAAd6L,EAA4B5O,EAAI+C,MAAQ,KAC1B,aAAd6L,GACc,aAAdA,KAD0B5O,EAAI+C,MAAQ,MAI3C/C,EAAIqX,UACU,aAAdzI,IAA0B5O,EAAIqX,UAAW,GAGzCrX,EAAIV,SACU,WAAdsP,EAAwB5O,EAAIV,OAAS,SAACjB,GAAD,OAAO0Q,EAAKW,MAAMrR,IACpC,eAAduQ,EACR5O,EAAIV,OAAS,SAACjB,GACb,MAAiB,kBAANA,EAAuBA,EAC3BA,EAAE8V,QACR,2BACA,SAACsD,EAAGC,EAAIC,EAAIC,GAAZ,MAAmB,CAACF,EAAIC,EAAIC,GAAIhY,KAAK,SAIzB,aAAdgP,GACc,aAAdA,GACe,eAAdA,GAAsD,UAAxBG,EAAK/C,eAEpChM,EAAIV,OAAS,SAACjB,GAAD,OACZ,yBACClD,MAAO,CACN0c,SAAU,aACVC,UAAW,aACXC,SAAU,KAEXtT,MAAOpG,GAENA,IAIW,eAAduQ,GACwB,UAAxBG,EAAK/C,eAELhM,EAAIV,OAAS,SAACjB,GAAD,OAAO,kBAAC,GAAD,CAAUqX,IAAKrX,KAClB,WAAT/B,EACR0D,EAAIV,OAAS,SAACjB,GAAD,OAAa,MAALA,EAAY,GAAK2Z,KAAQ3Z,GAAG4Z,OAAO,QACvC,YAAT3b,EACR0D,EAAIV,OAAS,SAACjB,GAAD,OAAa,MAALA,EAAY,GAAKA,EAAI,qBAAQ,wCACjC,SAAT/B,EACR0D,EAAIV,OAAS,SAACjB,GAAD,OACP,MAALA,EACG,GACAA,aAAa6Z,KACb3I,KAAOlR,GAAG4Z,OAAO,cACjB5Z,GACa,UAAT/B,IACR0D,EAAIV,OAAS,SAACjB,GAAD,OACP,MAALA,EAAY,GAAKoO,MAAMC,QAAQrO,GAAKA,EAAEuB,KAAK,MAAQvB,KAG/C2B,I,qBAGR,SAAQyW,GAAQ,IAAD,EACVtB,EAAK,OAAGsB,QAAH,IAAGA,OAAH,EAAGA,EAAOtB,MACfnV,EAAM,GAGV,GAFIyM,MAAMC,QAAQyI,IAA2B,IAAjBA,EAAM3W,SAAcwB,EAAG,eAAQmV,EAAM,MAExD,OAALsB,QAAK,IAALA,GAAA,UAAAA,EAAO7B,aAAP,eAAcuD,QAAd,OAAsB1B,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAO1B,OAAO,CAAC,IAAD,IACjCqD,EAAepY,EAAfoY,WACFrD,EAAK,OAAG0B,QAAH,IAAGA,OAAH,EAAGA,EAAO1B,MACnB,GAAKtI,MAAMC,QAAQ0L,IACd,IAAc,QAAV,EAAAA,SAAA,eAAY5Z,WAAZ,OAAuBiY,QAAvB,IAAuBA,GAAvB,UAAuBA,EAAO1B,aAA9B,aAAuB,EAAcvW,QAC7C,MAAM,IAAI0X,MACT,8DAH8BkC,EAAarD,EAM7C,IADA,IAAIrF,EAAS1P,EAAI0P,MAAQ,GAChB5E,EAAI,EAAGsF,EAAK2E,EAAMvW,OAAQsM,EAAIsF,EAAItF,IAC1C4E,EAAMqF,EAAMjK,IAAMsN,EAAWtN,GAG/B,OAAO9K,I,4BAGR,SAAeyW,EAAO1H,GACrB,OAAIA,EAAKH,UAAkBG,EAAKH,UAC5BG,EAAKM,cAAsB,SAC3BN,EAAKzE,gBAAwB,UAC7ByE,EAAKsJ,cAAgBtJ,EAAKuJ,gBAAkBvJ,EAAK9C,WAC7C,aACW,YAAfwK,EAAMna,KAA2B,WAClB,SAAfma,EAAMna,KAAwB,aACf,WAAfma,EAAMna,KAA0B,cAChCyS,EAAKW,MAAc,SAChB,U,sBAGR,SAASrQ,GACR,IAAIkZ,EAAWtZ,KAAK2X,iBAAiB9H,SAASzP,GAC9C,GAAIJ,KAAK4P,WAAaxP,EACrB,OAAO6U,GACN,CAAE5X,KAAM,eAAgByJ,QAAS,IACjC9G,KAAKxB,OAGP,IAAK8a,EAASzS,QAAU2G,MAAMC,QAAQ6L,EAASzS,MAAM0S,SACpD,OAAO,KATO,oBAWMD,EAASzS,MAAM0S,SAXrB,IAWf,gCAASxE,EAAT,QACC,OAAOE,GAAgBF,EAAU/U,KAAKxB,QAZxB,8BAcf,OAAO,S,eCvOIgb,GAAe,SAACC,EAAWC,GACvCD,EAAUE,QAAQC,IAClB,IAAIC,EAAYC,SAAMC,cAAcN,EAAW,CAAEO,OAAQ,eACzD,IAAKN,EAAU,OAAOG,EAEtB,IAAII,EAAWH,SAAMI,WACrBJ,SAAMK,kBAAkBF,EAAUJ,EAAW,WAC7CO,qBAAUH,EAAUP,IAGRW,GAAiB,SAACC,GAC9B,IAAIlb,EAAImb,OAAIC,gBAAgBF,GACxBG,EAAc,CAAE3U,EAAG1G,EAAE0G,EAAG4U,EAAGtb,EAAEoZ,EAAI,EAAGmC,EAAGvb,EAAEub,EAAGC,EAAGxb,EAAEyb,EAAGrC,EAAGpZ,EAAEsb,EAAGI,EAAG1b,EAAE2b,GACrE,OAAOzK,KAAOmK,GAAaO,UAAU,IAAI/B,MAAQgC,UAGrCC,GAAe,SAACC,GAAD,OAC3B,IAAIC,SAAQ,SAACC,EAAKC,GACjB,IAAIC,EAAS,IAAIC,WACjBD,EAAOE,OAAS,SAAC5f,GAChB,IACC,IAAI0E,EAAO1E,EAAEkG,OAAOwQ,OAChB0H,EAAWyB,gBAAKnb,EAAM,CAAElD,KAAM,WAC9Bse,EAAa1B,EAAS2B,OAAO3B,EAAS4B,WAAW,IACjD9a,EAAM+Y,SAAMgC,cAAcH,GAC9BN,EAAIta,EAAI3C,IAAI2d,KACX,MAAOlV,GACRyU,EAAIzU,KAGN0U,EAAOS,QAAU,kBAAMV,EAAIC,EAAO1U,QAClC0U,EAAOU,mBAAmBd,OAGtBY,GAAQ,SAAC3c,GACd,OAAOa,IAAEuB,KAAKpC,EAAG,eAGZwa,GAAe,SAACsC,GACrB,IAAK,IAAIngB,KAAOmgB,EAAK,CACpB,IAAI9b,EAAQ8b,EAAIngB,GAChB,GAAIogB,GAAS/b,GACZ,MAAM,IAAI6W,MAAM,sCACjB,GAAIzJ,MAAMC,QAAQrN,GACjB,MAAM,IAAI6W,MAAM,uCAIbkF,GAAW,SAACtW,GAAD,MAA6C,oBAAtCmD,OAAOoT,UAAUvF,SAASwF,KAAKxW,I,wCC9C1CyW,GAAb,oDACC,WAAYvT,GAAS,IAAD,+BACnB,cAAM,mBACDX,KAAO,iBACZ,EAAKW,OAASA,EACdkO,MAAMsF,kBAAN,gBAA8B,EAAKC,aAJhB,EADrB,uBAAoCvF,QASvBwF,GAAmB,SAACC,EAAO/X,GAGvC,IAFA,IAAIoE,EAAS,GACThI,EAAM,GACD8K,EAAI,EAAGsF,EAAKuL,EAAMnd,OAAQsM,EAAIsF,EAAItF,IAC1C,IACC9K,EAAIwE,KAAKoX,GAAeD,EAAM7Q,GAAIlH,EAAQ,KACzC,MAAOkC,GACRkC,EAAM,sBAAOA,GAAP,YAAkBlC,EAAM0S,QAAQnb,IAAIwe,GAAS/Q,MAIrD,GAAI9C,EAAOxJ,OAAQ,MAAM,IAAI+c,GAAevT,GAC5C,OAAOhI,GAGF6b,GAAW,SAAC/Q,GACjB,OAAO,SAACzM,GAAD,YAAQ,CACdyd,KAAMhR,EAAI,EACVrN,MAAK,UAAEY,EAAEyJ,eAAJ,aAAE,EAAWrK,MAClBsI,QAASmO,GAAgB7V,GACzB/B,KAAM+B,EAAE/B,QAIJsf,GAAiB,SAACG,EAAUnY,GAC5BA,EAAOoY,cACXpY,EAAOoY,YAAc9c,IAAEgS,MAAMtN,EAAOK,QAAS,UAE9C,IAAIjE,EAAM,GACV,IAAK,IAAI8E,KAAKiX,EAAU,CACvB,IAAItc,EAASmE,EAAOoY,YAAYlX,GAChC,GAAKrF,IAAUA,EAAO8J,SAAtB,CAEA,IAAIxO,EAAUghB,EAASjX,GACH,UAAhBrF,EAAOnD,MAAuC,kBAAZvB,EACrCA,EAAUA,EAAQ0M,MAAM,WACA,SAAhBhI,EAAOnD,MAAsC,kBAAZvB,EACzCA,EAAUwU,KAAOxU,GAASkf,UAAU,IAAI/B,MAAQgC,SACxB,SAAhBza,EAAOnD,OAAiBvB,EAAUue,GAAeve,IAE1DmE,IAAEsI,IAAIxH,EAAKP,EAAOT,UAAWjE,IAE9B,OAAOua,IAAI2G,QAAQjc,EAAK4D,EAAO0Q,OAAQ,CAAE4H,YAAY,KAGzCC,GAAiB,SAACR,EAAO/X,EAAQwY,GAC7C,IAD8D,EAC1Dpc,EAAM,GADoD,cAE1C2b,GAF0C,IAE9D,2BAA2B,CAAC,IAAD,EAAlBU,EAAkB,QACtBC,EAAS,GADa,cAEP1Y,EAAOK,SAFA,IAE1B,2BAAmC,CAAC,IAA3BxE,EAA0B,QAClC,GAAK2c,IAAgB3c,EAAO8J,SAA5B,CACA,IAAIxO,EAAUmE,IAAEC,IAAIkd,EAAS5c,EAAOT,WAEhB,UAAhBS,EAAOnD,KAAkBvB,GAAW,GACf,SAAhB0E,EAAOnD,OACfvB,EAAUwU,KAAOxU,GAASkd,OAAO,eAElCqE,EAAO7c,EAAOgF,OAAS1J,IAVE,8BAY1BiF,EAAIwE,KAAK8X,IAdoD,8BAgB9D,OAAOtc,G,UCtEFuc,GAAU,CACf,CAAE9X,MAAO,uCAAUzF,UAAW,OAAQ+D,MAAO,KAC7C,CAAE0B,MAAO,6CAAWzF,UAAW,QAAS+D,MAAO,KAC/C,CAAE0B,MAAO,+DAAczF,UAAW,YACjC3B,KAAI,SAACgB,GAAD,mBAAC,eAAYA,GAAb,IAAgBrD,IAAKqD,EAAEW,eAEvBwd,GAAkB,SAAC9hB,GAAW,IAC3B4H,EAAoC5H,EAApC4H,QAASE,EAA2B9H,EAA3B8H,QAASwF,EAAkBtN,EAAlBsN,OAAQvD,EAAU/J,EAAV+J,MAC5BY,EAAa2C,EAAO3K,KAAI,SAACgB,EAAGyM,GAAJ,mBAAC,eAAezM,GAAhB,IAAmBrD,IAAK8P,OAEtD,OACC,kBAAC,KAAD,CACC4I,UAAQ,EACRpR,QAASA,EACTS,MAAO,IACP4Q,OAAQ,KACRC,SAAUpR,GAEV,kBAAC,GAAD,CAAQiC,MAAOA,EAAOhG,KAAM,kBAACge,GAAA,EAAD,CAAyBthB,MAAO,CAACuhB,MAAM,aAAgB5J,OAAK,IACxF,kBAAC,IAAD,CACC7O,QAASsY,GACTlX,WAAYA,EACZrB,YAAa,CAAEe,EAAG,KAClBO,YAAY,EACZmG,KAAK,YAYT+Q,GAAgB9e,aAAe,CAC9BsK,OAAQ,GACRvD,MAAO,oGAGO+X,UC/BTG,GAAsB,CAAErJ,QAAQ,EAAOG,aAAc,KAAM3N,MAAO,MAElE8W,GAAa,SAACliB,GAAW,IAAD,IACrBmiB,EAAwDniB,EAAxDmiB,QAASC,EAA+CpiB,EAA/CoiB,WAAYC,EAAmCriB,EAAnCqiB,UAAWC,EAAwBtiB,EAAxBsiB,WAAYxI,EAAY9Z,EAAZ8Z,QAC5CnN,EAAwC3M,EAAxC2M,KAAMwL,EAAkCnY,EAAlCmY,YAAaoK,EAAqBviB,EAArBuiB,iBACnBrZ,EAAwDlJ,EAAxDkJ,OAAQsZ,EAAgDxiB,EAAhDwiB,YAAarZ,EAAmCnJ,EAAnCmJ,WAAYG,EAAuBtJ,EAAvBsJ,YAAasE,EAAU5N,EAAV4N,MAC9C6U,EAA6CziB,EAA7CyiB,qBAAsBC,EAAuB1iB,EAAvB0iB,mBAJD,EAMavgB,mBAAS8f,IANtB,mBAMtBU,EANsB,KAMPC,EANO,OAOOzgB,mBAAS,IAPhB,mBAOtB0gB,EAPsB,KAOVC,EAPU,OAQe5b,GAAOib,GAAS,GAAM,GARrC,mBAQtBY,EARsB,KAQPC,EARO,KAQIvb,EARJ,OASIP,GAAOob,GATX,mBAStBW,EATsB,KASRC,EATQ,KAUvBC,EAAmBxb,KACnByb,EAAoBzb,KACpB0b,EAAU7Z,mBAAQ,kBAAM,IAAI8R,GAAWpS,EAAQ4Q,KAAU,CAC9D5Q,EACA4Q,IAEKwJ,EAAe9Z,mBACpB,kBAAMgZ,GAAe,IAAIlH,GAAWkH,EAAa1I,KACjD,CAAC0I,EAAa1I,IAGTzW,EAAW0E,IAAa,WAC7B6a,EAAiBX,IACjBkB,EAAiBtb,YAAW,MAGvBuB,EAASrB,IAAa,SAAC0Y,GAC5BmC,EAAiB,CAAEhK,QAAQ,EAAMG,aAAc0H,EAAKrV,MAAO,OAC3D+X,EAAiBtb,YAAW,MAGvBnF,EAAkBqF,IAAa,SAAC4Z,GACrC,IAAI4B,EAAYR,EAAcje,KAC9B2C,EAAQ8b,EAAU5gB,KAAI,SAACgB,GAAD,OAAQA,EAAE4H,MAAQoW,EAAQpW,IAAMoW,EAAUhe,SAG3DyS,EAAWrO,GAAY,uCAAC,WAAOjD,EAAMsS,EAASoM,GAAtB,eAAA7f,EAAA,yDAC7Bif,GAAiB,SAACjf,GAAD,mBAAC,eAAYA,GAAb,IAAgByH,MAAO,UADX,SAG5BtG,EAAO8V,IAAI2G,QAAQzc,EAAMue,EAAQzJ,QACjCyJ,EAAQ/N,SACN3S,KAAI,SAACgB,GAAD,OAAOA,EAAEgJ,QACblD,QAAO,SAAC9F,GAAD,MAAO,WAAW8T,KAAK9T,MAC9Bua,SAAQ,SAACva,GAAD,OAAOa,IAAEif,MAAM3e,EAAMnB,OAE3Bgf,EAAc/J,OATU,iCAUrByJ,EAAUvd,EAAM0e,GAVK,OAW3B9gB,EAAgB8gB,GAChBxY,GAAc,4HACdmY,EAAiBtb,YAAW,GAbD,yCAeJua,EAAW,CAACtd,IAfR,WAevB4e,EAfuB,OAgBtB3R,MAAMC,QAAQ0R,IAAqC,IAAtBA,EAAW5f,OAhBlB,0CAiBnBkH,GAAY,6KAjBO,QAkB3BlG,EAAOwG,GAASoY,EAAW,IAC3Bjc,EAAQ,CAAC3C,GAAF,mBAAWie,EAAcje,QAChCkG,GAAc,4HACdmY,EAAiBtb,YAAW,GArBD,0DAwB5B+a,GAAiB,SAACjf,GAAD,mBAAC,eAAYA,GAAb,IAAgByH,MAAM,EAAD,QACtCgM,EAAQuM,eAAc,GAzBM,0DAAD,2DA6BvBrgB,EAAWyE,GAAY,uCAAC,WAAOxH,GAAP,mBAAAoD,EAAA,sEAEtBmB,EAASie,EAATje,KACF8e,EAAc,IAAIC,IAAItjB,GACtBoR,EAAS7M,EAAK2E,QAAO,SAAC9F,GAAD,OAAOigB,EAAYE,IAAIngB,EAAE4H,QAJtB,SAKtB2X,EAASvR,GALa,OAM5BlK,EAAQ3C,EAAK2E,QAAO,SAAC9F,GAAD,OAAQigB,EAAYE,IAAIngB,EAAE4H,SANlB,gDAQ5BP,GAAA,MAR4B,yDAAD,uDAa7BpC,qBAAU,WACToa,EAAU,IACRpS,MAAK,SAAC9L,GAAD,OAAU2C,EAAQ3C,EAAKnC,IAAI2I,QAChCuF,OAAM,SAACzF,GAAD,OAAWJ,GAAYI,QAC7B,CAAClC,IAEJ,IAAM6a,EAAUhc,GAAY,uCAAC,WAAOic,GAAP,eAAArgB,EAAA,sEAE3BqgB,EAAQpJ,IAAI2G,QAAQyC,EAAOV,EAAa1J,QAFb,SAGVoJ,EAAUgB,GAHA,OAGvBlf,EAHuB,OAI3B2C,EAAQ3C,EAAKnC,IAAI2I,KAJU,gDAM3BN,GAAA,MAN2B,yDAAD,uDAUtBvE,GAAkBsB,IAAa,WACpC,GAAKgb,EAAcje,KAAnB,CACA,IAAImc,EAAQQ,GAAesB,EAAcje,KAAMue,GAAS,GACxDtF,GAAakD,EAAO,mBAEfta,GAAiBoB,IAAa,WACnC,GAAIwa,EACH,OAAOja,OAAO2b,KAAK1B,EAAkB,UAAU2B,QAChD,GAAKnB,EAAcje,KAAnB,CACA,IAAImc,EAAQQ,GAAesB,EAAcje,KAAKsO,MAAM,EAAG,GAAIiQ,GAC3DtF,GAAakD,EAAO,oBAEfva,GAAgBqB,GAAY,uCAAC,WAAOpE,GAAP,mBAAAA,EAAA,+EAEZ8b,GAAa9b,GAFD,cAE7BwgB,EAF6B,OAG7BC,EAAUpD,GAAiBmD,EAAUd,GAHR,SAIbjB,EAAWgC,EAASA,GAJP,UAI7BC,EAJ6B,OAK5BtS,MAAMC,QAAQqS,IAAYA,EAAQvgB,SAAWsgB,EAAQtgB,OALzB,0CAMzBkH,GAAY,6KANa,QAQjCvD,EAAQ,GAAD,mBAAK4c,EAAQ1hB,IAAI2I,KAAjB,YAA+ByX,EAAcje,QACpDkG,GAAc,oGATmB,qDAWlB,mBAAX,KAAE2B,KAX2B,0CAWO3B,GAAA,OAXP,QAYjC8X,EAAc,KAAExV,QAChB8V,EAAkBvb,YAAW,GAbI,0DAAD,uDAiBlC,OACC,oCACC,kBAAC,GAAD,CAAQ8E,KAAMA,EAAMwL,YAAaA,IAChCqK,GACA,kBAAC,GAAD,CACCtZ,OAAQoa,EACRlN,SAAU2N,EACV/V,kBAAkB,yDAClBuH,QAAM,IAGR,kBAAC,GAAD,iBACKwN,EADL,CAECzb,QAASyb,EAAczb,SAAW2b,EAAa3b,QAC/C4B,OAAQma,EACRb,YAAaA,EACbrZ,WAAYA,EACZC,OAAQiZ,GAAajZ,EACrB/F,SAAU+e,GAAc/e,EACxBC,SAAUgf,GAAchf,EACxBmD,iBACEgc,IAAD,UAAyBM,EAAcje,YAAvC,aAAyB,EAAoBhB,QAC1C2C,GACA,KAEJC,eACEgc,GAAsBN,EAAa1b,GAAgB,KAErDC,gBACE+b,GACDN,IACCG,IAAgB,UAAIQ,EAAcje,YAAlB,aAAI,EAAoBhB,SACtC6C,GACA,KAEJ2C,YAAaA,EACb5G,gBAAiBA,KAElB,kBAAC,GAAD,iBACKygB,EACAR,EAFL,CAGCzZ,OAAQma,EACRjN,SAAUA,EACVxI,MAAOA,KAER,kBAAC,GAAD,iBAAqBwV,EAArB,CAAwC9V,OAAQuV,OA8BnDX,GAAWlf,aAAe,CACzBshB,OAAQ,KACRlC,WAAY,KACZC,UAAW,KACXC,WAAY,KACZnK,YAAa,GACb7O,iBAAaiB,EACbpB,WAAY,GACZqZ,YAAa,KACbC,sBAAsB,EACtBC,oBAAoB,EACpBH,iBAAkB,KAClB3U,MAAO,GACPkM,SAAS,GAGKoI,UC7MTqC,GAAY,SAACvkB,GAAW,IACrB8H,EAA4C9H,EAA5C8H,QAASoB,EAAmClJ,EAAnCkJ,OAAQa,EAA2B/J,EAA3B+J,MAAOqM,EAAoBpW,EAApBoW,SAAUxI,EAAU5N,EAAV4N,MADd,EAEFzL,mBAAS,MAFP,mBAErBiJ,EAFqB,KAEdoZ,EAFc,KAItBtN,EAAS,uCAAG,WAAOpS,EAAMsS,EAASoM,GAAtB,SAAA7f,EAAA,6DACjB6gB,EAAS,MADQ,SAGhB1f,EAAO8V,IAAI2G,QAAQzc,EAAMoE,EAAO0Q,QAHhB,SAIVxD,EAAStR,EAAM0e,GAJL,OAKhBxY,GAAc,kIACdlD,IANgB,gDAQhB0c,EAAS,EAAD,IACRpN,EAAQuM,eAAc,GATN,yDAAH,0DAaf,OACC,kBAAC,GAAD,CACC/K,QAAQ,EACRhR,SAAS,EACTE,QAASA,EACToB,OAAQA,EACR0E,MAAOA,EACPiL,aAAc9O,EACdqB,MAAOA,EACPgL,SAAUc,KAabqN,GAAUvhB,aAAe,CACxB4K,MAAO,GACP7D,MAAO,M,mECpEK0a,GAAM,SAAC9gB,EAAG+gB,GAAJ,OAClBA,EAAQ/gB,EAAI,OAAWA,EAAEyX,WAAa,QAE1BuJ,GAAQ,SAAChhB,EAAG+gB,GAAJ,OACpBA,EAAQ/gB,EAAI,OAAWA,EAAEyX,WAAW3B,QAAQ,MAAO,QAAY,QAEnDmL,GAAU,SAACjhB,EAAG+gB,GAC1B,OAAIA,EAAc/gB,EACXA,EACL8V,QAAQ,cAAe,IACvBA,QAAQ,cAAe,IACvBA,QAAQ,QAAS,MACjBA,QAAQ,QAAS,KACjBA,QAAQ,QAAS,KACjBA,QAAQ,UAAW,IACnBA,QAAQ,UAAW,OAGToL,GAAW,SAAClhB,EAAG/B,GAC3B,IAEC,IAAI0D,EAAMwf,SAAS,wBAA0BnhB,EAAI,IAAvCmhB,GACV,OAAc,MAAPxf,EAAc3B,EAAI2B,EACxB,MAAOlF,GACR,MAAa,UAATwB,EAAyB+B,EAAEoJ,MAAM,WAC9BpJ,IAMIwD,GAAO,SAAC4d,EAAKL,GACzB,OAAKA,EAEEI,SACN,qFACCC,EACA,IAHKD,GAFYL,GAAIM,EAAKL,I,UC3BhBM,GAAoB,SAAChlB,GAAW,IAAD,EACTkO,eAA1ByD,EADmC,EACnCA,OAAQC,EAD2B,EAC3BA,cACVqT,EAAUC,KAAKC,UAAU3gB,IAAEsI,IAAF,eAAW6E,GAAU3R,EAAM2M,KAAM,OAKhE,OAJA/D,qBAAU,WACTgJ,EAAc5R,EAAM2M,KAAMsY,GAAS,KAEjC,CAACA,EAASjlB,EAAM2M,OACZ,kBAAC,KAAD,eAAOkC,UAAQ,GAAK7O,KAG5BglB,GAAkBD,IAAlB,mQCTA,IAkBaK,GAAc,SAACC,EAAQC,EAAUZ,GAC7C,IAAIpf,EAAM,GAEN1D,EAAO,SACP2jB,EAAe,GACfC,EAAS,GACb,OAAQH,EAAOnR,WACd,IAAK,YACJqR,EAAe,WACf,MACD,IAAK,8BACJ,IAAI5Q,EAAgB+P,EACjBM,GACAP,GAAIO,GAAkBD,IAAKL,GAC9BW,EAAM,aAAK1Q,iBAAkB0Q,GAC7B,MACD,IAAK,aACJE,EAAe,WACf,MACD,IAAK,aACJA,EAAe,aACf,MACD,IAAK,eACJA,EAAe,aACf,MACD,IAAK,sBACJF,EAAM,aAAK9V,YAAa,kCAAiB8V,GACzCG,EAAO1b,KAAK,CAAE6C,KAAM,UAAWxE,KAAM,CAACwc,GAAM,UAAWD,MACvDc,EAAO1b,KAAK,CAAE6C,KAAM,UAAWxE,KAAM,CAAC,0IACtC,MACD,IAAK,yBACJkd,EAAM,aAAK9V,YAAa,0CAAyB8V,GACjDG,EAAO1b,KAAK,CACX6C,KAAM,SACNxE,KAAM,CACLhB,GAAK,goBAWJud,MAIH,MACD,IAAK,WACJ9iB,EAAO,OACP,MACD,IAAK,SACL,IAAK,OACJA,EAAOyjB,EAAOnR,UACd,MACD,IAAK,2BACJtS,EAAO,QACP4jB,EAAO1b,KAAK,CAAE6C,KAAM,MAAOxE,KAAM,CAAC,KAClCkd,EAAM,2BACFA,GADE,IAEL3Q,eAAgB,CAAEzT,aAAc,IAChC2O,gBAAiBzI,GAChB,qEACAud,KAGF,MACD,IAAK,WACJc,EAAO1b,KAAK,CAAE6C,KAAM,QAASxE,KAAM,CAAC,IAAK,OACzCkd,EAAM,2BAAQA,GAAR,IAAgB3H,WAAY,CAAC,qBAAO,8BAC1C,MACD,IAAK,yBACJ2H,EAAM,2BACFA,GADE,IAELjU,UAAU,EACVG,WAAYpK,GACX,mFACAud,GAEDpT,eAAgB,QAChBzL,OAAQ,yBAETjE,EAAO,QACP,MACD,IAAK,kBACJyjB,EAAM,2BACFA,GADE,IAELjU,UAAU,EACVG,WAAYpK,GAAK,mQAQhBud,GAEDlT,eAAgBrK,GAAK,sBAAuBud,GAC5CpT,eAAgB,QAChBzL,OAAQ,yBAETjE,EAAO,QACP,MACD,IAAK,8BACJyjB,EAAM,2BACFA,GADE,IAELjU,UAAU,EACVG,WAAYpK,GAAK,kZAShBud,GAEDpT,eAAgB,QAChBzL,OAAQ,yBAETjE,EAAO,QACP,MACD,IAAK,qBACJyjB,EAAM,2BACFA,GADE,IAELjU,UAAU,EACVG,WAAYpK,GACX,mFACAud,GAEDpT,eAAgB,OAChBzL,OAAQ,SAMXP,EAAIwE,KAAK,CAAE6C,KAAM/K,GAAQ,CAAE+K,KAAM,QAASxE,KAAM,CAACkd,EAAOtiB,SAEpDsiB,EAAOI,SAASngB,EAAIwE,KAAK,CAAE6C,KAAM,aACjC0Y,EAAOzQ,cACVtP,EAAIwE,KAAK,CACR6C,KAAM,UACNxE,KAAM,CAAC0c,GAASQ,EAAOzQ,aAAchT,MAEvC0D,EAAMA,EAAI2R,OAAOuO,GAEjB,IAAInR,EAAO7P,IAAEuB,KAAKsf,EAAQ,CACzB,UACA,eACA,QACA,YACA,aACA,cACA,OACA,gBAiBD,OAfIA,EAAOK,cACVrR,EAAKK,eAAiBlQ,IAAEmhB,OAAOtR,EAAKK,eAAgB,CACnDzT,aAAc,MAEZokB,EAAOO,cAAavR,EAAKyI,UAAYuI,EAAOO,aAC5CL,IAAclR,EAAKH,UAAYqR,GAC/BD,EAAS1X,MAAOyG,EAAK2B,KAAO3B,EAAK2B,MAAQ,SACjC3B,EAAK2B,KAEbxR,IAAEuM,KAAKsD,IACV/O,EAAIwE,KAAK,CACR6C,KAAM,OACNxE,KAAM,CAACuc,EAAQrQ,EAAOoQ,GAAIS,KAAKC,UAAU9Q,OAGvCqQ,EAnMc,SAACmB,GACnB,IAD+B,EAC3BvgB,EAAMsV,IADqB,cAEfiL,GAFe,IAE/B,kCAASC,EAAT,QAAyBxgB,GAAM,EAAAA,GAAIwgB,EAAInZ,MAAR,oBAAkBmZ,EAAI3d,MAAQ,MAF9B,8BAG/B,OAAO7C,EAgMWygB,CAAWzgB,GA7LX,SAACugB,GACnB,IAD+B,EAC3BvgB,EAAM,MADqB,cAEfugB,GAFe,IAE/B,2BAAyB,CAAC,IAAjBC,EAAgB,QACpB3d,EAAO2d,EAAI3d,MAAQ,GACvB7C,GAAG,WAAQwgB,EAAInZ,KAAZ,YAAoBxE,EAAKxF,KAAI,SAACgB,GAAD,OAC/BqiB,aAASriB,GAAG8V,QAAQ,MAAO,OADzB,MAJ2B,8BAQ/B,OAAOnU,EAsLA2gB,CAAW3gB,ICrMf4gB,GAAS,KAuBAC,GAAa,SAACC,EAASC,EAAOC,GAG1C,IAFA,IAAIhhB,EAAM,GACN4gB,EAxBa,SAACI,GAClB,OAAIA,EAAa,IAAIC,KAAOD,IACvBJ,KAAQA,GAAS,IAAIK,KAAO/b,KAAKyF,WAC/BiW,IAqBMM,CAAUF,GACdlW,EAAI,EAAGA,EAAIiW,EAAOjW,IAAK,CAC/B,IAD+B,EAC3BqW,EAAW,GADgB,cAEZL,GAFY,IAE/B,2BAA4B,CAAC,IAApBf,EAAmB,QACvBvP,EAAO4Q,GAAerB,GACtBsB,EAAYT,EAAOpQ,EAAKnJ,MAAMjF,MAAMwe,EAAQpQ,EAAK3N,MAAQ,IAC7D3D,IAAEsI,IAAI2Z,EAAUpB,EAAO1Y,KAAMga,IALC,8BAO/BrhB,EAAIwE,KAAK2c,GAEV,OAAOnhB,GAGFohB,GAAiB,SAACrB,GACvB,OAAQA,EAAOnR,WACd,IAAK,aACL,IAAK,qBACJ,MAAO,CAAEvH,KAAM,SAAUxE,KAAM,CAAC,CAAEye,SAAU,WAC7C,IAAK,yBACL,IAAK,kBACL,IAAK,8BACJ,MAAO,CACNja,KAAM,UACNxE,KAAM,CACL,CACC,sEAIJ,IAAK,aACJ,MAAO,CAAEwE,KAAM,UAAWxE,KAAM,CAAC,CAAC,aAAc,eACjD,IAAK,eACJ,MAAO,CAAEwE,KAAM,SAChB,IAAK,sBACJ,MAAO,CAAEA,KAAM,UAAWxE,KAAM,CAAC,CAAC,QAAS,WAC5C,IAAK,yBACJ,MAAO,CACNwE,KAAM,UACNxE,KAAM,CAAC,CAAC,gBAAiB,mBAE3B,IAAK,WACJ,MAAO,CAAEwE,KAAM,QAChB,IAAK,SACJ,MAAO,CAAEA,KAAM,UAAWxE,KAAM,CAAC,CAAE0e,IAAK,MACzC,IAAK,OACJ,MAAO,CAAEla,KAAM,OAAQxE,KAAM,IAC9B,IAAK,2BACJ,MAAO,CAAEwE,KAAM,UAAWxE,KAAM,CAAC,CAAC,CAAC,QAAS,CAAC,WAC9C,IAAK,WACJ,MAAO,CAAEwE,KAAM,UAAWxE,KAAM,CAAC,CAAC,IAAK,OACxC,IAAK,YACJ,MAAO,CAAEwE,KAAM,aAChB,IAAK,8BACJ,MAAO,CAAEA,KAAM,UAAWxE,KAAM,CAAC,CAAC,QACnC,QACC,MAAO,CAAEwE,KAAM,UC9ELma,GAAO,SAACC,GAAD,OAAQ,IAAIpH,SAAQ,SAACC,GAAD,OAASlR,WAAWkR,EAAKmH,OAE3D/M,GAAW,SAAXA,EAAYC,GACjB,GAAoB,kBAATA,EAAmB,OAAOA,EAErC,IAAI3U,EAAM,GACV,IAAK,IAAIhF,KAAO2Z,EAAM3U,EAAIhF,GAAOmkB,GAAIzK,EAASC,EAAK3Z,KACnD,OAAOmkB,GAAI,cAAD,OAAeS,KAAKC,UAAU7f,EAAK,KAAM,GAAzC,OAGE0hB,GAAY,SAACZ,EAASd,EAAU2B,GAC5C,IADuD,EACnD3hB,EAAM,GAD6C,cAEpC8gB,GAFoC,IAEvD,gCAASf,EAAT,QACC7gB,IAAEsI,IAAIxH,EAAK+f,EAAO1Y,KAAMyY,GAAYC,EAAQC,KAHU,8BAIvD,OAAOV,GAAQ5K,GAAS1U,KAGZ4hB,GAAc,SAACd,EAASd,EAAU2B,GAAY,IAClDE,EAA0D7B,EAA1D6B,UAAWC,EAA+C9B,EAA/C8B,UAAWC,EAAoC/B,EAApC+B,UAAW7E,EAAyB8C,EAAzB9C,YAAa1I,EAAYwL,EAAZxL,QAGlDxU,EAAM,CAAEqH,KAAM2Y,EAAS3Y,MAAQ,eAE/Bsa,EACH3hB,EAAI6c,QAAUsC,GAAG,sBAAC,sBAAA9gB,EAAA,sEACXmjB,GAAK,KADM,gCAEVX,GAAWC,EAAS,IAFV,2CAGfa,IAEH3hB,EAAI4D,OAASub,GAAI,UAAU,GACvBjC,IAAald,EAAIkd,YAAciC,GAAIuC,GAAUxE,EAAa,MAC9Dld,EAAI6c,QAAUsC,GAAI,mDAGf0C,IACH7hB,EAAI8c,WAAajb,GAAK,yCAA0C8f,IAC7DI,IACH/hB,EAAIgd,WAAanb,GAAK,+BAAgC8f,IACnDG,IAAW9hB,EAAI+c,UAAYlb,GAAK,+BAAgC8f,IAGpE,IAAIK,EAAS9iB,IAAEgT,KAAK8N,EAAU,CAC7B,uBACA,qBACA,mBACA,cACA,UAMD,OAJA9gB,IAAEmhB,OAAOrgB,EAAKgiB,GACdhiB,EAAIwU,QAAUA,IAAW,EACrBxU,EAAIsI,QAAOtI,EAAIsI,MAAQtI,EAAIsI,MAAMb,MAAM,YAEvCka,EAAe3hB,EACZsf,GAAQM,KAAKC,UAAU7f,EAAK,KAAM,KAoD7BiiB,GAAiB,SAACnB,EAASd,GACvC,OAlDsB3hB,EAkDR,uFAAD,OA7Cc,SAACyiB,GAC5B,IADwC,EAClC9gB,EAAM,IAAIue,IADwB,cAErBuC,GAFqB,IAExC,2BAA4B,CAAC,IAApBf,EAAmB,QACF,gCAArBA,EAAOnR,UACV5O,EAAIkiB,IAAI,8BACqB,oBAArBnC,EAAOnR,WACf5O,EAAIkiB,IAAI,iDACRliB,EAAIkiB,IACH,oFAEDliB,EAAIkiB,IAAI,qCACuB,gCAArBnC,EAAOnR,YACjB5O,EAAIkiB,IAAI,4CACRliB,EAAIkiB,IAAI,sCACRliB,EAAIkiB,IAAI,2BACRliB,EAAIkiB,IAAI,sCAf8B,8BAkBxC,OAAKliB,EAAIyL,KACF,KAAO,YAAIzL,GAAKJ,KAAK,MADN,GA4BKuiB,CAAarB,GAD3B,6GAvBgB,SAACA,GAC9B,IAD0C,EACpC9gB,EAAM,IAAIue,IAD0B,cAEvBuC,GAFuB,IAE1C,2BAC0B,oBADE,QAChBlS,WACV5O,EAAIkiB,IAAJ,+PAJwC,8BAkB1C,OAAKliB,EAAIyL,KACF,KAAO,YAAIzL,GAAKJ,KAAK,MADN,GASQwiB,CAAetB,GAJhC,8BAMGY,GAAUZ,EAASd,GANtB,iCDrGiB,SAACc,EAASC,GACxC,IADkD,EAC9CsB,EAAU,GADoC,cAE/BvB,GAF+B,IAElD,2BAA4B,CAAC,IAApBf,EAAmB,QACvBvP,EAAO4Q,GAAerB,GACtBld,EAAO2N,EAAK3N,KACb6d,aAASlQ,EAAK3N,MACbsR,QAAQ,SAAU,IAClBA,QAAQ,SAAU,IACnB,GACHjV,IAAEsI,IAAI6a,EAAStC,EAAO1Y,KAAM8X,GAAI,UAAD,OAAW3O,EAAKnJ,KAAhB,YAAwBxE,EAAxB,QATkB,8BAWlD,MAAM,oCAAN,OAA2Cke,EAA3C,yBAAiEzB,GAChEM,KAAKC,UAAUwC,IADhB,mBCkGkBC,CAAgBxB,EAAS,GAR9B,mDAWGc,GAAYd,EAASd,GAXxB,oEAjDTuC,IAAQlkB,EAAI,IAAMA,EAAI,KACnBmkB,KAASvK,OAAO5Z,EAAG,CAAEokB,OAAQ,QAASC,QAAS,CAACC,QAFlC,IAACtkB,EAAGkkB,G,UCtDpBK,GAAoBtN,IAAIuN,OAAO,CACpCxb,KAAMiO,IAAIwN,SAASjU,WAAW1J,IAAI,GAClC1H,MAAO6X,IAAIwN,SAASjU,WAAW1J,IAAI,GACnCyJ,UAAW0G,IAAIwN,SACbjU,WACAa,MACA,WACA,qBACA,yBACA,kBACA,8BACA,QACA,aACA,aACA,eACA,sBACA,yBACA,2BACA,8BACA,WACA,SACA,OACA,aAEFqT,WAAYzN,IAAIC,MAChB7E,KAAM4E,IAAI0N,SACV/Y,YAAaqL,IAAIwN,SACjBxT,aAAcgG,IAAIwN,SAClB3C,QAAS7K,IAAI2N,UACb1Z,SAAU+L,IAAI2N,UACd5S,UAAWiF,IAAI2N,UACf7C,YAAa9K,IAAI2N,UACjB3C,YAAahL,IAAI0N,SACjB1L,aAAchC,IAAI2N,UAClBC,WAAY5N,IAAI2N,UAChBhjB,eAAgBqV,IAAI2N,UACpB9iB,cAAemV,IAAI2N,YAGdE,GAAgB7N,IAAI8N,QACxBC,MAAMT,GAAmBtN,IAAIC,MAAM+N,SACnCC,OAAO,QACHC,GAAgBlO,IAAI8N,QAAQC,MAAMT,IAAmBW,OAAO,QAuB5D7O,IArBiBY,IAAIuN,OAAO,CACjCxb,KAAMiO,IAAIwN,SACVjQ,YAAayC,IAAIwN,SACjBjB,UAAWvM,IAAI2N,UACfnB,UAAWxM,IAAI2N,UACflB,UAAWzM,IAAI2N,UACf/F,YAAaiG,GACbhG,qBAAsB7H,IAAI2N,UAC1B7F,mBAAoB9H,IAAI2N,UACxBhG,iBAAkB3H,IAAIwN,SACtBxa,MAAOgN,IAAIwN,WAWK,SAAXpO,EAAYC,GACjB,GAAIW,IAAIW,SAAStB,GAAO,OAAOA,EAC/B,IAAI3U,EAAM,GACV,IAAK,IAAIhF,KAAO2Z,EAAM3U,EAAIhF,GAAO0Z,EAASC,EAAK3Z,IAC/C,OAAOsa,IAAIuN,OAAO7iB,KAGNyjB,GAAa,SAAC3C,EAASd,GACnC,IADgD,EAC5ChgB,EAAM,GADsC,cAE7B8gB,GAF6B,IAEhD,gCAASf,EAAT,QACC7gB,IAAEsI,IAAIxH,EAAK+f,EAAO1Y,KAAMyY,GAAYC,EAAQC,GAAU,KAHP,8BAIhD,OAAOtL,GAAS1U,IAGJ0jB,GAAM,SAAChpB,GAAW,IACtBomB,EAAsBpmB,EAAtBomB,QAASd,EAAatlB,EAAbslB,SAEXxf,EAAS0D,mBAAQ,WACtB,IAAK8b,EAAU,OAAO,KAEtB,IAAMhgB,EAAM4hB,GAAYd,EAASd,GAAU,GAI3C,OAHAhgB,EAAI4D,OAAS6f,GAAW3C,EAASd,GAC7BA,EAAS9C,cACZld,EAAIkd,YAAcuG,GAAWzD,EAAS9C,YAAa,KAC7Cld,IACL,CAAC8gB,EAASd,IAEb,OAAKc,EAAQtiB,OACRwhB,EAME,kBAAC,GAAcxf,GAJpB,gCACC,kBAAC,KAAD,OAJyB,oJAa7BkjB,GAAIhmB,aAAe,CAClBojB,QAAS,CACR,CACCzZ,KAAM,YACN5J,MAAO,YACP0iB,SAAS,EACT7Q,aAAc,IACd8Q,aAAa,IAGfJ,SAAU,MCrHX,IAAM2D,GAAiB,SAACjpB,GAAW,IACzBkpB,EAA4BlpB,EAA5BkpB,KAAM9C,EAAsBpmB,EAAtBomB,QAASd,EAAatlB,EAAbslB,SAEvB,GAAI4D,IAAStpB,EAAW,CACtB,IAAMupB,EAAW5B,GAAenB,EAASd,GACzC,OAAO,kBAAC,EAAD,CAAkBpjB,KAAMinB,IAGjC,OAAO,kBAAC,GAAD,CAAW/C,QAASA,EAASd,SAAUA,KAShD2D,GAAejmB,aAAe,CAC5BkmB,KAAMtpB,GAGOqpB,U,kDC1BTG,GAAa,WACjB,OAAO5e,KAAK6e,MAAsB,IAAhB7e,KAAKyF,UAAoB,KAGhCqZ,GAAkB,WAE7B,MADiB,CAAC,eAAKC,IAAN,eAAuBA,IAAvB,eAAwCA,KACzC5mB,KAAI,SAACwY,GACnB,IAAMqO,EAAKJ,KACX,OAAO,2BACFjO,GADL,IAEExO,KAAM,QAAU6c,EAChBzmB,MAAO,SAAWymB,QAKXC,GAAe,SAACC,GAC3B,IAAMC,EAAG,eAAQJ,IACXC,EAAKJ,KAMX,OALAO,EAAIhd,KAAO4c,GAAS5c,KAAT,WAAoB6c,GAC/BG,EAAI5mB,MAAQwmB,GAASxmB,MAAT,WAAqBymB,GAC7BI,IAAOnlB,IAAIilB,EAAa,SAC1BC,EAAI3T,KAAO4T,IAAOnlB,IAAIilB,EAAa,cAE9BC,GAGIE,GAAwB,WAEnC,MADiB,CAAC,eAAKC,KACPnnB,KAAI,SAACwY,GACnB,IAAMqO,EAAKJ,KACX,OAAO,2BACFjO,GADL,IAEExO,KAAM,QAAU6c,EAChBzmB,MAAO,SAAWymB,QAKXO,GAA0B,WACrC,IAAMJ,EAAG,eAAQG,IACXN,EAAKJ,KAGX,OAFAO,EAAIhd,KAAOmd,GAAend,KAAf,WAA0B6c,GACrCG,EAAI5mB,MAAQ+mB,GAAe/mB,MAAf,WAA2BymB,GAChCG,GAGIJ,GAAW,CACtB5c,KAAM,OACN5J,MAAO,QACPmR,UAAW,QACXmU,WAAY,CAAC,SACb9Y,YAAa,GACbqF,aAAc,GACdoB,KAAM,GACNyP,SAAS,EACT5W,UAAU,EACV8G,WAAW,EACX+P,aAAa,EACbE,YAAa,GACbhJ,cAAc,EACd4L,YAAY,EACZwB,iBAAiB,EACjBvkB,eAAe,GAGJqkB,GAAiB,CAC5Bnd,KAAM,OACN5J,MAAO,QACPmR,UAAW,QACX3E,YAAa,IAGF0a,GAAsB,CACjC,2BACA,qBACA,yBACA,kBACA,8BACA,WACA,+BAGWC,GAAqB,CAChCC,SAAU,aACVtL,KAAM,aACN,aAAc,4BACd,aAAc,aACd,eAAgB,kBAChB,yBAA0B,gBAC1B,sBAAuB,QACvByJ,OAAQ,aAGG8B,GAAe,CAAC,UAAW,WAAY,YAAa,eAEpDC,GAAgB,CAC3B,eACA,aACA,iBACA,iBAGWC,GAAY,CACvB,CAAEhe,EAAG,SACL,CAAEA,EAAG,YACL,CAAEA,EAAG,YACL,CAAEA,EAAG,UACL,CAAEA,EAAG,QACL,CAAEA,EAAG,aACL,CACEA,EAAG,SACHD,EAAG,CACD,CAAEC,EAAG,eACL,CAAEA,EAAG,mBACL,CAAEA,EAAG,YACL,CAAEA,EAAG,0BAGT,CACEA,EAAG,SACHD,EAAG,CACD,CAAEC,EAAG,OACL,CAAEA,EAAG,OACL,CAAEA,EAAG,SACL,CAAEA,EAAG,mBACL,CAAEA,EAAG,kBAGT,CAAEA,EAAG,WAAYD,EAAG,CAAC,CAAEC,EAAG,sBAAwB,CAAEA,EAAG,sBAG5Cie,GAAiB,CAC5B,QACA,WACA,SACA,WACA,QCvIWC,GAAW,CACtBlpB,QAAS,QAGEmpB,GAAW,CACtBnpB,QAAS,UASEopB,GAAe,CAC1B1pB,QAAS,OACTL,cAAe,SACfkD,OAAQ,cAQG8mB,GAAQ,CACnBtN,SAAU,IACVxc,YAAa,OACbI,aAAc,QAGH2pB,GAAiB,CAC5B/mB,OAAQ,UAGGgnB,GAAW,CACtB5pB,aAAc,QCrCH6pB,GAAyB,SAAClpB,GAErC,OAD0BqoB,GAAoBc,WAAU,SAAC5V,GAAD,OAAOA,IAAMvT,MACzC,GAGjBopB,GAAgB,SAAC5e,GAC5B,OAAK2F,MAAMC,QAAQ5F,GAGZA,EAAQzJ,KAAI,SAACwY,GAAD,MAAW,CAAEpY,MAAOoY,EAAMxW,MAAOwW,MAF3C,ICsTI8P,GAvSO,SAACjrB,GAAW,IAAD,MACvBkrB,EAAkClrB,EAAlCkrB,aAAcC,EAAoBnrB,EAApBmrB,gBADS,EAEThpB,oBAAS,kBDYA,WAE/B,IADA,IAAMiK,EAAU,CAAC,CAAErJ,MAAO,UAAW4B,MAAO,YACnCyL,EAAI,EAAGA,GAAK,GAAIA,IACvBhE,EAAQtC,KAAK,CAAE/G,MAAOqN,EAAI,QAASzL,MAAOyL,IAE5C,OAAOhE,ECjB8Bgf,MAA9BC,EAFwB,oBAIzBC,EAAa,WAEjB,OADiB,eAAQJ,IAcrBK,EAAgB,SAACjrB,EAAKqE,GAC1B,IAAM6mB,EAAcF,IACpBE,EAAYlrB,GAAOqE,EACP,SAARrE,EAIJ6qB,EAAgBK,GAHdC,EAAcD,EAAa7mB,IAMzB8mB,EAAgB,SAACC,EAAOC,GACP,YAAjBA,IACFD,EAAM1V,KAAO2V,EACbD,EAAM9d,MAAQ,IAGhB,IADA,IAAMA,EAAQ,GACLwC,EAAI,EAAGA,GAAKub,EAAcvb,IACjCxC,EAAM9D,KAAK,CAAEyF,YAAY,cAAD,OAAgBa,GAAKzL,MAAM,cAAD,OAAgByL,KAEpEsb,EAAM9d,MAAN,UAAkBA,GAClBud,EAAgBO,IAkBZE,EAA2B,SAAC/oB,EAAOvC,EAAKqE,GAC5C,GAAKrE,EAAL,CAGA,IAAMkrB,EAAcF,IACfE,EAAYhJ,YAAYtZ,OAAOrG,KAGpC2oB,EAAYhJ,YAAYtZ,OAAOrG,GAAOvC,GAAOqE,EAC7CwmB,EAAgBK,MAuBlB,OACE,kBAAC,KAAD,KACE,kBAAC,IAAWxT,MAAZ,CAAkBU,MAAO,GAAzB,kBACA,kBAAC,KAAD,CACEjY,MAAOoB,GACP0N,YAAY,OACZ5K,MAAK,OAAEumB,QAAF,IAAEA,OAAF,EAAEA,EAAcve,KACrBtG,SAAU,SAACH,GAAD,OAAWqlB,EAAc,OAAQrlB,EAAMI,OAAO3B,UAE1D,kBAAC,KAAD,CACElE,MAAOoB,GACP0N,YAAY,cACZ5K,MAAK,OAAEumB,QAAF,IAAEA,OAAF,EAAEA,EAAc/S,YACrB9R,SAAU,SAACH,GAAD,OAAWqlB,EAAc,cAAerlB,EAAMI,OAAO3B,UAEjE,yBAAKlE,MAAOoB,IACTkQ,MAAMC,QAAQlS,IACbA,EAAS6C,KAAI,SAACwY,EAAMtY,GAAP,OACX,kBAAC,KAAD,CACEvC,IAAKuC,EAAMuY,WACX3a,MAAO,CACLoD,OAAkB,IAAVhB,EAAc,oBAAsB,gBAE9CgpB,QAASX,EAAa/P,GACtB9U,SAAU,kBAxGG,SAACzE,GACxB,IAAM4pB,EAAcF,IAChBE,EAAY5pB,UACP4pB,EAAY5pB,GAEnB4pB,EAAY5pB,IAAQ,EAEtBupB,EAAgBK,GAiGUM,CAAiB3Q,KAEhCA,MAGP,kBAAC,KAAD,MACA,6BACE,kBAAC,IAAWnD,MAAZ,CAAkBU,MAAO,GAAzB,mBACA,kBAAC,IAAD,KACE,kBAAC,IAAWjJ,KAAZ,CAAiBhP,MAAO,CAAEa,QAAS,uBAAnC,cAGCyQ,MAAMC,QAAQqZ,IACb,kBAAC,KAAD,CACEzW,cAA0B,OAAZsW,QAAY,IAAZA,OAAA,EAAAA,EAAclV,OAAQqV,EAAY,GAAG1mB,MACnDlE,MAAO,CAAEW,KAAM,GACfiF,SAAU,SAAC1B,GAAD,OAAW4mB,EAAc,OAAQ5mB,KAE1C0mB,EAAY1oB,KAAI,SAACopB,EAAIC,GAAL,OACf,kBAAC,KAAO5W,OAAR,CAAe9U,IAAK0rB,EAAG5Q,WAAYzW,MAAOonB,EAAGpnB,OAC1ConB,EAAGhpB,YAMd,yBAAKtC,MAAO,CAAEwrB,WAAY,SACvBla,MAAMC,QAAN,OAAckZ,QAAd,IAAcA,OAAd,EAAcA,EAActd,QAC3Bsd,EAAatd,MAAMjL,KAAI,SAACwY,EAAMtY,GAAP,OACrB,kBAAC,IAAD,CAAKvC,IAAKuC,EAAMuY,WAAY3a,MAAO,CAAEa,QAAS,aAC5C,kBAAC,IAAD,CAAKb,MAAO,CAAEa,QAAS,qBAAsB+G,MAAO,KAClD,kBAAC,IAAWoH,KAAZ,oBAA0B5M,EAAQ,KAEpC,kBAAC,IAAD,CAAKzB,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAa4L,EAAK5L,YAClB5K,MAAOwW,EAAKxW,MACZ0B,SAAU,SAACH,GAAD,OA5GH,SAACrD,EAAO8B,GACjC,IAAM6mB,EAAcF,IACpBE,EAAY5d,MAAM/K,GAAO8B,MAAQA,EACjCwmB,EAAgBK,GA0GIU,CAAmBrpB,EAAOqD,EAAMI,OAAO3B,iBAQvD,kBAAC,KAAD,MACA,6BACE,kBAAC,IAAWqT,MAAZ,CAAkBU,MAAO,GAAzB,eACA,kBAAC,KAAD,CACEmT,SAAS,UAAAX,EAAa1I,mBAAb,eAA0BwB,SAAS,EAC5C3d,SAAU,kBApHS,WAC3B,IAAMmlB,EAAcF,IAChBE,EAAYhJ,YAAYwB,QAC1BwH,EAAYhJ,YAAYtZ,OAAxB,YAAqC2gB,OAEvC2B,EAAYhJ,YAAYwB,OAASwH,EAAYhJ,YAAYwB,MACzDmH,EAAgBK,GA8GQW,KAFlB,uBAMC,UAAAjB,EAAa1I,mBAAb,eAA0BwB,QACzB,oCACE,yBAAKvjB,MAAO,CAAEa,QAAS,eACpBsoB,IAAOnlB,IAAP,UAAWymB,EAAa1I,mBAAxB,aAAW,EAA0BtZ,OAAQ,QAC5C,kBAAC,KAAD,CAAUkjB,iBAAkB,CAAC,KAAMC,WAAS,GACzCnB,EAAa1I,YAAYtZ,OAAOvG,KAAI,SAAC2pB,EAAIC,GAAL,OACnC,kBAAC,KAASC,MAAV,CACElsB,IAAKisB,EAAGnR,WACRqR,OAAQH,EAAG3f,KACX+f,MACE,kBAAC,IAAD,CACE9qB,KAAK,SACLI,QAAM,EACN7B,QAAS,SAAC+F,IAvGR,SAACrD,GAAW,IAAD,EAC/B2oB,EAAcF,IACf1B,IAAOnlB,IAAP,UAAW+mB,EAAYhJ,mBAAvB,aAAW,EAAyBtZ,OAAQ,OAI/CsiB,EAAYhJ,YAAYtZ,OAAOyjB,OAAO9pB,EAAO,IAH7C2oB,EAAYhJ,YAAYwB,OAAQ,EAChCwH,EAAYhJ,YAAYtZ,OAAxB,YAAqC2gB,OAIvCsB,EAAgBK,GAgGUoB,CAAoBL,GACpBrmB,EAAM2mB,oBALV,WAYF,kBAAC,IAAD,CAAKpsB,MAAOoB,IACV,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,OACZ5K,MAAO2nB,EAAG3f,KACVtG,SAAU,SAACH,GAAD,OACR0lB,EACEW,EACA,OACArmB,EAAMI,OAAO3B,WAKrB,kBAAC,IAAD,CAAKmM,KAAK,MACV,kBAAC,IAAD,CAAK1P,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,QACZ5K,MAAO2nB,EAAGvpB,MACVsD,SAAU,SAACH,GAAD,OACR0lB,EACEW,EACA,QACArmB,EAAMI,OAAO3B,YAMvB,kBAAC,IAAD,CAAKlE,MAAOoB,IACV,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,IAAD,KACE,kBAAC,IAAWqO,KAAZ,CACEhP,MAAO,CAAEa,QAAS,uBADpB,aAKCyQ,MAAMC,QAAQuY,KACb,kBAAC,KAAD,CACE3V,aAAc2V,GAAe,GAC7B9pB,MAAO,CAAEW,KAAM,GACfiF,SAAU,SAAC1B,GAAD,OACRinB,EACEW,EACA,YACA5nB,KAIH4lB,GAAe5nB,KAAI,SAACmqB,EAAIC,GAAL,OAClB,kBAAC,KAAO3X,OAAR,CACE9U,IAAKysB,EAAG3R,WACRzW,MAAOmoB,GAENA,SAOb,kBAAC,IAAD,CAAKhc,KAAK,MACV,kBAAC,IAAD,CAAK1P,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,cACZ5K,MAAO2nB,EAAG/c,YACVlJ,SAAU,SAACH,GACT0lB,EACEW,EACA,cACArmB,EAAMI,OAAO3B,kBAWjC,6BACE,kBAAC,IAAD,CACE5C,OAAK,EACLH,KAAK,UACLmC,KAAM,kBAACE,EAAA,EAAD,MACNxD,MAAOoB,GACP1B,QAhNS,WACvB,IAAMqrB,EAAcF,IACpBE,EAAYhJ,YAAYtZ,OAAxB,sBACKsiB,EAAYhJ,YAAYtZ,QAD7B,gBAEO6gB,QAEPoB,EAAgBK,KAqMJ,mB,UCpCDwB,GA3OI,SAAChtB,GAAW,IACrBitB,EAA0CjtB,EAA1CitB,UAAWC,EAA+BltB,EAA/BktB,aAAchC,EAAiBlrB,EAAjBkrB,aADL,EAGD/oB,oBAAS,kBAAMipB,GAAoBhB,OAAvD+C,EAHqB,sBAIAhrB,oBAAS,kBACnCipB,GAAoBf,OADf+C,EAJqB,oBAQ5BxkB,qBAAU,WACJpE,IAAEC,IAAF,OAAMymB,QAAN,IAAMA,OAAN,EAAMA,EAActd,MAAO,QAC7Byf,MAGD,CAACnC,IAEJ,IAAMI,EAAa,WAEjB,OADa,YAAO2B,IAIhBI,EAAmB,WACvB,IAAIC,EAAO,YAAOL,GACblb,MAAMC,QAAQsb,KAGnBA,EAAUA,EAAQ3qB,KAAI,SAACwY,GACrB,IAAMoS,EAAO,eAAQpS,GAUrB,OATKoS,EAAQvX,OACXuX,EAAQvX,KAAOxR,IAAEC,IAAIymB,EAAatd,MAAO,cAGzC2f,EAAQvX,OACPkV,EAAatd,MAAM4f,MAAK,SAACnO,GAAD,OAAOA,EAAE1a,QAAU4oB,EAAQvX,UAEpDuX,EAAQvX,KAAOxR,IAAEC,IAAIymB,EAAatd,MAAO,cAEpC2f,KAETL,EAAaI,KAgBT/B,EAAgB,SAAC1oB,EAAOvC,EAAKqE,GAAW,IAAD,EAC3C,GAAKoN,MAAMC,QAAQib,IAAe3sB,EAAlC,CAGA,IAAIgtB,EAAUhC,IACTgC,EAAQzqB,KAAU,UAACyqB,EAAQzqB,UAAT,aAAC,EAAgB4qB,eAAentB,MAGvDgtB,EAAQzqB,GAAOvC,GAAOqE,EACV,cAARrE,GAAuB8qB,GAA6BzmB,KACtD2oB,EAAQzqB,GAAO+R,aAAe,IAEhCsY,EAAa,YAAII,OAGbI,EAAiB,SAACptB,EAAKuC,EAAOuJ,GAClC,IAEMuhB,EFnFkB,SAAC9qB,EAAOuJ,EAASkhB,EAASM,GACpD,IAAKppB,IAAEC,IAAI2H,EAAS,OAAQ,CAC1B,IAAMyhB,EAAgB,GAQtB,OAPAD,EAAY1P,SAAQ,SAAC/C,GACnB0S,EAAc1S,IAAQ,KAExBmS,EAAQzqB,GAAR,2BACMyqB,EAAQzqB,IAAUyqB,EAAQzqB,IAC3BgrB,GAEEP,EAET,IAAMQ,EAAiBtpB,IAAEgS,MAAMhS,IAAEupB,WAAWH,EAAaxhB,IAQzD,OAPAwhB,EAAY1P,SAAQ,SAAC/C,GACf2S,EAAe3S,GACjBmS,EAAQzqB,GAAOsY,IAAQ,EAEvBmS,EAAQzqB,GAAOsY,IAAQ,KAGpBmS,EE+DmBlC,CAAmBvoB,EAAOuJ,EAFpCkf,IACO,UAARhrB,EAAkB8pB,GAAeC,IAE9C6C,EAAa,YAAIS,KAGnB,OACE,6BACE,kBAAC,KAAD,KACGnpB,IAAEC,IAAIwoB,EAAW,QAChB,kBAAC,KAAD,CAAUb,iBAAkB,CAAC,KAAMC,WAAS,GACzCY,EAAUtqB,KAAI,SAACwY,EAAMtY,GAAP,OACb,kBAAC,KAAS2pB,MAAV,CACElsB,IAAKuC,EAAMuY,WACXqR,QFxDU9f,EEwDcwO,EAAKxO,KFxDbqJ,EEwDmBmF,EAAKnF,KFvDjDA,GAAiB,IAATA,EAGP,GAAN,OAAUrJ,EAAV,aAAmBqJ,EAAnB,KAFSrJ,GEuDK+f,MACE,kBAAC,IAAD,CACE9qB,KAAK,SACLI,QAAM,EACN7B,QAAS,SAAC+F,IAhDN,SAACrD,GACrB,GAAKkP,MAAMC,QAAQib,GAGnB,GAAKzoB,IAAEC,IAAIwoB,EAAW,OAAtB,CAIA,IAAMK,EAAUhC,IAChBgC,EAAQX,OAAO9pB,EAAO,GACtBqqB,EAAaI,QALXJ,EAAa,CAAC,eAAKzD,GAAY,OAACyB,QAAD,IAACA,OAAD,EAACA,EAActd,UA4C9BogB,CAAcnrB,GACdqD,EAAM2mB,oBALV,WAYF,kBAAC,IAAD,CAAKpsB,MAAOoB,IACV,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,OACZ5K,MAAOwW,EAAKxO,KACZtG,SAAU,SAACH,GAAD,OACRqlB,EAAc1oB,EAAO,OAAQqD,EAAMI,OAAO3B,WAIhD,kBAAC,IAAD,CAAKmM,KAAK,MACV,kBAAC,IAAD,CAAK1P,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,QACZ5K,MAAOwW,EAAKpY,MACZsD,SAAU,SAACH,GAAD,OACRqlB,EAAc1oB,EAAO,QAASqD,EAAMI,OAAO3B,YAKnD,kBAAC,IAAD,CAAKlE,MAAOoB,IACV,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,IAAD,KACE,kBAAC,IAAWqO,KAAZ,CACEhP,MAAO,CAAEa,QAAS,uBADpB,aAKA,kBAAC,KAAD,CACE2N,YAAU,EACVgf,YAAY,EACZ1hB,WAAY,CAAExJ,MAAO,IAAK4B,MAAO,IAAKiB,SAAU,KAChDwG,QAASke,GACT3lB,MAAOwW,EAAKkN,WACZhiB,SAAU,SAAC1B,GACT4mB,EAAc1oB,EAAO,aAAc8B,GACnC4mB,EAAc1oB,EAAO,YAAa8B,EAAMO,KAAK,WAKrD,kBAAC,IAAD,CAAK4L,KAAK,MACV,kBAAC,IAAD,CAAK1P,KAAK,KACR,kBAAC,KAAD,CACEmO,YACE,iBACC2a,GAAmB/O,EAAKjH,WACrB,OAASgW,GAAmB/O,EAAKjH,WACjC,IAENrF,SAAUuc,GAA6BjQ,EAAKjH,WAC5CvP,MAAOwW,EAAKvG,aACZvO,SAAU,SAACH,GAAD,OACRqlB,EAAc1oB,EAAO,eAAgBqD,EAAMI,OAAO3B,YAK1D,kBAAC,IAAD,CAAKlE,MAAOoB,IACV,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,KAAD,CACEmO,YAAY,cACZ5K,MAAOwW,EAAK5L,YACZV,SAA6B,aAAnBsM,EAAKjH,UACf7N,SAAU,SAACH,GAAD,OACRqlB,EAAc1oB,EAAO,cAAeqD,EAAMI,OAAO3B,WAIvD,kBAAC,IAAD,CAAKmM,KAAK,MACV,kBAAC,IAAD,CAAK1P,KAAK,KACPoD,IAAEC,IAAF,OAAMymB,QAAN,IAAMA,OAAN,EAAMA,EAActd,MAAO,QAC1B,kBAAC,IAAD,KACE,kBAAC,IAAW6B,KAAZ,CACEhP,MAAO,CAAEa,QAAS,uBADpB,QAKA,kBAAC,KAAD,CACEsT,aACGpQ,IAAE0pB,MAAM/S,EAAKnF,MAEVkV,EAAatd,MAAM,GAAGjJ,MADtBwW,EAAKnF,KAGXvV,MAAO,CAAEW,KAAM,GACfuD,MAAOwW,EAAKnF,MAAQkV,EAAatd,MAAM,GAAGjJ,MAC1C0B,SAAU,SAAC1B,GAAD,OACR4mB,EAAc1oB,EAAO,OAAQ8B,KAG9BumB,EAAatd,MAAMjL,KAAI,SAACopB,EAAIC,GAAL,OACtB,kBAAC,KAAO5W,OAAR,CAAe9U,IAAK0rB,EAAG5Q,WAAYzW,MAAOonB,EAAGpnB,OAC1ConB,EAAGpnB,OAAH,eAAoBqnB,WAQnC,kBAAC,KAASmC,MAAV,CACE/hB,QAAS+gB,GAAoB,GAC7B9mB,SAAU,SAACuF,GAAD,OAAY8hB,EAAe,QAAS7qB,EAAO+I,MAEvD,kBAAC,KAAD,CAAShK,KAAK,eACd,kBAAC,IAAD,CAAKnB,MAAO,CAAEQ,aAAc,SAC1B,kBAAC,IAAD,CAAK6P,KAAK,MACR,kBAAC,KAAD,CACElP,KAAK,SACL2N,YAAY,cACZ5K,MAAOwW,EAAKyK,YACZvf,SAAU,SAACH,GAAD,OACRqlB,EAAc1oB,EAAO,cAAeqD,EAAMI,OAAO3B,YAKzD,kBAAC,KAASwpB,MAAV,CACE/hB,QAASghB,GAAqB,GAC9B/mB,SAAU,SAACuF,GAAD,OAAY8hB,EAAe,SAAU7qB,EAAO+I,OF9L/C,IAACe,EAAMqJ,SG9C1BoY,GAAgB,SAACpuB,GAAW,IACxBkpB,EAASlpB,EAATkpB,KACFmF,EAAa7pB,IAAEuB,KAAF,eAAa/F,GAASA,GAAU,CAAC,UAAY,GAEhE,OAAIkpB,IAASrpB,EAET,yBAAKY,MAAOoB,IACV,kBAAC,GAAkBwsB,IAKvB,yBAAK5tB,MAAOoB,IACV,kBAAC,GAAqBwsB,KAa5BD,GAAcprB,aAAe,CAC3BkmB,KAAMrpB,GAGOuuB,U,oBCtCTE,GAAa,gBAGNC,GAAkB,CAC7BvtB,QAAS,OACTL,cAAe,SACf0H,MAAO,OACPmmB,OAAQ,OACR5tB,SAAU,KAGC6tB,GAAiB,CAC5BrtB,KAAM,EACNJ,QAAS,OACT0tB,eAAgB,gBAChBrmB,MAAO,QAGIsmB,GAAqB,CAChCH,OAAQ,OACRnmB,MAAO,EACPumB,OAAQ,cAGGC,GAAqB,CAChCC,gBAAiB,QACjBxtB,QAAS,OACT4P,WAAY,EACZjQ,aAAc,EACdI,aAAc,EACd0tB,OAAO,aAAD,OAAeT,IACrB9sB,SAAU,YAGCwtB,GAAsB,CACjCF,gBAAiBR,IAGNW,GAAuB,CAClCH,gBAtCkB,WCSdI,GAAY,IAIZC,GAAY,SAACnvB,GAAW,IAE1BovB,EAOEpvB,EAPFovB,SACAC,EAMErvB,EANFqvB,UACAC,EAKEtvB,EALFsvB,eACAC,EAIEvvB,EAJFuvB,KACAC,EAGExvB,EAHFwvB,UACAC,EAEEzvB,EAFFyvB,YACAC,EACE1vB,EADF0vB,eAEIC,EAAgB1pB,mBAChB2pB,EAAe3pB,mBAXM,EAYS9D,oBAAS,GAZlB,mBAYpB0tB,EAZoB,KAYRC,EAZQ,OAayB3tB,qBAbzB,mBAapB4tB,EAboB,KAaAC,EAbA,OAciB7tB,qBAdjB,mBAcpB8tB,EAdoB,KAcJC,EAdI,OCZA,WAAO,IAAD,EACT/tB,mBAAS,CAAC,EAAG,IADJ,mBAC1B4O,EAD0B,KACpBof,EADoB,KAUjC,OARAC,2BAAgB,WACd,SAASC,IACPF,EAAQ,CAAC7nB,OAAOgoB,YAAahoB,OAAOC,aAItC,OAFAD,OAAOioB,iBAAiB,SAAUF,GAClCA,IACO,kBAAM/nB,OAAOkoB,oBAAoB,SAAUH,MACjD,IACItf,EDiBgB0f,GAAhBC,EAfoB,sBAgBOvuB,oBAAS,GAhBhB,mBAgBpBwuB,EAhBoB,KAgBTC,EAhBS,KAkB3BhoB,qBAAU,WAKR,OAJAioB,SAASN,iBAAiB,YAAaO,GACvCD,SAASN,iBAAiB,YAAaQ,GACvCF,SAASN,iBAAiB,UAAWS,GAE9B,WACLH,SAASL,oBAAoB,YAAaM,GAC1CD,SAASL,oBAAoB,YAAaO,GAC1CF,SAASL,oBAAoB,UAAWQ,OAI5CpoB,qBAAU,YACU,OAAd8mB,QAAc,IAAdA,OAAA,EAAAA,EAAgBuB,aAAcN,GAChCC,GAAa,KAEd,CAACD,EAAWjB,IAEf,IAaMoB,EAAc,SAAC1wB,GACfyvB,GACFzvB,EAAE8P,iBAEJghB,EAAO9wB,EAAE+wB,UAGLJ,EAAc,SAAC3wB,GACdA,GAGL8wB,EAAO9wB,EAAEgxB,QAAQ,GAAGD,UAGhBH,EAAY,WAChBhB,OAAsBzlB,GACtBulB,GAAc,IAGVoB,EAAS,SAACC,GACd,GAAKA,GAGDtB,GAAcI,GAAkBF,EAAoB,CACtD,IAAMsB,EAAepB,EAAiBkB,EAAUpB,EAEhD,GADAC,EAAsBmB,GAClBE,EAAenC,GAEjB,YADAgB,EAAkBhB,IAGpB,GAAIS,EAActvB,QAAS,CACzB,IAAMixB,EAAiB3B,EAActvB,QAAQkxB,YAC7C,GAAIF,EAAeC,EAAiBpC,GAElC,YADAgB,EAAkBoB,EAAiBpC,IAIvCgB,EAAkBmB,KAYtB,OACE,yBAAKjrB,IAAKupB,EAAelvB,MAAOoB,IAC9B,yBACEuE,IAAKwpB,EACLnvB,MAAK,2BACAoB,IADA,IAEHwG,MAAO4nB,GAAkB,OACrBS,GAAgB,CAClBlC,OAAQkC,EA7GI,MAiHhB,yBAAKjwB,MAAO,CAAE+tB,OAAQ,KAAOe,GAC5BE,IAAgB5vB,GACf,kBAAC,IAAD,CACEY,MAAO,CACL+wB,WAAY,SACZ3tB,OAAQ,wBACR2qB,OAAQ,MAGK,OAAdkB,QAAc,IAAdA,OAAA,EAAAA,EAAgBuB,aACf,kBAACQ,GAAA,EAAD,CACEC,aAAa,UACbjxB,MAAO,CAAEkxB,SAAU,QAGtB,OAACjC,QAAD,IAACA,OAAD,EAACA,EAAgBuB,aAChB,kBAACW,GAAA,EAAD,CACEF,aAAa,UACbjxB,MAAO,CAAEkxB,SAAU,MAGvB,0BAAMlxB,MAAO,CAAEoxB,YAAa,WAA5B,qBACC,OAACnC,QAAD,IAACA,OAAD,EAACA,EAAgBuB,aAChB,kBAAC,IAAD,CACExwB,MAAO,CAAEyQ,WAAY,IACrBtP,KAAK,UACLI,QAAM,EACN7B,QAAS,kBAAMywB,GAAcD,KAE5BA,EAAY,aAAe,eAKpC,yBACElwB,MAAK,aACHc,SAAU,OACVitB,OAAQ,QACJkC,GAAgB,CAClBoB,UAAWpB,GAzDjBjB,IAAgB5vB,EACXkyB,IAFWC,QA8Db5C,GAEFK,IAAgB5vB,GACf,yBAAKY,MAAO,CAAE+tB,OAAQ,GAAIvC,WAAY,IAAMuD,IAGhD,yBAAK/uB,MAAOoB,GAA2BowB,YA3HlB,SAAC/rB,GACnBA,IAGL8pB,EAAsB9pB,EAAMirB,SACvBtB,GACHC,GAAc,IAEXG,GAAkBL,EAAavvB,SAClC6vB,EAAkBN,EAAavvB,QAAQkxB,iBAmHvC,yBACE9wB,MAAK,uCACCmvB,EAAavvB,SAAW,CAC1BmuB,OAAQkC,EAtKI,KAwKVpB,GAAkBA,GACnB4C,IAGL,8BACIvB,GAAatB,EACdsB,GACC,oCACE,wBAAIlwB,MAAO,CAAEuhB,MAAO,UAApB,gBACA,0BAAMvhB,MAAO,CAAEuhB,MAAO,QAAS2P,SAAU,KAAzC,OACGjC,QADH,IACGA,OADH,EACGA,EAAgBrkB,cAoBjC8jB,GAAUnsB,aAAe,CACvBssB,eAAgB,KAChBC,KAAM,MAGOJ,UEnNTgD,GAAe,CAAC,QAwDTC,GAAuB,SAAC/M,EAAQgN,GAC3C,OAAKtgB,MAAMC,QAAQqT,IAAYtT,MAAMC,QAAQqgB,GAG9BhN,EAAO1iB,KAAI,SAACwY,EAAMtY,GAC/B,IAAI8mB,EAAG,eAAQxO,GAWf,OAVAwO,EAAI3T,KA5DS,SAACpI,EAAOtH,GACvB,IAAMgsB,EAAY1kB,EAAMmd,WAAU,SAAC5P,GAAD,OAAUA,EAAKxW,QAAU2B,KAC3D,OAAIgsB,EAAY,EACP,EAEFA,EAuDMC,CAASF,EAAclX,EAAKnF,MAClCmF,EAAKpY,QACR4mB,EAAI5mB,MAAJ,gBAAqBF,IAElBsY,EAAKxO,OACRgd,EAAIhd,KAAJ,eAAmB9J,IAEjBsY,EAAKyK,cACP+D,EAAI/D,YA9CY,SAAC4M,GACrB,IACE,OAAOC,SAASD,EAAU,IAC1B,MAAOpnB,GACP,MAAO,IA0CasnB,CAAcvX,EAAKyK,cA5DtB,SAAC+D,GACpB,IAAKA,EACH,OAAOA,EAET,cAA2Bpc,OAAO0H,QAAQ0U,GAA1C,eAAgD,CAAC,IAAD,sBAApCrpB,EAAoC,KAA/BqE,EAA+B,KAC1CA,GAAmB,IAAVA,EACXglB,EAAIrpB,GAAOqE,SAEJglB,EAAIrpB,GAGf,OAAOqpB,EAmDEgJ,CAAahJ,MAdbtE,GAmBEqK,GAAiB,SAACrK,GAC7B,IXT6Be,EWSvBsJ,GXTuBtJ,EWSSf,EXTGyD,GAAc1U,SAASgS,IWU1Dhb,EAAQwe,IAAOnlB,IAAIirB,EAAgB,iBACzC,OAAK9F,IAAOnlB,IAAI2G,EAAO,eAMhB,EAAC,EAHQA,EAAMzI,KAAI,SAACwY,GACzB,MAAM,KAAN,OAAYA,EAAK9P,QAAjB,SAEqBnG,KAAK,MALnB,EAAC,EAAM,KCmFH0tB,GAjJM,WAAO,IAAD,EACuBzwB,mBAAS,CACvD9B,QAAST,IAFc,mBAClBizB,EADkB,KACAC,EADA,OAI+B3wB,mBAAS,CAC/D9B,QAASR,IALc,mBAIlBkzB,EAJkB,KAIIC,EAJJ,OAOS7wB,oBAAS,kBAAMmnB,QAPxB,mBAOlB2D,EAPkB,KAOPC,EAPO,OAQe/qB,oBAAS,iBAAO,CACtDwK,KAAM,kBACNwa,WAAW,EACXC,WAAW,EACXC,WAAW,EACX7E,YAAa,CACXwB,OAAO,EACP9a,OAAO,YAAK2gB,OAEdjc,MAAO,OAjBgB,mBAQlBsd,EARkB,KAQJC,EARI,OAmByBhpB,qBAnBzB,mBAmBlB8wB,EAnBkB,KAmBCC,EAnBD,OAoBa/wB,qBApBb,mBAoBlBgxB,EApBkB,KAoBLC,EApBK,OAqB6BjxB,mBAAS,CAC7D8uB,YAAY,EACZ5lB,QAAS,KAvBc,mBAqBlBgoB,EArBkB,KAqBGC,EArBH,KA0BzB1qB,qBAAU,WACJghB,IAAOnlB,IAAIymB,EAAc,SAC3BqI,MAED,CAACrI,IAEJtiB,qBAAU,WACJghB,IAAOnlB,IAAIwoB,EAAW,QACxBuG,MAED,CAACvG,IAEJ,IAqBMsG,EAAqB3J,IAAO6J,UArBV,WACtB,IAAMC,ED1BkC,SAACA,GAAa,IAAD,IACvD,IAAKA,EACH,OAAOA,EAET,IAAMC,EAAU,eAAQD,GAClBE,EAAW,UAAOzB,IAYxB,GAXIvI,IAAOnlB,IAAIkvB,EAAW/lB,MAAO,SAC/B+lB,EAAW/lB,MAAQ+lB,EAAW/lB,MAC3BjL,KAAI,SAACwY,EAAMtY,GAAP,OAAiBsY,EAAKxW,OAAL,qBAA4B9B,EAAQ,MACzDqC,KAAK,MAELyuB,EAAW/lB,OAAUgc,IAAOnlB,IAAIkvB,EAAW/lB,MAAO,QACrDgmB,EAAY9pB,KAAK,UAEf,UAAC6pB,EAAWnR,mBAAZ,aAAC,EAAwBwB,QAC3B4P,EAAY9pB,KAAK,eAEnB,UAAI6pB,EAAWnR,mBAAf,aAAI,EAAwBwB,MAAO,CACjC,IAAM9a,EAAM,YAAOyqB,EAAWnR,YAAYtZ,QAC1CyqB,EAAWnR,YAActZ,EAE3B,OAAO0gB,IAAO7jB,KAAK4tB,EAAYC,GCKbxI,CAAmCF,GACnDgI,EAAqBQ,KA1CL,KA8DZF,EAAsB5J,IAAO6J,UAjBR,WACzB,IAAMvqB,EAASkiB,GAA2B6B,EAA3B,OAAsC/B,QAAtC,IAAsCA,OAAtC,EAAsCA,EAActd,OACnEwlB,EAAelqB,GAFgB,MAGDkiB,GAAqBliB,GAHpB,mBAGxB+nB,EAHwB,KAGZ5lB,EAHY,KAI/BioB,EAAuB,CAAErC,aAAY5lB,cAjDrB,KA+ElB,OACE,yBAAK5K,MAAOoB,IACV,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKT,KAAK,KACR,kBAAC,IAAW4W,MAAZ,CACEU,MAAO,EACPjY,MAAO,CAAEe,SAAU,WAAYqyB,KAAM,OAAQC,IAAK,IAFpD,6BAOF,kBAAC,IAAD,CAAK1yB,KAAK,KACR,kBAAC,EAAD,CACEnB,YAAa4yB,EACb3yB,eAAgB4yB,MAItB,kBAAC,GAAD,CACEpD,eAAgB2D,EAChB5D,YAAasD,EAAqB1yB,QAClCkvB,KACE,kBAAC,EAAD,CACEtvB,YAAa8yB,EACb7yB,eAAgB8yB,EAChBtxB,YAxCe,WACvBypB,EAAgB,CACdxe,KAAM,kBACNwa,WAAW,EACXC,WAAW,EACXC,WAAW,EACX7E,YAAa,CACXwB,OAAO,EACP9a,OAAO,YAAK2gB,OAEdjc,MAAO,KAETsf,GAAa,kBAAM5D,WA+BfkG,UACE,kBAAC,IAAD,CACEztB,OAAK,EACLH,KAAK,UACLmC,KAAM,kBAACE,EAAA,EAAD,MACN9D,QA5DS,WACjB,GAAK4R,MAAMC,QAAQib,GAAnB,CAGA,IAAMK,EAAO,YAAOL,GACpBK,EAAQxjB,KAAR,eAAkB2f,GAAY,OAACyB,QAAD,IAACA,OAAD,EAACA,EAActd,SAC7Csf,EAAaI,MAkDP,aASF8B,SACE,oCACE,kBAAC,GAAD,CACElG,KAAM6J,EAAqB1yB,QAC3B4sB,UAAWA,EACXC,aAAcA,EACdhC,aAAcA,EACdC,gBAAiBA,KAIvBkE,UACE,kBAAC,GAAD,CACEnG,KAAM2J,EAAiBxyB,QACvBilB,SAAU2N,EACV7M,QAAS+M,GAAelG,IAG5BqC,eACEuD,EAAiBxyB,UAAYT,EACzBiC,GACAA,OCrJCkyB,GANM,WACnB,OAAO,kBAAC,GAAD,OCcTC,IAASpvB,OAAO,kBAAC,GAAD,MAASisB,SAASoD,eAAe,W","file":"static/js/main.03fe9d97.chunk.js","sourcesContent":["export const MENU = {\n  ui: \"UI\",\n  code: \"Code\",\n};\n\nexport const MENU_FORM = {\n  form: \"Fields\",\n  setting: \"Table Settings\",\n};\n\nexport const SETTINGS = [\n  \"canCreate\",\n  \"canUpdate\",\n  \"canDelete\",\n  \"disableExcelDownload\",\n  \"disableExcelUpload\",\n];\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Menu } from \"antd\";\nimport { MENU } from \"../constants\";\n\nconst MenuView = (props) => {\n  const { currentMenu, setCurrentMenu } = props;\n\n  const onEventClick = (e) => {\n    setCurrentMenu({ current: e.key });\n  };\n\n  return (\n    <Menu\n      onClick={onEventClick}\n      selectedKeys={[currentMenu.current]}\n      mode=\"horizontal\"\n      style={{ float: \"right\", flexDirection: 'row-reverse', minWidth: 150, marginRight: 5 }}\n    >\n      <Menu.Item key={MENU.code}>{MENU.code}</Menu.Item>\n      <Menu.Item key={MENU.ui}>{MENU.ui}</Menu.Item>\n    </Menu>\n  );\n};\n\nMenuView.propTypes = {\n  currentMenu: PropTypes.object.isRequired,\n  setCurrentMenu: PropTypes.func.isRequired,\n};\n\nexport default MenuView;\n","export const rowMenu = {\n  display: \"flex\",\n  marginBottom: \"1rem\",\n};\n\nexport const button = {\n  marginRight: \"1rem\",\n};\n\nexport const rightPanel = {\n  flex: 1,\n  borderRadius: 8,\n  marginRight: 6,\n  marginBottom: 6,\n  padding: \"2rem 1rem\",\n  overflow: \"auto\",\n  position: \"relative\",\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button } from \"antd\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"./styles\";\n\nconst MenuFormView = (props) => {\n  const { currentMenu, setCurrentMenu, onClearForm } = props;\n\n  const onEventClick = (type) => {\n    setCurrentMenu({ current: type });\n  };\n\n  return (\n    <div style={styles.rowMenu}>\n      <Button\n        type=\"primary\"\n        ghost={currentMenu?.current !== MENU_FORM.form}\n        block\n        onClick={() => onEventClick(MENU_FORM.form)}\n      >\n        {MENU_FORM.form}\n      </Button>\n      <Button\n        type=\"primary\"\n        ghost={currentMenu?.current !== MENU_FORM.setting}\n        block\n        style={styles.button}\n        onClick={() => onEventClick(MENU_FORM.setting)}\n      >\n        {MENU_FORM.setting}\n      </Button>\n      <Button type=\"dashed\" danger onClick={onClearForm}>\n        Reset\n      </Button>\n    </div>\n  );\n};\n\nMenuFormView.propTypes = {\n  currentMenu: PropTypes.object.isRequired,\n  setCurrentMenu: PropTypes.func.isRequired,\n  onClearForm: PropTypes.func.isRequired,\n};\n\nexport default MenuFormView;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CopyBlock, dracula } from \"react-code-blocks\";\n\nconst RenderCodeBlocks = (props) => {\n  const { text } = props;\n  const [language] = useState(\"jsx\");\n  if (!props) {\n    return null;\n  }\n\n  return <CopyBlock text={text} language={language} theme={dracula} />;\n};\n\nRenderCodeBlocks.propTypes = {\n  text: PropTypes.string,\n};\n\nexport default RenderCodeBlocks;\n","import { Button, Space } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nconst RowMenu = (props) => {\n\tconst { buttons, record, updateDataAtRow } = props;\n\n\treturn (\n\t\t<Space>\n\t\t\t{buttons.map((action, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<Button\n\t\t\t\t\t\t{...action}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\taction.onClick\n\t\t\t\t\t\t\t\t? () => action.onClick(record, updateDataAtRow)\n\t\t\t\t\t\t\t\t: NOOP\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{action.label}\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t})}\n\t\t</Space>\n\t);\n};\n\nRowMenu.propTypes = {\n\tbuttons: PropTypes.array.isRequired,\n\trecord: PropTypes.any.isRequired,\n\tupdateDataAtRow: PropTypes.func,\n};\n\nRowMenu.defaultProps = {\n\tupdateDataAtRow: null,\n};\n\nconst NOOP = () => {};\n\nexport default RowMenu;\n","import { Button, Space, Dropdown } from \"antd\";\nimport { DeleteOutlined, PlusOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport { useCallback } from \"react\";\nimport React from 'react';\n\nconst TableMenu = (props) => {\n\tconst { deleteButtonLabel, createButtonLabel, selectedRows } = props;\n\tconst { onCreate, onDelete, setSelectedRows, otherMenu } = props;\n\n\tconst onDelete2 = useCallback(async () => {\n\t\tawait onDelete(selectedRows);\n\t\tsetSelectedRows([]);\n\t}, [selectedRows, onDelete, setSelectedRows]);\n\n\treturn (\n\t\t<div style={{ textAlign: \"right\", margin: 10 }}>\n\t\t\t<Space>\n\t\t\t\t{!!selectedRows.length && onDelete && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"danger\"\n\t\t\t\t\t\tonClick={onDelete2}\n\t\t\t\t\t\ticon={<DeleteOutlined />}\n\t\t\t\t\t>\n\t\t\t\t\t\t{deleteButtonLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{!selectedRows.length && onCreate && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\tonClick={onCreate}\n\t\t\t\t\t\ticon={<PlusOutlined />}\n\t\t\t\t\t>\n\t\t\t\t\t\t{createButtonLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t\t{otherMenu && (\n\t\t\t\t\t<Dropdown overlay={otherMenu} placement=\"bottomRight\">\n\t\t\t\t\t\t<Button>เมนูอื่นๆ</Button>\n\t\t\t\t\t</Dropdown>\n\t\t\t\t)}\n\t\t\t</Space>\n\t\t</div>\n\t);\n};\n\nTableMenu.propTypes = {\n\tselectedRows: PropTypes.array.isRequired,\n\tsetSelectedRows: PropTypes.func.isRequired,\n\tcreateButtonLabel: PropTypes.string,\n\tdeleteButtonLabel: PropTypes.string,\n\totherMenu: PropTypes.node,\n\tonCreate: PropTypes.func,\n\tonDelete: PropTypes.func,\n};\nTableMenu.defaultProps = {\n\tcreateButtonLabel: \"สร้าง\",\n\tdeleteButtonLabel: \"ลบ\",\n\tonCreate: null,\n\tonDelete: null,\n\totherMenu: null,\n};\n\nexport default TableMenu;\n","import _ from \"lodash\";\n\nconst sorter = function (a, b) {\n  var { dataIndex } = this;\n  return _.get(a, dataIndex) > _.get(b, dataIndex) ? -1 : 1;\n};\n\nconst onFilter = function (value, record) {\n  var { dataIndex, render } = this;\n  if (render) return render(record[dataIndex]) === value;\n  return record[dataIndex] === value;\n};\n\nexport const addFilter = (data) => {\n  return (column) => {\n    var filters = _.chain(data)\n      .map(column.dataIndex.join(\".\"))\n      .map(column.render || _.identity)\n      .uniq()\n      .sortBy()\n      .map((a) => ({ text: a, value: a }))\n      .value();\n    var ans = { ...column };\n    if (!column.disableSorting) ans.sorter = sorter.bind(ans);\n    if (filters.length < 50 && filters.length && !column.disableFilter) {\n      ans.onFilter = onFilter.bind(ans);\n      ans.filters = filters;\n    }\n    return ans;\n  };\n};\n","import { useRef } from \"react\";\nimport { Button } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport _ from \"lodash\";\nimport React from 'react';\n\nconst FileUploader = (props) => {\n\tconst { handleFile, children, accept } = props;\n\n\tconst props2 = _.omit(props, [\"handleFile\", \"children\"]);\n\tconst hiddenFileInput = useRef(null);\n\tconst handleClick = (event) => hiddenFileInput.current.click();\n\tconst handleChange = (event) => handleFile(event.target.files[0]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button {...props2} onClick={handleClick}>\n\t\t\t\t{children}\n\t\t\t</Button>\n\t\t\t<input\n\t\t\t\taccept={accept}\n\t\t\t\ttype=\"file\"\n\t\t\t\tref={hiddenFileInput}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tstyle={{ display: \"none\" }}\n\t\t\t/>\n\t\t</>\n\t);\n};\nFileUploader.propTypes = {\n\thandleFile: PropTypes.func.isRequired,\n\tchildren: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.node),\n\t\tPropTypes.node,\n\t]).isRequired,\n\taccept: PropTypes.string.isRequired /*example: \".xlsx\"*/,\n};\n\nexport default FileUploader;\n","import {\n\tDownloadOutlined,\n\tUploadOutlined,\n\tEyeOutlined,\n} from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport { Menu, Button } from \"antd\";\nimport FileUpload from \"../shared/file_upload\";\nimport React from 'react';\n\nconst OtherMenu = (props) => {\n\tconst { onDownloadExcel, onUploadExcel, onExampleExcel } = props;\n\tconst { downloadExcelLabel, uploadExcelLabel, exampleExcelLabel } = props;\n\n\treturn (\n\t\t<Menu>\n\t\t\t{onDownloadExcel && (\n\t\t\t\t<Menu.Item key=\"1\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={onDownloadExcel}\n\t\t\t\t\t\ticon={<DownloadOutlined />}\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{downloadExcelLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t\t{onUploadExcel && (\n\t\t\t\t<Menu.Item key=\"2\">\n\t\t\t\t\t<FileUpload\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\thandleFile={onUploadExcel}\n\t\t\t\t\t\ticon={<UploadOutlined />}\n\t\t\t\t\t\taccept=\".xlsx\"\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{uploadExcelLabel}\n\t\t\t\t\t</FileUpload>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t\t{onExampleExcel && (\n\t\t\t\t<Menu.Item key=\"3\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tonClick={onExampleExcel}\n\t\t\t\t\t\ticon={<EyeOutlined />}\n\t\t\t\t\t\tblock\n\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{exampleExcelLabel}\n\t\t\t\t\t</Button>\n\t\t\t\t</Menu.Item>\n\t\t\t)}\n\t\t</Menu>\n\t);\n};\nOtherMenu.propTypes = {\n\tonDownloadExcel: PropTypes.func,\n\tonUploadExcel: PropTypes.func,\n\tonExampleExcel: PropTypes.func,\n\tdownloadExcelLabel: PropTypes.string,\n\tuploadExcelLabel: PropTypes.string,\n\texampleExcelLabel: PropTypes.string,\n};\nOtherMenu.defaultProps = {\n\tonDownloadExcel: null,\n\tonUploadExcel: null,\n\tonExampleExcel: null,\n\tdownloadExcelLabel: \"ดาวน์โหลด Excel\",\n\tuploadExcelLabel: \"อัพโหลด Excel\",\n\texampleExcelLabel: \"ตัวอย่าง Excel อัพโหลด\",\n};\n\nexport default OtherMenu;\n","import { useState, useRef, useEffect } from \"react\";\n\nexport const useAPI = (func, loadingInit, manualComplete) => {\n\tconst [apiState, setApiState] = useState({\n\t\tloading: !!loadingInit,\n\t\tdata: null,\n\t});\n\tconst setData = (data) => setApiState({ loading: false, data });\n\n\tconst doRun = async function (a, b) {\n\t\tsetApiState((a) => ({ loading: true, data: a.data }));\n\t\ttry {\n\t\t\tvar data = await func.apply(null, arguments);\n\t\t\tif (!manualComplete) setData(data);\n\t\t\treturn data;\n\t\t} catch (e) {\n\t\t\tsetApiState((a) => ({ loading: false, data: null }));\n\t\t\tthrow e;\n\t\t}\n\t};\n\n\treturn [apiState, doRun, setData];\n};\n\nexport const useModal = () => {\n\tconst [visible, setVisible] = useState(false);\n\tconst onClose = () => setVisible(false);\n\treturn { visible, onClose, setVisible };\n};\n\nexport const usePersistFn = (fn) => {\n\tconst fnRef = useRef(fn);\n\tfnRef.current = fn;\n\n\tconst persistFn = useRef();\n\tif (!persistFn.current)\n\t\tpersistFn.current = function (...args) {\n\t\t\treturn fnRef.current.apply(this, args);\n\t\t};\n\n\treturn persistFn.current;\n};\n\nexport const useMaxWidth = (width) => {\n\tconst [isMatch, setMatch] = useState(window.innerWidth <= width);\n\tconst listener = (a) => setMatch(a.matches);\n\t/* eslint-disable react-hooks/exhaustive-deps */\n\tuseEffect(() => {\n\t\tvar mediaQuery = window.matchMedia(`(max-width: ${width}px)`);\n\t\tmediaQuery.addListener(listener);\n\t\treturn () => mediaQuery.removeListener(listener);\n\t}, []);\n\treturn isMatch;\n};\n","import { Table, Row } from \"antd\";\nimport { useState, useMemo } from \"react\";\nimport { EditOutlined } from \"@ant-design/icons\";\nimport PropTypes from \"prop-types\";\nimport RowMenu from \"./row_menu\";\nimport TableMenu from \"./table_menu\";\nimport { addFilter } from \"./logic\";\nimport OtherMenu from \"./other_menu\";\nimport { useMaxWidth } from \"../shared/hook\";\nimport React from \"react\";\n\nconst TableComp = (props) => {\n  const { data, schema, rowButtons, onEdit, paginationSize } = props;\n  const { onDelete, onCreate, tableScroll, updateDataAtRow } = props;\n  const { loading, onDownloadExcel, onUploadExcel, onExampleExcel } = props;\n\n  const [selectedRows, setSelectedRows] = useState([]);\n\n  const columns = useMemo(() => {\n    var ans = schema.columns\n      .map(addFilter(data))\n      .filter((column) => !column.cellHide);\n\n    var rowButtons2 = [...rowButtons];\n    if (onEdit)\n      rowButtons2.unshift({ icon: <EditOutlined />, onClick: onEdit });\n\n    if (rowButtons2.length) {\n      const render = (text, record) => (\n        <RowMenu\n          buttons={rowButtons2}\n          record={record}\n          updateDataAtRow={updateDataAtRow}\n        />\n      );\n      const width = 60 * rowButtons2.length + 20;\n      ans.push({ title: \"เมนู\", width, render });\n    }\n\n    return ans;\n  }, [schema, data, rowButtons, onEdit, updateDataAtRow]);\n\n  const rowSelection = !!onDelete && {\n    selectedRowKeys: selectedRows,\n    onChange: setSelectedRows,\n  };\n\n  const smallScreen = useMaxWidth(575);\n  const tableScroll2 = smallScreen ? { x: true, y: true } : tableScroll;\n  const tableStyle = smallScreen\n    ? undefined\n    : { minWidth: Math.min(columns.length * 130, 800) };\n\n  return (\n    <>\n      <div style={{ opacity: loading ? 0.5 : 1 }}>\n        <TableMenu\n          selectedRows={selectedRows}\n          setSelectedRows={setSelectedRows}\n          onDelete={onDelete}\n          onCreate={onCreate}\n          otherMenu={\n            !onDownloadExcel && !onUploadExcel && !onExampleExcel ? null : (\n              <OtherMenu\n                onDownloadExcel={onDownloadExcel}\n                onUploadExcel={onUploadExcel}\n                onExampleExcel={onExampleExcel}\n              />\n            )\n          }\n        />\n      </div>\n      <Row>\n        <Table\n          loading={loading}\n          columns={columns}\n          dataSource={data}\n          pagination={{ defaultPageSize: paginationSize }}\n          scroll={tableScroll2}\n          rowSelection={rowSelection}\n          rowKey=\"_id\"\n          style={tableStyle}\n        />\n      </Row>\n    </>\n  );\n};\n\nTableComp.propTypes = {\n  rowButtons: PropTypes.array,\n  onCreate: PropTypes.func,\n  onDelete: PropTypes.func,\n  onEdit: PropTypes.func,\n  schema: PropTypes.object.isRequired,\n  paginationSize: PropTypes.number,\n  tableScroll: PropTypes.object,\n  loading: PropTypes.bool,\n  onDownloadExcel: PropTypes.func,\n  onUploadExcel: PropTypes.func,\n  onExampleExcel: PropTypes.func,\n  updateDataAtRow: PropTypes.func,\n};\n\nTableComp.defaultProps = {\n  rowButtons: [],\n  onDelete: null,\n  onCreate: null,\n  onEdit: null,\n  paginationSize: 20,\n  tableScroll: { y: 600, x: true },\n  loading: false,\n  onDownloadExcel: null,\n  onUploadExcel: null,\n  onExampleExcel: null,\n  updateDataAtRow: null,\n};\n\nexport default TableComp;\n","import { Modal } from \"antd\";\nimport { nanoid } from \"nanoid\";\n\nexport const alert = {\n\tsuccess: (content) => Modal.success({ content }),\n\terror: (e) => Modal.error({ content: e.message || e + \"\" }),\n};\n\nexport const appendId = (a) => {\n\tif (a._id === undefined) return { ...a, _id: nanoid() };\n\treturn a;\n};\n","import _ from \"lodash\";\nimport { useState } from \"react\";\nimport { setNestedObjectValues } from \"formik\";\nimport React from \"react\";\n\nexport const calculateSpan = (formSpec, isInline) => {\n\tif (isInline)\n\t\treturn formSpec.map((a) => ({\n\t\t\t...a,\n\t\t\tcolSpan: 8,\n\t\t\tlabelCol: { span: 10 },\n\t\t\twrapperCol: { span: 14 },\n\t\t}));\n\n\tvar ans = [];\n\tvar isPreviousLeft = false;\n\tfor (var i = 0, ii = formSpec.length; i < ii; i++) {\n\t\tvar current = formSpec[i];\n\t\tif (!current.twoColumn) {\n\t\t\tans.push(current);\n\t\t\tisPreviousLeft = false;\n\t\t} else if (isPreviousLeft === false) {\n\t\t\t//left\n\t\t\tvar hasNext = formSpec[i + 1]?.twoColumn;\n\t\t\tans.push({\n\t\t\t\t...current,\n\t\t\t\tcolSpan: hasNext ? 12 : 24,\n\t\t\t\tlabelCol: hasNext ? { span: 8 } : { span: 4 },\n\t\t\t\twrapperCol: hasNext ? { span: 14 } : { span: 7 },\n\t\t\t});\n\t\t\tisPreviousLeft = true;\n\t\t} else {\n\t\t\t//right\n\t\t\tans.push({\n\t\t\t\t...current,\n\t\t\t\tcolSpan: 12,\n\t\t\t\tlabelCol: { span: 5 },\n\t\t\t\twrapperCol: { span: 15 },\n\t\t\t\tclassName: \"right-column-label\",\n\t\t\t});\n\t\t\tisPreviousLeft = false;\n\t\t}\n\t}\n\treturn ans;\n};\n\nconst filter = function (inputValue, path) {\n\treturn path.some(\n\t\t(option) =>\n\t\t\toption[this._labelField]\n\t\t\t\t.toLowerCase()\n\t\t\t\t.indexOf(inputValue.toLowerCase()) > -1\n\t);\n};\n\nconst lookupOptionsEnum = (cascader, isSmall, allTargets) => {\n\tif (cascader?.options?.[0]?.c?.[0]?.c?.[0]?.l === \"คลองต้นไทร 10600\") {\n\t\tvar ans = {\n\t\t\t...cascader,\n\t\t\tfieldNames: { label: \"l\", value: \"l\", children: \"c\" },\n\t\t\tonSubmitHook: (a) => {\n\t\t\t\tvar thirdNames = allTargets.value[cascader.compLabels[1]].name;\n\t\t\t\tvar forthNames = allTargets.value[cascader.compLabels[2]].name;\n\t\t\t\tvar thirdValue = _.get(a, thirdNames);\n\t\t\t\tif (!thirdValue) return a;\n\n\t\t\t\tvar ans = { ...a };\n\t\t\t\t_.set(ans, thirdNames, thirdValue.split(\" \")[0]);\n\t\t\t\t_.set(ans, forthNames, thirdValue.split(\" \")[1]);\n\t\t\t\treturn ans;\n\t\t\t},\n\t\t};\n\t\tif (isSmall) {\n\t\t\tans.className = \"hnk-small\";\n\t\t\tans.dropdownRender = (Menu) => (\n\t\t\t\t<div className=\"hnk-small\">{Menu}</div>\n\t\t\t);\n\t\t}\n\t\treturn ans;\n\t}\n\treturn cascader;\n};\n\nexport const handleCascader = (formSpec, isSmall) => {\n\tvar ans = [];\n\tvar allCascader = {};\n\tvar allSpecs = _.keyBy(formSpec, \"label\");\n\tvar allTargetsHolder = {};\n\n\tfor (var spec of formSpec) {\n\t\tans.push(spec);\n\n\t\tvar { cascader } = spec.meta;\n\t\tif (!cascader) continue;\n\n\t\tif (!allCascader[cascader.label]) {\n\t\t\tcascader = lookupOptionsEnum(cascader, isSmall, allTargetsHolder);\n\t\t\tvar newCascader = (allCascader[cascader.label] = {\n\t\t\t\tfieldType: \"Cascader\",\n\t\t\t\t_labelField: cascader.fieldNames?.label || \"label\",\n\t\t\t\tmeta: { ...cascader, showSearch: {} },\n\t\t\t\tname: cascader.label,\n\t\t\t\tlabel: cascader.label,\n\t\t\t\ttargets: [spec, ...cascader.compLabels.map((a) => allSpecs[a])],\n\t\t\t\trequired: !!cascader.required,\n\t\t\t\tvalidate: _.noop,\n\t\t\t\tfieldHide: cascader.fieldHide,\n\t\t\t\tstep: cascader.step,\n\t\t\t});\n\t\t\tnewCascader.meta.showSearch.filter = filter.bind(newCascader);\n\t\t\tans.push(newCascader);\n\t\t}\n\t}\n\n\tvar allTargets = (allTargetsHolder.value = _.chain(allCascader)\n\t\t.map(\"targets\")\n\t\t.flatten()\n\t\t.keyBy(\"label\")\n\t\t.value());\n\tans = ans.filter((a) => !allTargets[a.label]);\n\n\tvar cascaderHook = (data) => {\n\t\tvar result = { ...data };\n\t\tfor (var label in data) {\n\t\t\tif (!allCascader[label]) continue;\n\n\t\t\tvar { targets } = allCascader[label];\n\t\t\tfor (var i = 0, ii = targets.length; i < ii; i++)\n\t\t\t\t_.set(result, targets[i].name, data[label][i]);\n\t\t\tdelete result[label];\n\t\t}\n\t\treturn result;\n\t};\n\n\treturn { formSpec: ans, cascaderHook };\n};\n\nexport const useSteps = (steps) => {\n\tconst [currentStep, setStep] = useState(steps.length ? 0 : -1);\n\tconst nextStep = () =>\n\t\tcurrentStep < steps.length - 1 && setStep(currentStep + 1);\n\tconst prevStep = () => currentStep > 0 && setStep(currentStep - 1);\n\treturn { nextStep, prevStep, currentStep };\n};\n\nexport const touchAll = async (context) => {\n\tconst errors = await context.validateForm();\n\tif (Object.keys(errors).length === 0) return true;\n\telse context.setTouched(setNestedObjectValues(errors, true));\n};\n\nexport const touchFirstSubmit = (context, ref) => {\n\tconst { executed } = ref.current;\n\tif (!context.submitCount || executed) return;\n\tif (context.isValid || context.isSubmitting) return;\n\n\tref.current.executed = true;\n\tsetTimeout(() =>\n\t\tcontext.setTouched(setNestedObjectValues(context.errors, true))\n\t);\n};\n","import React from \"react\";\nimport { SubmitButton, ResetButton } from \"formik-antd\";\nimport { useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Space, Button } from \"antd\";\nimport { useRef } from \"react\";\nimport { touchAll, touchFirstSubmit } from \"./logic\";\n\nconst SubmitLine = (props) => {\n\tconst { steps, currentStep, prevStep, nextStep } = props;\n\tconst { submitButtonLabel, resetButtonLabel } = props;\n\n\tconst context = useFormikContext();\n\tconst touch = useRef({ executed: false });\n\tconst submitStyle =\n\t\tsteps.length - 1 <= currentStep ? undefined : { display: \"none\" };\n\n\tconst next = async () => {\n\t\tconst success = await touchAll(context);\n\t\tif (success) nextStep();\n\t};\n\n\ttouchFirstSubmit(context, touch);\n\n\treturn (\n\t\t<center style={steps.length ? { marginTop: 10 } : null}>\n\t\t\t<Space>\n\t\t\t\t{steps.length && currentStep ? (\n\t\t\t\t\t<Button onClick={prevStep}>ย้อนกลับ</Button>\n\t\t\t\t) : null}\n\t\t\t\t{steps.length && steps.length - 1 > currentStep ? (\n\t\t\t\t\t<Button type=\"primary\" onClick={next}>\n\t\t\t\t\t\tถ้ดไป\n\t\t\t\t\t</Button>\n\t\t\t\t) : null}\n\t\t\t\t{!steps.length ? (\n\t\t\t\t\t<ResetButton>{resetButtonLabel}</ResetButton>\n\t\t\t\t) : null}\n\t\t\t\t<SubmitButton\n\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\tstyle={submitStyle}\n\t\t\t\t\tdisabled={false}\n\t\t\t\t>\n\t\t\t\t\t{submitButtonLabel}\n\t\t\t\t</SubmitButton>\n\t\t\t</Space>\n\t\t</center>\n\t);\n};\n\nSubmitLine.propTypes = {\n\tcurrentStep: PropTypes.number.isRequired,\n\tprevStep: PropTypes.func.isRequired,\n\tnextStep: PropTypes.func.isRequired,\n\tsteps: PropTypes.array.isRequired,\n\tresetButtonLabel: PropTypes.string,\n\tsubmitButtonLabel: PropTypes.string,\n};\n\nSubmitLine.defaultProps = {\n\tresetButtonLabel: \"ล้างค่า\",\n\tsubmitButtonLabel: \"ยืนยัน\",\n};\n\nexport default SubmitLine;\n","import PropTypes from \"prop-types\";\nimport { Cascader } from \"formik-antd\";\nimport { useState } from \"react\";\nimport { usePersistFn } from \"../../shared/hook\";\nimport _ from \"lodash\";\nimport React from \"react\";\nconst CASCADER_OMIT = [\n\t\"compLabels\",\n\t\"label\",\n\t\"asyncLoad\",\n\t\"onSubmitHook\",\n\t\"fieldHide\",\n\t\"step\"\n];\n\nconst MyCascader = (props) => {\n\tconst { asyncLoad, options, showSearch } = props;\n\tconst [options2, setOptions] = useState(options);\n\tconst props2 = _.omit(props, CASCADER_OMIT);\n\n\tconst loadData = usePersistFn(async (selected) => {\n\t\tvar lastRow = selected[selected.length - 1];\n\t\tlastRow.loading = true;\n\t\tawait asyncLoad(selected);\n\t\tlastRow.loading = false;\n\t\tsetOptions([...options2]);\n\t});\n\n\tvar placeholder =\n\t\tprops.placeholder ||\n\t\t(asyncLoad ? \"เลือก\" : \"เลือกหรือค้นหา\") + props.label;\n\n\treturn (\n\t\t<Cascader\n\t\t\t{...props2}\n\t\t\toptions={options2}\n\t\t\tloadData={typeof asyncLoad === \"function\" ? loadData : null}\n\t\t\tshowSearch={\n\t\t\t\ttypeof asyncLoad === \"function\" ? undefined : showSearch\n\t\t\t}\n\t\t\tplaceholder={placeholder}\n\t\t></Cascader>\n\t);\n};\n\nMyCascader.propTypes = {\n\tasyncLoad: PropTypes.func,\n\toptions: PropTypes.array,\n\tshowSearch: PropTypes.object,\n};\n\nMyCascader.defaultProps = {\n\tasyncLoad: undefined,\n\toptions: [],\n\tshowSearch: undefined,\n};\n\nexport default MyCascader;\n","import PropTypes from \"prop-types\";\nimport { Input } from \"formik-antd\";\nimport { useState, useEffect, useRef, memo } from \"react\";\nimport _ from \"lodash\";\nimport React from \"react\";\nimport { Typography, Divider, Col, Row, Button } from \"antd\";\nimport { CloseOutlined } from \"@ant-design/icons\";\nimport { FieldArray } from \"formik\";\nimport { usePersistFn } from \"../../shared/hook\";\n\nconst OMIT_FIELDS = [\"loadBarcodeName\"];\nconst { Text } = Typography;\n\nconst Barcode = (props) => {\n  const { loadBarcodeName, name } = props;\n\n  const props2 = _.omit(props, OMIT_FIELDS);\n  const [barcodes, setBarcodes] = useState([]);\n  const [inputValue, setInputValue] = useState(\"\");\n  const ref = useRef(null);\n\n  const onKeyDown = usePersistFn(async (event) => {\n    if (event.key !== \"Enter\") return;\n    if (ref.current) ref.current.push(inputValue);\n    setBarcodes((a) => [...a, { inputValue, _id: Math.random() }]);\n    setInputValue(\"\");\n    event.preventDefault();\n  });\n\n  const remove = usePersistFn((index) => {\n    if (ref.current) ref.current.remove(index);\n    setBarcodes((a) => a.filter((a, i) => i !== index));\n  });\n\n  const render = usePersistFn((helpers) => {\n    ref.current = helpers;\n    return (\n      <>\n        <Input\n          {...props2}\n          onKeyDown={onKeyDown}\n          validator={null}\n          name={\"$\" + name}\n          value={inputValue}\n          onChange={(event) => setInputValue(event.target.value)}\n        />\n        <Divider />\n        {barcodes.map((a, i) => (\n          <BarcodeLine\n            key={a._id}\n            index={i}\n            loadItemName={loadBarcodeName}\n            name={name}\n            remove={remove}\n            value={a.inputValue}\n          />\n        ))}\n      </>\n    );\n  });\n\n  return <FieldArray name={name} render={render} />;\n};\n\nBarcode.propTypes = {\n  loadBarcodeName: PropTypes.func.isRequired,\n};\n\nBarcode.defaultProps = {};\n\nconst BarcodeLine = memo((props) => {\n  const { index, loadItemName, name, value, remove } = props;\n  const [itemName, setItemName] = useState(\"\");\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    loadItemName(value)\n      .then((a) => setItemName(a || \"ไม่พบข้อมูล\"))\n      .catch(() => setItemName(\"ไม่พบข้อมูล\"));\n  }, []);\n\n  return (\n    <>\n      <Row>\n        <Col span={8}>\n          <Input\n            disabled={true}\n            size=\"small\"\n            style={{ marginBottom: 5 }}\n            name={name + `[${index}]`}\n          />\n        </Col>\n        <Col span={16}>\n          <Button\n            icon={<CloseOutlined />}\n            size=\"small\"\n            shape=\"circle\"\n            style={{ marginLeft: 20 }}\n            onClick={() => remove(index)}\n          />\n          <Text style={{ marginLeft: 20 }}>{itemName}</Text>\n        </Col>\n      </Row>\n    </>\n  );\n});\n\nexport default Barcode;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { FieldArray, useFormikContext } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Upload, Button } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { alert } from \"../../controller/util\";\nimport { usePersistFn } from \"../../shared/hook\";\nimport _ from \"lodash\";\n\nconst FileUpload = (props) => {\n  const { name, label, multiple, accept, dataType, disabled } = props;\n  const { uploadFileType, uploadFile, uploadFileInit } = props;\n  const [fileListState, setFileListState] = useState([]);\n  const { values, setFieldValue } = useFormikContext();\n  const abortRef = useRef(null);\n  if (abortRef.current === null) abortRef.current = new AbortController();\n\n  useEffect(() => {\n    let value = _.get(values, name);\n    if (typeof value === \"string\") value = [value];\n    if (Array.isArray(value)) setFileListState(value.map(urlToFileList));\n    uploadFileInit();\n    return () => abortRef.current.abort();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [name]);\n\n  const onUpload = usePersistFn(async (options) => {\n    const { onSuccess, onError, file } = options;\n    if (!file) return;\n\n    try {\n      const uploadURL = await uploadFile(file);\n      if (!abortRef.current.signal.aborted)\n        onSuccess({\n          status: 200,\n          uri: uploadURL.split(/[#?]/)[0],\n          url: URL.createObjectURL(file),\n        });\n    } catch (error) {\n      console.error(error);\n      onError({});\n      alert.error(\"อัพโหลดไฟล์ไม่สำเร็จ\");\n    }\n  });\n\n  const onChangeFile = usePersistFn((info) => {\n    let newFileList = info.fileList.slice(multiple ? 0 : -1);\n    newFileList = newFileList.map((file) => {\n      if (file.response) {\n        file.uri = file.response.uri;\n        file.url = file.response.url;\n      }\n      return file;\n    });\n    setFileListState(newFileList);\n\n    let listFile = newFileList.map((a) => a.uri).filter((a) => !!a);\n    if (dataType === \"string\") listFile = listFile[0];\n    setFieldValue(name, listFile, false);\n  });\n\n  const renderHelper = usePersistFn(() => {\n    return (\n      <>\n        <Upload\n          name={name}\n          listType={uploadFileType === \"image\" ? \"picture\" : null}\n          multiple={multiple}\n          accept={accept}\n          fileList={fileListState}\n          onChange={onChangeFile}\n          customRequest={onUpload}\n          disabled={disabled}\n        >\n          <Button icon={<UploadOutlined />} disabled={disabled}>\n            {label}\n          </Button>\n        </Upload>\n      </>\n    );\n  });\n\n  return <FieldArray name={name} render={renderHelper} />;\n};\n\nFileUpload.propTypes = {\n  name: PropTypes.string.isRequired,\n  label: PropTypes.string,\n  multiple: PropTypes.bool,\n  accept: PropTypes.string,\n  uploadFile: PropTypes.func.isRequired,\n  uploadFileInit: PropTypes.func,\n  uploadFileType: PropTypes.oneOf([\"image\", \"file\"]).isRequired,\n  dataType: PropTypes.oneOf([\"string\", \"array\"]).isRequired,\n  disabled: PropTypes.bool,\n};\n\nFileUpload.defaultProps = {\n  label: \"อัพโหลดไฟล์\",\n  multiple: false,\n  accept: \"*\",\n  disabled: false,\n  uploadFileInit: _.noop,\n};\n\nconst urlToFileList = (a) => ({\n  name: encodeURIComponent(a.split(/[#?]/)[0].split(/\\//).pop()),\n  url: a,\n  uri: a,\n});\n\nexport default FileUpload;\n","import PropTypes from \"prop-types\";\nimport {\n\tInput,\n\tInputNumber,\n\tCheckbox,\n\tDatePicker,\n\tForm,\n\tSelect,\n\tSwitch,\n} from \"formik-antd\";\nimport Cascader from \"./components/cascader\";\nimport Barcode from \"./components/barcode\";\nimport FileUpload from \"./components/file_upload\";\nimport moment from \"moment\";\nimport React from \"react\";\nimport { Col } from \"antd\";\n\nconst { WeekPicker, RangePicker, MonthPicker } = DatePicker;\n\nconst Field = (props) => {\n\tconst { fieldType, label, required, name, validate, meta } = props;\n\tconst { labelCol, wrapperCol, colSpan, offset, className } = props;\n\tconst { containerStyle, onFieldRender, type } = props;\n\tconst props2 = { ...meta, name };\n\n\treturn (\n\t\t<Col\n\t\t\tspan={colSpan || 24}\n\t\t\toffset={offset}\n\t\t\tclassName={className}\n\t\t\tstyle={containerStyle}\n\t\t>\n\t\t\t<Form.Item\n\t\t\t\tlabel={label}\n\t\t\t\trequired={required}\n\t\t\t\tname={name}\n\t\t\t\tvalidate={validate}\n\t\t\t\tlabelCol={labelCol}\n\t\t\t\twrapperCol={wrapperCol}\n\t\t\t>\n\t\t\t\t{fieldType === \"Custom\" &&\n\t\t\t\t\tonFieldRender &&\n\t\t\t\t\tonFieldRender(props2)}\n\t\t\t\t{fieldType === \"Barcode\" && (\n\t\t\t\t\t<Barcode\n\t\t\t\t\t\tplaceholder=\"พิมพ์แล้วกด Enter เช่น a001\"\n\t\t\t\t\t\t{...props2}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"Cascader\" && <Cascader {...props2} />}\n\t\t\t\t{fieldType === \"Checkbox\" && <Checkbox {...props2} />}\n\t\t\t\t{fieldType === \"DatePicker\" && (\n\t\t\t\t\t<DatePicker\n\t\t\t\t\t\tplaceholder=\"เลือกวันที่\"\n\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\tdefaultValue={\n\t\t\t\t\t\t\tprops2.defaultValue && moment(props2.defaultValue)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"WeekPicker\" && <WeekPicker {...props2} />}\n\t\t\t\t{fieldType === \"RangePicker\" && <RangePicker {...props2} />}\n\t\t\t\t{fieldType === \"MonthPicker\" && <MonthPicker {...props2} />}\n\t\t\t\t{fieldType === \"Input\" && <Input {...props2} />}\n\t\t\t\t{fieldType === \"InputEmail\" && (\n\t\t\t\t\t<Input {...props2} type=\"email\" />\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"InputNumber\" && (\n\t\t\t\t\t<InputNumber\n\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\tstyle={{ ...props2.style, width: \"100%\" }}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"InputURL\" && <Input {...props2} type=\"url\" />}\n\t\t\t\t{fieldType === \"InputPhone\" && (\n\t\t\t\t\t<Input\n\t\t\t\t\t\tplaceholder=\"เช่น 0811111111\"\n\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\ttype=\"tel\"\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"InputPassword\" && (\n\t\t\t\t\t<Input.Password {...props2} />\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"TextArea\" && <Input.TextArea {...props2} />}\n\t\t\t\t{fieldType === \"Select\" && (\n\t\t\t\t\t<Select\n\t\t\t\t\t\tplaceholder=\"เลือก\"\n\t\t\t\t\t\t{...props2}\n\t\t\t\t\t\tstyle={{ ...props2.style, textAlign: \"left\" }}\n\t\t\t\t\t>\n\t\t\t\t\t\t{props2.valid &&\n\t\t\t\t\t\t\tObject.entries(props2.valid).map(([k, v]) => (\n\t\t\t\t\t\t\t\t<Select.Option key={k} value={k}>\n\t\t\t\t\t\t\t\t\t{v}\n\t\t\t\t\t\t\t\t</Select.Option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t</Select>\n\t\t\t\t)}\n\t\t\t\t{fieldType === \"Switch\" && <Switch {...props2} />}\n\t\t\t\t{fieldType === \"FileUpload\" && (\n\t\t\t\t\t<FileUpload {...props2} dataType={type} />\n\t\t\t\t)}\n\t\t\t</Form.Item>\n\t\t</Col>\n\t);\n};\n\nField.propTypes = {\n\tfieldType: PropTypes.oneOf([\n\t\t\"Barcode\",\n\t\t\"Cascader\",\n\t\t\"Checkbox\",\n\t\t\"DatePicker\",\n\t\t\"WeekPicker\",\n\t\t\"RangePicker\",\n\t\t\"MonthPicker\",\n\t\t\"Input\",\n\t\t\"InputNumber\",\n\t\t\"InputPhone\",\n\t\t\"InputEmail\",\n\t\t\"InputURL\",\n\t\t\"InputPassword\",\n\t\t\"TextArea\",\n\t\t\"Select\",\n\t\t\"Switch\",\n\t\t\"FileUpload\",\n\t\t\"Custom\",\n\t]).isRequired,\n\tname: PropTypes.string.isRequired,\n\tvalidate: PropTypes.func.isRequired,\n\tlabel: PropTypes.string.isRequired,\n\trequired: PropTypes.bool.isRequired,\n\tmeta: PropTypes.object.isRequired,\n\tcolSpan: PropTypes.number,\n\toffset: PropTypes.number,\n\tlabelCol: PropTypes.object,\n\twrapperCol: PropTypes.object,\n\tclassName: PropTypes.string,\n\tcontainerStyle: PropTypes.object,\n\tonFieldRender: PropTypes.func,\n};\nField.defaultProps = {\n\tlabelCol: undefined,\n\twrapperCol: undefined,\n\tcolSpan: undefined,\n\toffset: undefined,\n\tclassName: undefined,\n\tcontainerStyle: undefined,\n\tonFieldRender: undefined,\n};\n\nexport default Field;\n","import PropTypes from \"prop-types\";\nimport React, { useMemo } from \"react\";\nimport { useFormikContext } from \"formik\";\nimport Field from \"./field\";\nimport { calculateSpan } from \"./logic\";\n\nconst InnerForm = (props) => {\n\tconst { formSpec, inline, currentStep } = props;\n\tconst { values } = useFormikContext();\n\n\tconst formSpec2 = useMemo(() => {\n\t\treturn calculateSpan(\n\t\t\tformSpec.filter((spec) => {\n\t\t\t\tconst { fieldHide, step } = spec;\n\t\t\t\tif (typeof fieldHide === \"function\") {\n\t\t\t\t\tif (fieldHide(values)) return false;\n\t\t\t\t} else if (fieldHide) return false;\n\t\t\t\tif (currentStep !== -1 && currentStep !== step) return false;\n\t\t\t\treturn true;\n\t\t\t}),\n\t\t\tinline\n\t\t);\n\t}, [formSpec, values, inline, currentStep]);\n\n\treturn formSpec2.map((props) => (\n\t\t<Field {...props} key={props.name} currentStep={currentStep} />\n\t));\n};\n\nInnerForm.propTypes = {\n\tformSpec: PropTypes.array.isRequired,\n\tinline: PropTypes.bool.isRequired,\n\tcurrentStep: PropTypes.number.isRequired,\n};\n\nexport default InnerForm;\n","import { Form, SubmitButton } from \"formik-antd\";\nimport { Formik } from \"formik\";\nimport PropTypes from \"prop-types\";\nimport { Row, Col, Divider, Steps } from \"antd\";\nimport { handleCascader, useSteps } from \"./logic\";\nimport React, { useMemo } from \"react\";\nimport SubmitLine from \"./submit_line\";\nimport { useMaxWidth } from \"../shared/hook\";\nimport _ from \"lodash\";\nimport InnerForm from \"./inner-form\";\n\nconst { Step } = Steps;\n\nconst CombinedForm = (props) => {\n\tconst { onSubmit, inline, initialValues, steps } = props;\n\tconst { resetButtonLabel, submitButtonLabel, schema } = props;\n\tconst isSmall = useMaxWidth(575);\n\n\tconst { formSpec, onSubmit2 } = useMemo(() => {\n\t\tconst { formSpec, cascaderHook } = handleCascader(\n\t\t\tschema.formSpec,\n\t\t\tisSmall\n\t\t);\n\t\tconst onSubmitHooks = [cascaderHook].concat(\n\t\t\tformSpec.map((a) => a?.meta?.onSubmitHook).filter((a) => !!a)\n\t\t);\n\t\tconst onSubmit2 = async (postData, actions) => {\n\t\t\tpostData = _.cloneDeep(postData);\n\t\t\tfor (var hook of onSubmitHooks) postData = hook(postData);\n\t\t\tvar names = schema.formSpec.map((a) => a.name);\n\t\t\tvar ans = _.pick(\n\t\t\t\tpostData,\n\t\t\t\tnames.filter((a) => !/^\\$|\\.\\$/.test(a))\n\t\t\t);\n\t\t\tawait onSubmit(ans, actions, postData);\n\t\t};\n\t\treturn { formSpec, onSubmit2 };\n\t}, [schema, onSubmit, isSmall]);\n\n\tconst { nextStep, prevStep, currentStep } = useSteps(steps);\n\n\treturn (\n\t\t<Formik\n\t\t\tinitialValues={initialValues || schema.toDefaultValues()}\n\t\t\tonSubmit={onSubmit2}\n\t\t>\n\t\t\t{() => (\n\t\t\t\t<Form\n\t\t\t\t\tlabelCol={{ span: 4 }}\n\t\t\t\t\twrapperCol={{ span: 18 }}\n\t\t\t\t\tcolon={!inline}\n\t\t\t\t>\n\t\t\t\t\t{steps.length ? (\n\t\t\t\t\t\t<Row style={{ marginBottom: 40, marginTop: 20 }}>\n\t\t\t\t\t\t\t<Col offset={2} span={20}>\n\t\t\t\t\t\t\t\t<Steps size=\"small\" current={currentStep}>\n\t\t\t\t\t\t\t\t\t{steps.map((a) => (\n\t\t\t\t\t\t\t\t\t\t<Step key={a} title={a} />\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</Steps>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<Row gutter={8} justify={inline ? \"center\" : undefined}>\n\t\t\t\t\t\t<InnerForm\n\t\t\t\t\t\t\tformSpec={formSpec}\n\t\t\t\t\t\t\tcurrentStep={currentStep}\n\t\t\t\t\t\t\tinline={inline}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{inline && (\n\t\t\t\t\t\t\t<Col span={4}>\n\t\t\t\t\t\t\t\t<SubmitButton\n\t\t\t\t\t\t\t\t\ttype=\"primary\"\n\t\t\t\t\t\t\t\t\tstyle={{ marginBottom: 24 }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{submitButtonLabel}\n\t\t\t\t\t\t\t\t</SubmitButton>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Row>\n\t\t\t\t\t{inline && <Divider style={{ marginTop: 10 }} />}\n\t\t\t\t\t{!inline && (\n\t\t\t\t\t\t<SubmitLine\n\t\t\t\t\t\t\tsteps={steps}\n\t\t\t\t\t\t\tcurrentStep={currentStep}\n\t\t\t\t\t\t\tprevStep={prevStep}\n\t\t\t\t\t\t\tnextStep={nextStep}\n\t\t\t\t\t\t\tsubmitButtonLabel={submitButtonLabel}\n\t\t\t\t\t\t\tresetButtonLabel={resetButtonLabel}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Form>\n\t\t\t)}\n\t\t</Formik>\n\t);\n};\n\nCombinedForm.propTypes = {\n\tinitialValues: PropTypes.any,\n\tonSubmit: PropTypes.func.isRequired,\n\tschema: PropTypes.object,\n\tinline: PropTypes.bool,\n\tsteps: PropTypes.array,\n};\n\nCombinedForm.defaultProps = {\n\tinitialValues: null,\n\tschema: null,\n\tinline: false,\n\tsteps: [],\n};\n\nexport default CombinedForm;\n","import { Typography } from \"antd\";\nimport PropTypes from \"prop-types\";\nimport React from 'react';\n\nconst { Title, Paragraph } = Typography;\n\nconst Header = (props) => {\n\tconst { title, description, name, small, icon } = props;\n\tconst { headerContainerStyle, titleStyle, descriptionStyle } = props;\n\n\tconst name2 = name.length && /[a-z]/i.test(name[0]) ? \" \" + name : name;\n\tconst title2 = title || `ข้อมูล${name2}`;\n\n\treturn (\n\t\t<div style={headerContainerStyle}>\n\t\t\t<Title level={small ? 3 : 2} style={titleStyle}>\n\t\t\t\t{icon} {title2}\n\t\t\t</Title>\n\t\t\t{description && (\n\t\t\t\t<Paragraph style={descriptionStyle}>{description}</Paragraph>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nHeader.propTypes = {\n\ttitle: PropTypes.string,\n\tdescription: PropTypes.string,\n\tname: PropTypes.string,\n\theaderContainerStyle: PropTypes.object,\n\tsmall: PropTypes.bool,\n\ticon: PropTypes.node,\n};\n\nHeader.defaultProps = {\n\ttitle: \"\",\n\tdescription: \"\",\n\tname: \"\",\n\theaderContainerStyle: { marginBottom: 20, textAlign: \"center\" },\n\ttitleStyle: {},\n\tdescriptionStyle: { textAlign: \"left\" },\n\tsmall: false,\n\ticon: null,\n};\n\nexport default Header;\n","import PropTypes from \"prop-types\";\nimport { Modal, Alert } from \"antd\";\nimport Form from \"../formik/form\";\nimport Header from \"./header\";\nimport React from \"react\";\n\nconst EditModal = (props) => {\n\tconst { visible, onClose, isEdit, schema, onSubmit, steps } = props;\n\tconst { createHeader, editHeader, error, initialValue } = props;\n\tconst title = steps.length ? \"\" : isEdit ? editHeader : createHeader;\n\n\t//need to unmount in order for initialValue to work\n\tif (!visible) return null;\n\n\treturn (\n\t\t<Modal\n\t\t\tcentered\n\t\t\tvisible={visible}\n\t\t\twidth={800}\n\t\t\tfooter={null}\n\t\t\tonCancel={onClose}\n\t\t\tmaskClosable={false}\n\t\t>\n\t\t\t{title && <Header title={title} small />}\n\t\t\t{error && (\n\t\t\t\t<Alert\n\t\t\t\t\tmessage={error.message || error}\n\t\t\t\t\ttype=\"error\"\n\t\t\t\t\tshowIcon\n\t\t\t\t\tstyle={{ margin: 30, marginBottom: 20, marginTop: -10 }}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Form\n\t\t\t\tinitialValues={initialValue}\n\t\t\t\tschema={schema}\n\t\t\t\tonSubmit={onSubmit}\n\t\t\t\tsteps={steps}\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nEditModal.propTypes = {\n\tisEdit: PropTypes.bool.isRequired,\n\tvisible: PropTypes.bool.isRequired,\n\tonClose: PropTypes.func.isRequired,\n\tschema: PropTypes.object.isRequired,\n\tsteps: PropTypes.array.isRequired,\n\teditHeader: PropTypes.string,\n\tcreateHeader: PropTypes.string,\n\terror: PropTypes.instanceOf(Error),\n\tinitialValue: PropTypes.object,\n\tonSubmit: PropTypes.func.isRequired,\n};\n\nEditModal.defaultProps = {\n\tcreateHeader: \"เพิ่มข้อมูลใหม่\",\n\teditHeader: \"แก้ไขข้อมูล\",\n\terror: null,\n\tinitialValue: undefined,\n};\n\nexport default EditModal;\n","const errorTranslation = {\n\t\"any.required\": \"จำเป็นต้องกรอก\",\n\t\"string.empty\": \"จำเป็นต้องกรอก\",\n\t\"string.uri\": \"URL ไม่ถูกต้อง\",\n\t\"string.min\": (errorObj) =>\n\t\t`ต้องกรอกไม่ต่ำกว่า ${errorObj.context.limit} ตัวอักษร`,\n\t\"string.max\": (errorObj) =>\n\t\t`ต้องกรอกไม่เกิน ${errorObj.context.limit} ตัวอักษร`,\n\t\"string.email\": \"อีเมลไม่ถูกต้อง\",\n\t\"number.base\": \"ต้องเป็นตัวเลข\",\n};\n\nexport const getErrorMessage = (errorObj, label) => {\n\tlabel = label || errorObj?.context?.label;\n\n\tvar { message, type, context } = errorObj;\n\tif (type === \"any.custom\") return context?.error?.message;\n\tif (/[ก-ฮ]/.test(message.replace(/\"[^\"]+\"/g, \"\"))) return message;\n\tif (/pattern/.test(type) && label) return `${label}ไม่ถูกต้อง`;\n\n\tvar found = errorTranslation[type];\n\tif (!found && label) return `${label}ไม่ถูกต้อง (${message})`;\n\tif (!found) return `ค่าไม่ถูกต้อง (${message})`;\n\n\tif (typeof found === \"string\") return found;\n\treturn found(errorObj);\n};\n","import Joi from \"joi/lib/index\";\n\n// https://stackoverflow.com/questions/42370881/allow-string-to-be-null-or-empty-in-joi-and-express-validation\n// https://github.com/sideway/joi/issues/482\nexport const fixEmptyString = (joiObj, describeObj) => {\n\tconst traverse = (node, path, ans) => {\n\t\tif (node?.flags?.label && node?.type === \"string\")\n\t\t\tif (node?.flags?.presence !== \"required\") ans.push(path);\n\n\t\tvar keys = node.keys;\n\t\tif (keys)\n\t\t\tfor (var key in keys) traverse(keys[key], [...path, key], ans);\n\t};\n\n\tvar paths = [];\n\ttraverse(describeObj, [], paths);\n\treturn joiObj.fork(paths, (schema) => schema.allow(\"\"));\n};\n\nexport const handleDevMode = (joiObj, describeObj) => {\n\tconst traverse = (node, path) => {\n\t\tif (node?.flags?.label && node?.flags?.presence) {\n\t\t\tdelete node.flags.presence;\n\t\t\tpaths.push(path);\n\t\t}\n\n\t\tvar keys = node.keys;\n\t\tif (keys) for (var key in keys) traverse(keys[key], [...path, key]);\n\t};\n\n\tconst paths = [];\n\ttraverse(describeObj, []);\n\treturn joiObj.fork(paths, (a) => a.optional());\n};\n\nexport const handleFieldHide = (joiObj, describeObj) => {\n\tconst traverse = (node, path, ans) => {\n\t\tif (node?.flags?.label && node?.metas?.[0]?.fieldHide) ans.push(path);\n\n\t\tvar keys = node.keys;\n\t\tif (keys)\n\t\t\tfor (var key in keys) traverse(keys[key], [...path, key], ans);\n\t};\n\n\tvar paths = [];\n\ttraverse(describeObj, [], paths);\n\treturn joiObj.fork(paths, (schema) => schema.optional());\n};\n\nexport const prepare = (joiObj, describeObj, devMode) => {\n\tjoiObj = fixEmptyString(joiObj, describeObj);\n\tif (devMode) joiObj = handleDevMode(joiObj, describeObj);\n\tjoiObj = handleFieldHide(joiObj, describeObj);\n\treturn joiObj.append({ _id: Joi.any() });\n};\n","export const IMAGE_FALLBACK =\n  \"data:image/png;base64,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\";\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Image } from \"antd\";\nimport { IMAGE_FALLBACK } from \"../../assets/fallback_image\";\n\nconst ColImage = (props) => {\n  const { src, width } = props;\n\n  if (typeof src === \"string\")\n    return <Image src={src} width={width} fallback={IMAGE_FALLBACK} />;\n\n  if (!Array.isArray(src))\n    return <Image src=\"error\" width={width} fallback={IMAGE_FALLBACK} />;\n\n  return (\n    <Image.PreviewGroup>\n      {src.map((item, index) => (\n        <Image\n          key={index.toString()}\n          src={item}\n          width={width}\n          style={{ padding: \"0 0.5rem 0.5rem 0\" }}\n          fallback={IMAGE_FALLBACK}\n        />\n      ))}\n    </Image.PreviewGroup>\n  );\n};\n\nColImage.propTypes = {\n  src: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n    PropTypes.array,\n  ]),\n  width: PropTypes.number,\n};\n\nColImage.defaultProps = {\n  width: 100,\n};\n\nexport default ColImage;\n","import Joi from \"joi/lib/index\";\nimport { getErrorMessage } from \"./error_message\";\nimport _ from \"lodash\";\nimport numeral from \"numeral\";\nimport moment from \"moment\";\nimport { prepare } from \"./prepare_joi\";\nimport React from \"react\";\nimport ColImage from \"../formik/components/col_image\";\n\nconst OMIT_META = [\n\t\"twoColumn\",\n\t\"defaultValue\",\n\t\"fieldType\",\n\t\"validLabel\",\n\t\"cellFormat\",\n\t\"cellWidth\",\n\t\"cellEllipsis\",\n\t\"cellHide\",\n\t\"fieldHide\",\n\t\"containerStyle\",\n\t\"step\",\n\t\"disableSorting\",\n\t\"disableFilter\",\n\t\"onFieldRender\",\n];\n\nclass JoiWrapper {\n\tconstructor(joiObj, devMode) {\n\t\tif (!Joi.isSchema(joiObj)) throw new Error(\"Invalid Joi Object\");\n\n\t\tthis.describe = joiObj.describe();\n\t\tthis.joiObj = prepare(joiObj, this.describe, devMode);\n\t\tthis.formSpec = [];\n\t\ttraverse(this.describe, [], this.formSpec, this.joiObj);\n\t\thandleCellShow(this.formSpec);\n\t\tthis.columns = this.formSpec.map((a) => a.column);\n\t\tthis.toDefaultValues = this.toDefaultValues.bind(this);\n\t}\n\n\ttoDefaultValues() {\n\t\tif (!this.defaultValues) {\n\t\t\tvar ans = (this.defaultValues = {});\n\t\t\tfor (var { name, defaultValue } of this.formSpec) {\n\t\t\t\tif (typeof defaultValue === \"function\")\n\t\t\t\t\tdefaultValue = defaultValue();\n\t\t\t\tif (defaultValue !== undefined) _.set(ans, name, defaultValue);\n\t\t\t}\n\t\t}\n\t\treturn this.defaultValues;\n\t}\n}\n\nconst traverse = (node, path, ans, joiObj) => {\n\tif (node?.flags?.label) ans.push(new JoiField(node, path, joiObj));\n\n\tvar keys = node.keys;\n\tif (keys)\n\t\tfor (var key in keys) traverse(keys[key], [...path, key], ans, joiObj);\n};\n\nconst handleCellShow = (formSpec) => {\n\tvar hasCellShow = false;\n\tfor (var item of formSpec)\n\t\tif (item.meta.cellShow) {\n\t\t\thasCellShow = true;\n\t\t\tbreak;\n\t\t}\n\n\tif (hasCellShow)\n\t\tfor (var spec of formSpec)\n\t\t\tif (spec.meta.cellShow) delete spec.meta.cellShow;\n\t\t\telse spec.column.cellHide = true;\n};\n\nclass JoiField {\n\tconstructor(field, path, joiObj) {\n\t\tvar meta = this.getMeta(field);\n\n\t\tthis.required = field?.flags?.presence === \"required\";\n\t\tthis.label = field?.flags?.label;\n\t\tthis.name = path.join(\".\");\n\t\tthis.fieldType = this.guessFieldType(field, meta);\n\t\tthis._extractedSchema = this.getExtractedSchema(joiObj, path);\n\t\tthis.validate = this.validate.bind(this);\n\t\tthis.type = field.type;\n\t\tthis.defaultValue = field?.flags?.default;\n\t\tthis.column = this.getColumn(meta, this);\n\n\t\t//remove excess data from meta\n\t\tthis.twoColumn = meta.twoColumn;\n\t\tthis.fieldHide = meta.fieldHide;\n\t\tthis.containerStyle = meta.containerStyle;\n\t\tthis.step = meta.step;\n\t\tthis.onFieldRender = meta.onFieldRender;\n\t\tthis.meta = _.omit(meta, OMIT_META);\n\t}\n\n\tgetExtractedSchema(joiObj, path) {\n\t\tvar { fieldType } = this;\n\t\tvar ans = joiObj.extract(path);\n\t\tif (fieldType === \"InputPhone\")\n\t\t\treturn ans.pattern(/^0([2]|[6]|[0-9][0-9])[0-9]{7}$/);\n\t\tif (fieldType === \"InputEmail\") return ans.email();\n\t\tif (fieldType === \"InputURL\")\n\t\t\treturn ans.uri({ scheme: [\"http\", \"https\"] });\n\t\treturn ans;\n\t}\n\n\tgetColumn(meta, $this) {\n\t\tvar { fieldType, type, label, name } = $this;\n\t\tvar ans = {\n\t\t\tellipsis: meta.cellEllipsis,\n\t\t\trender: meta.cellFormat,\n\t\t\twidth: meta.cellWidth,\n\t\t\tcellHide: meta.cellHide,\n\t\t\tdisableSorting: meta.disableSorting,\n\t\t\tdisableFilter: meta.disableFilter,\n\t\t\ttitle: label,\n\t\t\tdataIndex: name.split(\".\"),\n\t\t\tkey: name,\n\t\t\ttype,\n\t\t\tfieldType,\n\t\t};\n\n\t\tif (!ans.width) {\n\t\t\tif (type === \"number\") ans.width = 80;\n\t\t\telse if (type === \"date\") ans.width = 130;\n\t\t\telse if (fieldType === \"FileUpload\") ans.width = 150;\n\t\t\telse if (fieldType === \"InputURL\") ans.width = 250;\n\t\t\telse if (fieldType === \"TextArea\") ans.width = 250;\n\t\t}\n\n\t\tif (!ans.ellipsis) {\n\t\t\tif (fieldType === \"TextArea\") ans.ellipsis = true;\n\t\t}\n\n\t\tif (!ans.render) {\n\t\t\tif (fieldType === \"Select\") ans.render = (a) => meta.valid[a];\n\t\t\telse if (fieldType === \"InputPhone\")\n\t\t\t\tans.render = (a) => {\n\t\t\t\t\tif (typeof a !== \"string\") return a;\n\t\t\t\t\treturn a.replace(\n\t\t\t\t\t\t/(\\d{2,3})(\\d{3})(\\d{4})/,\n\t\t\t\t\t\t(m, p1, p2, p3) => [p1, p2, p3].join(\"-\")\n\t\t\t\t\t);\n\t\t\t\t};\n\t\t\telse if (\n\t\t\t\tfieldType === \"InputURL\" ||\n\t\t\t\tfieldType === \"TextArea\" ||\n\t\t\t\t(fieldType === \"FileUpload\" && meta.uploadFileType !== \"image\")\n\t\t\t)\n\t\t\t\tans.render = (a) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twordWrap: \"break-word\",\n\t\t\t\t\t\t\twordBreak: \"break-word\",\n\t\t\t\t\t\t\tmaxWidth: 250,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttitle={a}\n\t\t\t\t\t>\n\t\t\t\t\t\t{a}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\telse if (\n\t\t\t\tfieldType === \"FileUpload\" &&\n\t\t\t\tmeta.uploadFileType === \"image\"\n\t\t\t)\n\t\t\t\tans.render = (a) => <ColImage src={a} />;\n\t\t\telse if (type === \"number\")\n\t\t\t\tans.render = (a) => (a == null ? \"\" : numeral(a).format(\"0,0\"));\n\t\t\telse if (type === \"boolean\")\n\t\t\t\tans.render = (a) => (a == null ? \"\" : a ? \"ใช่\" : \"ไม่ใช่\");\n\t\t\telse if (type === \"date\")\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\ta == null\n\t\t\t\t\t\t? \"\"\n\t\t\t\t\t\t: a instanceof Date\n\t\t\t\t\t\t? moment(a).format(\"YYYY-MM-DD\")\n\t\t\t\t\t\t: a;\n\t\t\telse if (type === \"array\")\n\t\t\t\tans.render = (a) =>\n\t\t\t\t\ta == null ? \"\" : Array.isArray(a) ? a.join(\", \") : a;\n\t\t}\n\n\t\treturn ans;\n\t}\n\n\tgetMeta(field) {\n\t\tvar metas = field?.metas;\n\t\tvar ans = {};\n\t\tif (Array.isArray(metas) && metas.length === 1) ans = { ...metas[0] };\n\n\t\tif (field?.flags?.only && field?.allow) {\n\t\t\tvar { validLabel } = ans;\n\t\t\tvar allow = field?.allow;\n\t\t\tif (!Array.isArray(validLabel)) validLabel = allow;\n\t\t\telse if (validLabel?.length !== field?.allow?.length)\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"validLabel is required and must have the equal length\"\n\t\t\t\t);\n\t\t\tvar valid = (ans.valid = {});\n\t\t\tfor (var i = 0, ii = allow.length; i < ii; i++)\n\t\t\t\tvalid[allow[i]] = validLabel[i];\n\t\t}\n\n\t\treturn ans;\n\t}\n\n\tguessFieldType(field, meta) {\n\t\tif (meta.fieldType) return meta.fieldType;\n\t\tif (meta.onFieldRender) return \"Custom\";\n\t\tif (meta.loadBarcodeName) return \"Barcode\";\n\t\tif (meta.getUploadUrl || meta.firebaseConfig || meta.uploadFile)\n\t\t\treturn \"FileUpload\";\n\t\tif (field.type === \"boolean\") return \"Checkbox\";\n\t\tif (field.type === \"date\") return \"DatePicker\";\n\t\tif (field.type === \"number\") return \"InputNumber\";\n\t\tif (meta.valid) return \"Select\";\n\t\treturn \"Input\";\n\t}\n\n\tvalidate(value) {\n\t\tvar rawError = this._extractedSchema.validate(value);\n\t\tif (this.required && !value)\n\t\t\treturn getErrorMessage(\n\t\t\t\t{ type: \"any.required\", message: \"\" },\n\t\t\t\tthis.label\n\t\t\t);\n\n\t\tif (!rawError.error || !Array.isArray(rawError.error.details))\n\t\t\treturn null;\n\n\t\tfor (var errorObj of rawError.error.details)\n\t\t\treturn getErrorMessage(errorObj, this.label);\n\n\t\treturn null;\n\t}\n}\n\nexport { JoiField, JoiWrapper };\n","import { utils, writeFile, read, SSF } from \"xlsx\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\n\nexport const tableToExcel = (dataArray, fileName) => {\n\tdataArray.forEach(handleNested);\n\tvar worksheet = utils.json_to_sheet(dataArray, { dateNF: \"yyyy-mm-dd\" });\n\tif (!fileName) return worksheet;\n\n\tvar workbook = utils.book_new();\n\tutils.book_append_sheet(workbook, worksheet, \"Sheet 1\");\n\twriteFile(workbook, fileName);\n};\n\nexport const parseExcelDate = (date) => {\n\tvar a = SSF.parse_date_code(date);\n\tvar momentInput = { y: a.y, M: a.m - 1, d: a.d, h: a.H, m: a.M, s: a.S };\n\treturn moment(momentInput).parseZone(new Date()).toDate();\n};\n\nexport const excelToTable = (fileObject) =>\n\tnew Promise((res, rej) => {\n\t\tvar reader = new FileReader();\n\t\treader.onload = (e) => {\n\t\t\ttry {\n\t\t\t\tvar data = e.target.result;\n\t\t\t\tvar workbook = read(data, { type: \"binary\" });\n\t\t\t\tvar firstSheet = workbook.Sheets[workbook.SheetNames[0]];\n\t\t\t\tvar ans = utils.sheet_to_json(firstSheet);\n\t\t\t\tres(ans.map(parse));\n\t\t\t} catch (error) {\n\t\t\t\trej(error);\n\t\t\t}\n\t\t};\n\t\treader.onerror = () => rej(reader.error);\n\t\treader.readAsBinaryString(fileObject);\n\t});\n\nconst parse = (a) => {\n\treturn _.omit(a, \"__rowNum__\");\n};\n\nconst handleNested = (obj) => {\n\tfor (var key in obj) {\n\t\tvar value = obj[key];\n\t\tif (isObject(value))\n\t\t\tthrow new Error(\"XLSX layer does not support object\");\n\t\tif (Array.isArray(value))\n\t\t\tthrow new Error(\"XLSX layer does not support array\");\n\t}\n};\n\nconst isObject = (x) => Object.prototype.toString.call(x) === \"[object Object]\";\n","import _ from \"lodash\";\nimport { parseExcelDate } from \"../shared/xlsx\";\nimport moment from \"moment\";\nimport { getErrorMessage } from \"./error_message\";\nimport Joi from \"joi/lib/index\";\n\nexport class SerializeError extends Error {\n\tconstructor(errors) {\n\t\tsuper(\"SerializeError\");\n\t\tthis.name = \"SerializeError\";\n\t\tthis.errors = errors;\n\t\tError.captureStackTrace(this, this.constructor);\n\t}\n}\n\nexport const deserializeTable = (table, schema) => {\n\tvar errors = [];\n\tvar ans = [];\n\tfor (var i = 0, ii = table.length; i < ii; i++) {\n\t\ttry {\n\t\t\tans.push(deserializeRow(table[i], schema, \"\"));\n\t\t} catch (error) {\n\t\t\terrors = [...errors, ...error.details.map(mapError(i))];\n\t\t}\n\t}\n\n\tif (errors.length) throw new SerializeError(errors);\n\treturn ans;\n};\n\nconst mapError = (i) => {\n\treturn (a) => ({\n\t\tline: i + 2,\n\t\tlabel: a.context?.label,\n\t\tmessage: getErrorMessage(a),\n\t\ttype: a.type,\n\t});\n};\n\nconst deserializeRow = (excelRow, schema) => {\n\tif (!schema.columnCache)\n\t\tschema.columnCache = _.keyBy(schema.columns, \"title\");\n\n\tvar ans = {};\n\tfor (var x in excelRow) {\n\t\tvar column = schema.columnCache[x];\n\t\tif (!column || column.disabled) continue;\n\n\t\tvar current = excelRow[x];\n\t\tif (column.type === \"array\" && typeof current === \"string\")\n\t\t\tcurrent = current.split(/\\s*,\\s*/);\n\t\telse if (column.type === \"date\" && typeof current === \"string\")\n\t\t\tcurrent = moment(current).parseZone(new Date()).toDate();\n\t\telse if (column.type === \"date\") current = parseExcelDate(current);\n\n\t\t_.set(ans, column.dataIndex, current);\n\t}\n\treturn Joi.attempt(ans, schema.joiObj, { abortEarly: false });\n};\n\nexport const serializeTable = (table, schema, showDisabled) => {\n\tvar ans = [];\n\tfor (var rowData of table) {\n\t\tvar newRow = {};\n\t\tfor (var column of schema.columns) {\n\t\t\tif (!showDisabled && column.disabled) continue;\n\t\t\tvar current = _.get(rowData, column.dataIndex);\n\n\t\t\tif (column.type === \"array\") current += \"\";\n\t\t\telse if (column.type === \"date\")\n\t\t\t\tcurrent = moment(current).format(\"YYYY-MM-DD\");\n\n\t\t\tnewRow[column.title] = current;\n\t\t}\n\t\tans.push(newRow);\n\t}\n\treturn ans;\n};\n","import PropTypes from \"prop-types\";\nimport { Modal, Table } from \"antd\";\nimport Header from \"./header\";\nimport { ExclamationCircleFilled } from \"@ant-design/icons\";\nimport React from 'react';\n\nconst COLUMNS = [\n\t{ title: \"บรรทัด\", dataIndex: \"line\", width: 100 },\n\t{ title: \"คอลัมน์\", dataIndex: \"label\", width: 100 },\n\t{ title: \"ปัญหาที่พบ\", dataIndex: \"message\" },\n].map((a) => ({ ...a, key: a.dataIndex }));\n\nconst ExcelErrorModal = (props) => {\n\tconst { visible, onClose, errors, title } = props;\n\tconst dataSource = errors.map((a, i) => ({ ...a, key: i }));\n\n\treturn (\n\t\t<Modal\n\t\t\tcentered\n\t\t\tvisible={visible}\n\t\t\twidth={600}\n\t\t\tfooter={null}\n\t\t\tonCancel={onClose}\n\t\t>\n\t\t\t<Header title={title} icon={<ExclamationCircleFilled style={{color:'#faad14'}} />} small />\n\t\t\t<Table\n\t\t\t\tcolumns={COLUMNS}\n\t\t\t\tdataSource={dataSource}\n\t\t\t\ttableScroll={{ y: 600 }}\n\t\t\t\tpagination={false}\n\t\t\t\tsize=\"small\"\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nExcelErrorModal.propTypes = {\n\tvisible: PropTypes.bool.isRequired,\n\tonClose: PropTypes.func.isRequired,\n\terrors: PropTypes.array,\n\ttitle: PropTypes.string,\n};\nExcelErrorModal.defaultProps = {\n\terrors: [],\n\ttitle: \"อัพโหลดไม่สำเร็จ\",\n};\n\nexport default ExcelErrorModal;\n","import PropTypes from \"prop-types\";\nimport { useState, useEffect, useMemo } from \"react\";\nimport Table from \"../table\";\nimport { alert, appendId } from \"./util\";\nimport { useModal, useAPI, usePersistFn } from \"../shared/hook\";\nimport EditModal from \"./edit_modal\";\nimport Header from \"./header\";\nimport { JoiWrapper } from \"../joi/joi_wrapper\";\nimport { tableToExcel, excelToTable } from \"../shared/xlsx\";\nimport { deserializeTable, serializeTable } from \"../joi/serialize\";\nimport ExcelErrorModal from \"./excel_error_modal\";\nimport Form from \"../formik/form\";\nimport Joi from \"joi/lib/index\";\nimport React from \"react\";\nimport _ from 'lodash';\n\nconst INITIAL_FORM_STATUS = { isEdit: false, initialValue: null, error: null };\n\nconst Controller = (props) => {\n\tconst { getMany, createMany, updateOne, deleteMany, devMode } = props;\n\tconst { name, description, uploadPreviewUrl } = props;\n\tconst { schema, querySchema, rowButtons, tableScroll, steps } = props;\n\tconst { disableExcelDownload, disableExcelUpload } = props;\n\n\tconst [editModalData, setEditModalData] = useState(INITIAL_FORM_STATUS);\n\tconst [excelError, setExcelError] = useState([]);\n\tconst [getManyStatus, doGetMany, setData] = useAPI(getMany, true, true);\n\tconst [deleteStatus, doDelete] = useAPI(deleteMany);\n\tconst editModalControl = useModal();\n\tconst excelModalControl = useModal();\n\tconst schema2 = useMemo(() => new JoiWrapper(schema, devMode), [\n\t\tschema,\n\t\tdevMode,\n\t]);\n\tconst querySchema2 = useMemo(\n\t\t() => querySchema && new JoiWrapper(querySchema, devMode),\n\t\t[querySchema, devMode]\n\t);\n\n\tconst onCreate = usePersistFn(() => {\n\t\tsetEditModalData(INITIAL_FORM_STATUS);\n\t\teditModalControl.setVisible(true);\n\t});\n\n\tconst onEdit = usePersistFn((obj) => {\n\t\tsetEditModalData({ isEdit: true, initialValue: obj, error: null });\n\t\teditModalControl.setVisible(true);\n\t});\n\n\tconst updateDataAtRow = usePersistFn((rowData) => {\n\t\tvar tableData = getManyStatus.data;\n\t\tsetData(tableData.map((a) => (a._id === rowData._id ? rowData : a)));\n\t});\n\n\tconst onSubmit = usePersistFn(async (data, actions, originalData) => {\n\t\tsetEditModalData((a) => ({ ...a, error: null }));\n\t\ttry {\n\t\t\tdata = Joi.attempt(data, schema2.joiObj);\n\t\t\tschema2.formSpec\n\t\t\t\t.map((a) => a.name)\n\t\t\t\t.filter((a) => /^\\$|\\.\\$/.test(a))\n\t\t\t\t.forEach((a) => _.unset(data, a));\n\n\t\t\tif (editModalData.isEdit) {\n\t\t\t\tawait updateOne(data, originalData);\n\t\t\t\tupdateDataAtRow(originalData);\n\t\t\t\talert.success(\"แก้ไขข้อมูลเรียบร้อย\");\n\t\t\t\teditModalControl.setVisible(false);\n\t\t\t} else {\n\t\t\t\tvar returnData = await createMany([data]);\n\t\t\t\tif (!Array.isArray(returnData) || returnData.length !== 1)\n\t\t\t\t\treturn alert.error(\"ข้อมูลจากเซิฟเวอร์ไม่ถูกต้อง\");\n\t\t\t\tdata = appendId(returnData[0]);\n\t\t\t\tsetData([data, ...getManyStatus.data]);\n\t\t\t\talert.success(\"สร้างข้อมูลเรียบร้อย\");\n\t\t\t\teditModalControl.setVisible(false);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tsetEditModalData((a) => ({ ...a, error: e }));\n\t\t\tactions.setSubmitting(false);\n\t\t}\n\t});\n\n\tconst onDelete = usePersistFn(async (selectedKeys) => {\n\t\ttry {\n\t\t\tvar { data } = getManyStatus;\n\t\t\tvar selectedSet = new Set(selectedKeys);\n\t\t\tvar values = data.filter((a) => selectedSet.has(a._id));\n\t\t\tawait doDelete(values);\n\t\t\tsetData(data.filter((a) => !selectedSet.has(a._id)));\n\t\t} catch (e) {\n\t\t\talert.error(e);\n\t\t}\n\t});\n\n\t/* eslint-disable react-hooks/exhaustive-deps */\n\tuseEffect(() => {\n\t\tdoGetMany({})\n\t\t\t.then((data) => setData(data.map(appendId)))\n\t\t\t.catch((error) => alert.error(error));\n\t}, [schema]);\n\n\tconst onQuery = usePersistFn(async (query) => {\n\t\ttry {\n\t\t\tquery = Joi.attempt(query, querySchema2.joiObj);\n\t\t\tvar data = await doGetMany(query);\n\t\t\tsetData(data.map(appendId));\n\t\t} catch (e) {\n\t\t\talert.error(e);\n\t\t}\n\t});\n\n\tconst onDownloadExcel = usePersistFn(() => {\n\t\tif (!getManyStatus.data) return;\n\t\tvar table = serializeTable(getManyStatus.data, schema2, true);\n\t\ttableToExcel(table, \"export.xlsx\");\n\t});\n\tconst onExampleExcel = usePersistFn(() => {\n\t\tif (uploadPreviewUrl)\n\t\t\treturn window.open(uploadPreviewUrl, \"_blank\").focus();\n\t\tif (!getManyStatus.data) return;\n\t\tvar table = serializeTable(getManyStatus.data.slice(0, 3), schema2);\n\t\ttableToExcel(table, \"example.xlsx\");\n\t});\n\tconst onUploadExcel = usePersistFn(async (a) => {\n\t\ttry {\n\t\t\tvar rawExcel = await excelToTable(a);\n\t\t\tvar newRows = deserializeTable(rawExcel, schema2);\n\t\t\tvar newData = await createMany(newRows, newRows);\n\t\t\tif (!Array.isArray(newData) || newData.length !== newRows.length)\n\t\t\t\treturn alert.error(\"ข้อมูลจากเซิฟเวอร์ไม่ถูกต้อง\");\n\n\t\t\tsetData([...newData.map(appendId), ...getManyStatus.data]);\n\t\t\talert.success(\"อัพโหลดเรียบร้อย\");\n\t\t} catch (e) {\n\t\t\tif (e.name !== \"SerializeError\") return alert.error(e);\n\t\t\tsetExcelError(e.errors);\n\t\t\texcelModalControl.setVisible(true);\n\t\t}\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<Header name={name} description={description} />\n\t\t\t{querySchema && (\n\t\t\t\t<Form\n\t\t\t\t\tschema={querySchema2}\n\t\t\t\t\tonSubmit={onQuery}\n\t\t\t\t\tsubmitButtonLabel=\"ดึงข้อมูล\"\n\t\t\t\t\tinline\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t<Table\n\t\t\t\t{...getManyStatus}\n\t\t\t\tloading={getManyStatus.loading || deleteStatus.loading}\n\t\t\t\tschema={schema2}\n\t\t\t\tquerySchema={querySchema}\n\t\t\t\trowButtons={rowButtons}\n\t\t\t\tonEdit={updateOne && onEdit}\n\t\t\t\tonCreate={createMany && onCreate}\n\t\t\t\tonDelete={deleteMany && onDelete}\n\t\t\t\tonDownloadExcel={\n\t\t\t\t\t!disableExcelDownload && getManyStatus.data?.length\n\t\t\t\t\t\t? onDownloadExcel\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\tonUploadExcel={\n\t\t\t\t\t!disableExcelUpload && createMany ? onUploadExcel : null\n\t\t\t\t}\n\t\t\t\tonExampleExcel={\n\t\t\t\t\t!disableExcelUpload &&\n\t\t\t\t\tcreateMany &&\n\t\t\t\t\t(uploadPreviewUrl || getManyStatus.data?.length)\n\t\t\t\t\t\t? onExampleExcel\n\t\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\ttableScroll={tableScroll}\n\t\t\t\tupdateDataAtRow={updateDataAtRow}\n\t\t\t/>\n\t\t\t<EditModal\n\t\t\t\t{...editModalControl}\n\t\t\t\t{...editModalData}\n\t\t\t\tschema={schema2}\n\t\t\t\tonSubmit={onSubmit}\n\t\t\t\tsteps={steps}\n\t\t\t/>\n\t\t\t<ExcelErrorModal {...excelModalControl} errors={excelError} />\n\t\t</>\n\t);\n};\n\nController.propTypes = {\n\t// API\n\tgetMany: PropTypes.func.isRequired,\n\tcreateMany: PropTypes.func,\n\tupdateOne: PropTypes.func,\n\tdeleteMany: PropTypes.func,\n\n\t// modifier\n\tname: PropTypes.string.isRequired,\n\tdescription: PropTypes.string,\n\ttableScroll: PropTypes.object,\n\trowButtons: PropTypes.array,\n\n\t// form\n\tschema: PropTypes.object.isRequired,\n\tquerySchema: PropTypes.object,\n\tsteps: PropTypes.array,\n\tdevMode: PropTypes.bool,\n\n\t//excel\n\tdisableExcelDownload: PropTypes.bool,\n\tdisableExcelUpload: PropTypes.bool,\n\tuploadPreviewUrl: PropTypes.string,\n};\n\nController.defaultProps = {\n\tgetOne: null,\n\tcreateMany: null,\n\tupdateOne: null,\n\tdeleteMany: null,\n\tdescription: \"\",\n\ttableScroll: undefined,\n\trowButtons: [],\n\tquerySchema: null,\n\tdisableExcelDownload: false,\n\tdisableExcelUpload: false,\n\tuploadPreviewUrl: null,\n\tsteps: [],\n\tdevMode: false,\n};\n\nexport default Controller;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport EditModal from \"./edit_modal\";\nimport { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Joi from \"joi/lib/index\";\nimport { JoiWrapper } from \"../joi/joi_wrapper\";\nimport { alert } from \"./util\";\n\nexport const openFormModal = (props) => {\n\tif (!props.schema) throw new Error(\"schema required\");\n\tconst div = document.createElement(\"div\");\n\n\tconst onClose = () => {\n\t\tconst unmountResult = ReactDOM.unmountComponentAtNode(div);\n\t\tif (unmountResult && div.parentNode) div.parentNode.removeChild(div);\n\t};\n\n\tdocument.body.appendChild(div);\n\tconst props2 = {\n\t\t...props,\n\t\tonClose,\n\t\tschema: new JoiWrapper(props.schema, props.devMode),\n\t};\n\tsetTimeout(() => ReactDOM.render(<FormModal {...props2} />, div));\n};\n\nconst FormModal = (props) => {\n\tconst { onClose, schema, title, onSubmit, steps } = props;\n\tconst [error, setError] = useState(null);\n\n\tconst onSubmit2 = async (data, actions, originalData) => {\n\t\tsetError(null);\n\t\ttry {\n\t\t\tdata = Joi.attempt(data, schema.joiObj);\n\t\t\tawait onSubmit(data, originalData);\n\t\t\talert.success(\"บันทึกข้อมูลเรียบร้อย\");\n\t\t\tonClose();\n\t\t} catch (e) {\n\t\t\tsetError(e);\n\t\t\tactions.setSubmitting(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<EditModal\n\t\t\tisEdit={false}\n\t\t\tvisible={true}\n\t\t\tonClose={onClose}\n\t\t\tschema={schema}\n\t\t\tsteps={steps}\n\t\t\tcreateHeader={title}\n\t\t\terror={error}\n\t\t\tonSubmit={onSubmit2}\n\t\t/>\n\t);\n};\n\nFormModal.propTypes = {\n\tonClose: PropTypes.func.isRequired,\n\tschema: PropTypes.object.isRequired,\n\tonSubmit: PropTypes.func.isRequired,\n\ttitle: PropTypes.string,\n\tsteps: PropTypes.array,\n};\n\nFormModal.defaultProps = {\n\tsteps: [],\n\ttitle: null,\n};\n","export const raw = (a, isObj) =>\n\tisObj ? a : \"\\u0092\" + a.toString() + \"\\u0092\";\n\nexport const regex = (a, isObj) =>\n\tisObj ? a : \"\\u0092\" + a.toString().replace(/\\\\/g, \"\\u0091\") + \"\\u0092\";\n\nexport const showRaw = (a, isObj) => {\n\tif (isObj) return a;\n\treturn a\n\t\t.replace(/\\u0092\\\\*\"/g, \"\")\n\t\t.replace(/\\\\*\"\\u0092/g, \"\")\n\t\t.replace(/\\\\+n/g, \"\\n\")\n\t\t.replace(/\\\\+\"/g, '\"')\n\t\t.replace(/\\\\+'/g, \"'\")\n\t\t.replace(/\\u0092/g, \"\")\n\t\t.replace(/\\u0091/g, \"\\\\\");\n};\n\nexport const softEval = (a, type) => {\n\ttry {\n\t\t// eslint-disable-next-line\n\t\tvar ans = Function('\"use strict\";return (' + a + \")\")();\n\t\treturn ans == null ? a : ans;\n\t} catch (e) {\n\t\tif (type === \"array\") return a.split(/\\s*,\\s*/);\n\t\treturn a;\n\t}\n};\n\n// soft eval for function without dependencies\n// this bad eval-based implementation is selected since Function.toString() doesn't work with Babel\nexport const func = (str, isObj) => {\n\tif (!isObj) return raw(str, isObj);\n\t// eslint-disable-next-line\n\treturn Function(\n\t\t'\"use strict\";var wait = (ms) => new Promise((res) => setTimeout(res, ms));return (' +\n\t\t\tstr +\n\t\t\t\")\"\n\t)();\n};\n","import _ from \"lodash\";\nimport { Input } from \"formik-antd\";\nimport React, { useEffect } from \"react\";\nimport { useFormikContext } from \"formik\";\n\nexport const ReactiveComponent = (props) => {\n\tconst { values, setFieldValue } = useFormikContext();\n\tconst values2 = JSON.stringify(_.set({ ...values }, props.name, null));\n\tuseEffect(() => {\n\t\tsetFieldValue(props.name, values2, false);\n\t\t/* eslint-disable react-hooks/exhaustive-deps */\n\t}, [values2, props.name]);\n\treturn <Input disabled {...props} />;\n};\n\nReactiveComponent.str = `(props)=>{\nconst {values,setFieldValue} = useFormikContext();\nconst values2 = JSON.stringify(_.set({ ...values }, props.name, null));\nuseEffect(()=>{setFieldValue(props.name,values2,false);},[values2,props.name])\nreturn <Input disabled {...props}/>;\n}`;\n","import { Joi } from \"../../lib\";\nimport _ from \"lodash\";\nimport { raw, softEval, func, regex } from \"./util\";\nimport toSource from \"tosource\";\nimport { ReactiveComponent } from \"./advanced_component\";\n\nconst makeObject = (joiList) => {\n\tvar ans = Joi;\n\tfor (var joi of joiList) ans = ans[joi.name](...(joi.args || []));\n\treturn ans;\n};\n\nconst makeString = (joiList) => {\n\tvar ans = \"Joi\";\n\tfor (var joi of joiList) {\n\t\tvar args = joi.args || [];\n\t\tans += `.${joi.name}(${args.map((a) =>\n\t\t\ttoSource(a).replace(/\\n/g, \"\")\n\t\t)})`;\n\t}\n\treturn ans;\n};\n\n// return [{funcName, args}]\nexport const makeJoiLine = (editor, settings, isObj) => {\n\tvar ans = [];\n\n\tvar type = \"string\";\n\tvar newFieldType = \"\";\n\tvar suffix = [];\n\tswitch (editor.fieldType) {\n\t\tcase \"text area\":\n\t\t\tnewFieldType = \"TextArea\";\n\t\t\tbreak;\n\t\tcase \"advanced|reactive component\":\n\t\t\tvar onFieldRender = isObj\n\t\t\t\t? ReactiveComponent\n\t\t\t\t: raw(ReactiveComponent.str, isObj);\n\t\t\teditor = { onFieldRender, ...editor };\n\t\t\tbreak;\n\t\tcase \"format|url\":\n\t\t\tnewFieldType = \"InputURL\";\n\t\t\tbreak;\n\t\tcase \"format|tel\":\n\t\t\tnewFieldType = \"InputPhone\";\n\t\t\tbreak;\n\t\tcase \"format|email\":\n\t\t\tnewFieldType = \"InputEmail\";\n\t\t\tbreak;\n\t\tcase \"format|thai zipcode\":\n\t\t\teditor = { placeholder: \"เช่น 10210\", ...editor };\n\t\t\tsuffix.push({ name: \"pattern\", args: [regex(/^\\d{5}$/, isObj)] });\n\t\t\tsuffix.push({ name: \"message\", args: [\"รหัสไปรษณีย์ไม่ถูกต้อง\"] });\n\t\t\tbreak;\n\t\tcase \"format|thai citizen id\":\n\t\t\teditor = { placeholder: \"เช่น 0139499973311\", ...editor };\n\t\t\tsuffix.push({\n\t\t\t\tname: \"custom\",\n\t\t\t\targs: [\n\t\t\t\t\tfunc(\n\t\t\t\t\t\t`(id)=>{\nif (!/^\\u0091d{13}$/.test(id)) throw new Error(\"เลขประชาชนต้องเป็นเลข 13 หลัก\");\nvar digits = [];\nfor(var i = 0; i < 13; i++) digits.push(parseInt(id[i]));\nvar checksum = 0;\nfor(var j = 0; j < 12; i++) checksum += (13 - j) * digits[j];\nvar digit13 = checksum % 11;\ndigit13 = digit13 > 1 ? 11 - digit13 : 1 - digit13;\nif (digit13 !== digits[12]) throw new Error(\"เลขประชาชนไม่ถูกต้อง\");\nreturn id;}`,\n\t\t\t\t\t\tisObj\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t});\n\t\t\tbreak;\n\t\tcase \"checkbox\":\n\t\t\ttype = \"bool\";\n\t\t\tbreak;\n\t\tcase \"number\":\n\t\tcase \"date\":\n\t\t\ttype = editor.fieldType;\n\t\t\tbreak;\n\t\tcase \"advanced|barcode scanner\":\n\t\t\ttype = \"array\";\n\t\t\tsuffix.push({ name: \"min\", args: [1] });\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tcontainerStyle: { marginBottom: 30 },\n\t\t\t\tloadBarcodeName: func(\n\t\t\t\t\t'async (a) => {await wait(500); if (a === \"a001\") return \"iPhone\";}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t};\n\t\t\tbreak;\n\t\tcase \"dropdown\":\n\t\t\tsuffix.push({ name: \"valid\", args: [\"m\", \"f\"] });\n\t\t\teditor = { ...editor, validLabel: [\"ชาย\", \"หญิง\"] };\n\t\t\tbreak;\n\t\tcase \"upload|multiple images\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t'async (fileObj) => {await wait(500); return \"https://www.gravatar.com/avatar/1\"}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tbreak;\n\t\tcase \"upload|firebase\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t`async (file) => {\n// const path = 'images/' + nanoid();\n// const storageRef = ref(getFirebase(), path);\n// await uploadBytes(storageRef, file);\n// return await getDownloadURL(storageRef);\nawait wait(500);\nreturn \"https://www.gravatar.com/avatar/1\"}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileInit: func(`() => getFirebase()`, isObj),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tbreak;\n\t\tcase \"upload|google cloud storage\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: true,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t`async (file) => {\n// https://cloud.google.com/storage/docs/samples/storage-generate-signed-url-v4\n// var serverUrl = 'https://www.example.com/get-upload-url?filename=';\n// var url = await axios.get(serverUrl + encodeURIComponent(file.name));\n// await axios.put(url, file, {headers: { \"Content-Type\": file.type }});\n// return url;\nawait wait(500);\nreturn \"https://www.gravatar.com/avatar/1\"}`,\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"image\",\n\t\t\t\taccept: \".png,.jpeg,.jpg,.gif\",\n\t\t\t};\n\t\t\ttype = \"array\";\n\t\t\tbreak;\n\t\tcase \"upload|single file\":\n\t\t\teditor = {\n\t\t\t\t...editor,\n\t\t\t\tmultiple: false,\n\t\t\t\tuploadFile: func(\n\t\t\t\t\t'async (fileObj) => {await wait(500); return \"https://www.gravatar.com/avatar/1\"}',\n\t\t\t\t\tisObj\n\t\t\t\t),\n\t\t\t\tuploadFileType: \"file\",\n\t\t\t\taccept: \".pdf\",\n\t\t\t};\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\tans.push({ name: type }, { name: \"label\", args: [editor.label] });\n\n\tif (editor.require) ans.push({ name: \"required\" });\n\tif (editor.defaultValue)\n\t\tans.push({\n\t\t\tname: \"default\",\n\t\t\targs: [softEval(editor.defaultValue, type)],\n\t\t});\n\tans = ans.concat(suffix);\n\n\tvar meta = _.omit(editor, [\n\t\t\"require\",\n\t\t\"defaultValue\",\n\t\t\"label\",\n\t\t\"fieldType\",\n\t\t\"_fieldType\",\n\t\t\"extraMargin\",\n\t\t\"name\",\n\t\t\"columnWidth\",\n\t]);\n\tif (editor.extraMargin)\n\t\tmeta.containerStyle = _.assign(meta.containerStyle, {\n\t\t\tmarginBottom: 20,\n\t\t});\n\tif (editor.columnWidth) meta.cellWidth = editor.columnWidth;\n\tif (newFieldType) meta.fieldType = newFieldType;\n\tif (settings.steps) meta.step = meta.step || 0;\n\telse delete meta.step;\n\n\tif (_.size(meta))\n\t\tans.push({\n\t\t\tname: \"meta\",\n\t\t\targs: [isObj ? meta : raw(JSON.stringify(meta))],\n\t\t});\n\n\tif (isObj) return makeObject(ans);\n\treturn makeString(ans);\n};\n","import { Chance } from \"../../lib\";\nimport _ from \"lodash\";\nimport { raw, showRaw } from \"./util\";\nimport toSource from \"tosource\";\n\nvar chance = null;\nconst getChance = (seed) => {\n\tif (seed) return new Chance(seed);\n\tif (!chance) chance = new Chance(Math.random());\n\treturn chance;\n};\n\nexport const genChanceString = (editors, count) => {\n\tvar objSpec = {};\n\tfor (var editor of editors) {\n\t\tvar spec = editorToChance(editor);\n\t\tvar args = spec.args\n\t\t\t? toSource(spec.args)\n\t\t\t\t\t.replace(/^\\[\\s*/, \"\")\n\t\t\t\t\t.replace(/\\s*\\]$/, \"\")\n\t\t\t: \"\";\n\t\t_.set(objSpec, editor.name, raw(`chance.${spec.name}(${args})`));\n\t}\n\treturn `()=>{const ans=[]; for(let i=0;i<${count};i++)ans.push(${showRaw(\n\t\tJSON.stringify(objSpec)\n\t)}); return ans;}`;\n};\n\nexport const randomData = (editors, count, seed) => {\n\tvar ans = [];\n\tvar chance = getChance(seed);\n\tfor (var i = 0; i < count; i++) {\n\t\tvar newValue = {};\n\t\tfor (var editor of editors) {\n\t\t\tvar spec = editorToChance(editor);\n\t\t\tvar newRandom = chance[spec.name].apply(chance, spec.args || []);\n\t\t\t_.set(newValue, editor.name, newRandom);\n\t\t}\n\t\tans.push(newValue);\n\t}\n\treturn ans;\n};\n\nconst editorToChance = (editor) => {\n\tswitch (editor.fieldType) {\n\t\tcase \"format|url\":\n\t\tcase \"upload|single file\":\n\t\t\treturn { name: \"avatar\", args: [{ protocol: \"https\" }] };\n\t\tcase \"upload|multiple images\":\n\t\tcase \"upload|firebase\":\n\t\tcase \"upload|google cloud storage\":\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [\n\t\t\t\t\t[\n\t\t\t\t\t\t\"https://www.gravatar.com/avatar/407cedb085e93b2253656ce07a52a898\",\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t};\n\t\tcase \"format|tel\":\n\t\t\treturn { name: \"pickone\", args: [[\"0812345678\", \"021111111\"]] };\n\t\tcase \"format|email\":\n\t\t\treturn { name: \"email\" };\n\t\tcase \"format|thai zipcode\":\n\t\t\treturn { name: \"pickone\", args: [[\"10210\", \"10400\"]] };\n\t\tcase \"format|thai citizen id\":\n\t\t\treturn {\n\t\t\t\tname: \"pickone\",\n\t\t\t\targs: [[\"0139499973311\", \"0547041689552\"]],\n\t\t\t};\n\t\tcase \"checkbox\":\n\t\t\treturn { name: \"bool\" };\n\t\tcase \"number\":\n\t\t\treturn { name: \"natural\", args: [{ max: 30 }] };\n\t\tcase \"date\":\n\t\t\treturn { name: \"date\", args: [] };\n\t\tcase \"advanced|barcode scanner\":\n\t\t\treturn { name: \"pickone\", args: [[[\"a001\"], [\"a002\"]]] };\n\t\tcase \"dropdown\":\n\t\t\treturn { name: \"pickone\", args: [[\"m\", \"f\"]] };\n\t\tcase \"text area\":\n\t\t\treturn { name: \"paragraph\" };\n\t\tcase \"advanced|reactive component\":\n\t\t\treturn { name: \"pickone\", args: [[null]] };\n\t\tdefault:\n\t\t\treturn { name: \"word\" };\n\t}\n};\n","import _ from \"lodash\";\nimport prettier from \"prettier/standalone\";\nimport parserBabel from \"prettier/parser-babel\";\nimport { makeJoiLine } from \"./joi_line\";\nimport { raw, showRaw, func } from \"./util\";\nimport { randomData, genChanceString } from \"./chance\";\n\nexport const wait = (ms) => new Promise((res) => setTimeout(res, ms));\n\nconst traverse = (node) => {\n\tif (typeof node === \"string\") return node;\n\n\tvar ans = {};\n\tfor (var key in node) ans[key] = raw(traverse(node[key]));\n\treturn raw(`Joi.object(${JSON.stringify(ans, null, 1)})`);\n};\n\nexport const renderJoi = (editors, settings, isComp) => {\n\tvar ans = {};\n\tfor (var editor of editors)\n\t\t_.set(ans, editor.name, makeJoiLine(editor, settings));\n\treturn showRaw(traverse(ans));\n};\n\nexport const renderProps = (editors, settings, isComp) => {\n\tconst { canCreate, canUpdate, canDelete, querySchema, devMode } = settings;\n\n\t// required\n\tvar ans = { name: settings.name || \"{tableName}\" };\n\n\tif (isComp) {\n\t\tans.getMany = raw(async () => {\n\t\t\tawait wait(500);\n\t\t\treturn randomData(editors, 3);\n\t\t}, isComp);\n\t} else {\n\t\tans.schema = raw(\"schema\", false);\n\t\tif (querySchema) ans.querySchema = raw(renderJoi(querySchema, {}));\n\t\tans.getMany = raw(\"async ()=>{await wait(500);return mockData();}\");\n\t}\n\n\tif (canCreate)\n\t\tans.createMany = func(\"async (a)=>{await wait(500);return a;}\", isComp);\n\tif (canDelete)\n\t\tans.deleteMany = func(\"async ()=>{await wait(500);}\", isComp);\n\tif (canUpdate) ans.updateOne = func(\"async ()=>{await wait(500);}\", isComp);\n\n\t// literal\n\tvar extras = _.pick(settings, [\n\t\t\"disableExcelDownload\",\n\t\t\"disableExcelUpload\",\n\t\t\"uploadPreviewUrl\",\n\t\t\"description\",\n\t\t\"steps\",\n\t]);\n\t_.assign(ans, extras);\n\tans.devMode = devMode || false;\n\tif (ans.steps) ans.steps = ans.steps.split(/\\s*,\\s*/);\n\n\tif (isComp) return ans;\n\treturn showRaw(JSON.stringify(ans, null, 1));\n};\n\nexport const format = (a, isJson) => {\n\tif (isJson) a = \"(\" + a + \")\";\n\treturn prettier.format(a, { parser: \"babel\", plugins: [parserBabel] });\n};\n\nexport const renderImport = (editors) => {\n\tconst ans = new Set();\n\tfor (var editor of editors) {\n\t\tif (editor.fieldType === \"upload|google cloud storage\")\n\t\t\tans.add(\"import axios from 'axios';\");\n\t\telse if (editor.fieldType === \"upload|firebase\") {\n\t\t\tans.add(\"import { initializeApp } from 'firebase/app';\");\n\t\t\tans.add(\n\t\t\t\t\"import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\"\n\t\t\t);\n\t\t\tans.add(\"import { nanoid } from 'nanoid';\");\n\t\t} else if (editor.fieldType === \"advanced|reactive component\") {\n\t\t\tans.add(\"import {useFormikContext} from 'formik';\");\n\t\t\tans.add(\"import {Input} from 'formik-antd';\");\n\t\t\tans.add(\"import _ from 'lodash';\");\n\t\t\tans.add(\"import {useEffect} from 'react';\");\n\t\t}\n\t}\n\tif (!ans.size) return \"\";\n\treturn \"\\n\" + [...ans].join(\"\\n\");\n};\n\nexport const renderFunction = (editors) => {\n\tconst ans = new Set();\n\tfor (var editor of editors) {\n\t\tif (editor.fieldType === \"upload|firebase\")\n\t\t\tans.add(`\\nlet storage = null;\nconst getFirebase = () => {\nif (!storage) storage = getStorage(initializeApp({\napiKey: \"\",\nauthDomain: \"\",\nprojectId: \"\",\nstorageBucket: \"\",\nmessagingSenderId: \"\",\nappId: \"\",\nmeasurementId: \"\",\n}));\nreturn storage;\n};`);\n\t}\n\tif (!ans.size) return \"\";\n\treturn \"\\n\" + [...ans].join(\"\\n\");\n};\n\nexport const renderTemplate = (editors, settings) => {\n\treturn format(`import { Joi, AutoAdmin, Chance } from 'joi_auto_admin';\nimport React from 'react';${renderImport(editors)}\n\nconst wait = (ms) => new Promise((res) => setTimeout(res, ms));\nconst chance = new Chance(0);${renderFunction(editors)}\n\nconst schema = ${renderJoi(editors, settings)};\n\nconst mockData = ${genChanceString(editors, 3)};\n\nconst App = ()=>{\n\tconst props = ${renderProps(editors, settings)};\n\treturn <AutoAdmin {...props} />\n}\n\nexport default App;\n`);\n};\n","import { Joi, AutoAdmin } from \"../../lib\";\nimport React from \"react\";\nimport { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { renderProps, renderTemplate } from \"./template\";\nimport { makeJoiLine } from \"./joi_line\";\nimport _ from \"lodash\";\nimport { Spin } from \"antd\";\n\nconst editorSchemaInner = Joi.object({\n\tname: Joi.string().required().min(1),\n\tlabel: Joi.string().required().min(1),\n\tfieldType: Joi.string()\n\t\t.required()\n\t\t.valid(\n\t\t\t\"dropdown\",\n\t\t\t\"upload|single file\",\n\t\t\t\"upload|multiple images\",\n\t\t\t\"upload|firebase\",\n\t\t\t\"upload|google cloud storage\",\n\t\t\t\"input\",\n\t\t\t\"format|url\",\n\t\t\t\"format|tel\",\n\t\t\t\"format|email\",\n\t\t\t\"format|thai zipcode\",\n\t\t\t\"format|thai citizen id\",\n\t\t\t\"advanced|barcode scanner\",\n\t\t\t\"advanced|reactive component\",\n\t\t\t\"checkbox\",\n\t\t\t\"number\",\n\t\t\t\"date\",\n\t\t\t\"text area\"\n\t\t),\n\t_fieldType: Joi.any(),\n\tstep: Joi.number(),\n\tplaceholder: Joi.string(),\n\tdefaultValue: Joi.string(),\n\trequire: Joi.boolean(),\n\tdisabled: Joi.boolean(),\n\ttwoColumn: Joi.boolean(),\n\textraMargin: Joi.boolean(),\n\tcolumnWidth: Joi.number(),\n\tcellEllipsis: Joi.boolean(),\n\tcolumnHide: Joi.boolean(),\n\tdisableSorting: Joi.boolean(),\n\tdisableFilter: Joi.boolean(),\n});\n\nconst editorSchema1 = Joi.array()\n\t.items(editorSchemaInner, Joi.any().strip())\n\t.unique(\"name\");\nconst editorSchema2 = Joi.array().items(editorSchemaInner).unique(\"name\");\n\nconst settingsSchema = Joi.object({\n\tname: Joi.string(),\n\tdescription: Joi.string(),\n\tcanCreate: Joi.boolean(),\n\tcanUpdate: Joi.boolean(),\n\tcanDelete: Joi.boolean(),\n\tquerySchema: editorSchema1,\n\tdisableExcelDownload: Joi.boolean(),\n\tdisableExcelUpload: Joi.boolean(),\n\tuploadPreviewUrl: Joi.string(),\n\tsteps: Joi.string(),\n});\n\nexport const editorToCode = (editors, settings) => {\n\tvar editors2 = editorSchema1.validate(editors);\n\tvar settings2 = settingsSchema.validate(settings);\n\treturn renderTemplate(editors2.value, settings2.value);\n};\n\nexport const validateEditor = (editors) => editorSchema2.validate(editors);\n\nconst traverse = (node) => {\n\tif (Joi.isSchema(node)) return node;\n\tvar ans = {};\n\tfor (var key in node) ans[key] = traverse(node[key]);\n\treturn Joi.object(ans);\n};\n\nexport const makeJoiObj = (editors, settings) => {\n\tvar ans = {};\n\tfor (var editor of editors)\n\t\t_.set(ans, editor.name, makeJoiLine(editor, settings, true));\n\treturn traverse(ans);\n};\n\nexport const App = (props) => {\n\tconst { editors, settings } = props;\n\n\tconst props2 = useMemo(() => {\n\t\tif (!settings) return null;\n\n\t\tconst ans = renderProps(editors, settings, true);\n\t\tans.schema = makeJoiObj(editors, settings);\n\t\tif (settings.querySchema)\n\t\t\tans.querySchema = makeJoiObj(settings.querySchema, {});\n\t\treturn ans;\n\t}, [editors, settings]);\n\n\tif (!editors.length) return \"กรุณาสร้างข้อมูลด้านซ้าย\";\n\tif (!settings)\n\t\treturn (\n\t\t\t<center>\n\t\t\t\t<Spin />\n\t\t\t</center>\n\t\t);\n\treturn <AutoAdmin {...props2} />;\n};\nApp.propTypes = {\n\teditors: PropTypes.array,\n\tsettings: PropTypes.object,\n};\nApp.defaultProps = {\n\teditors: [\n\t\t{\n\t\t\tname: \"hello.abc\",\n\t\t\tlabel: \"helloName\",\n\t\t\trequire: true,\n\t\t\tdefaultValue: \"a\",\n\t\t\textraMargin: true,\n\t\t},\n\t],\n\tsettings: null,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport RenderCodeBlocks from \"./code-blocks\";\nimport { MENU } from \"../constants\";\nimport { App as TransView } from \"../../../logic\";\nimport { renderTemplate } from \"../../../logic/template\";\n\nconst RightPanelView = (props) => {\n  const { view, editors, settings } = props;\n\n  if (view === MENU.code) {\n    const codeText = renderTemplate(editors, settings);\n    return <RenderCodeBlocks text={codeText} />;\n  }\n\n  return <TransView editors={editors} settings={settings} />;\n};\n\nRightPanelView.propTypes = {\n  view: PropTypes.oneOf([MENU.ui, MENU.code]),\n  editors: PropTypes.array,\n  settings: PropTypes.object,\n};\n\nRightPanelView.defaultProps = {\n  view: MENU.ui,\n};\n\nexport default RightPanelView;\n","import lodash from \"lodash\";\n\nconst generateId = () => {\n  return Math.floor(Math.random() * 90000) + 10000;\n};\n\nexport const getInitRowField = () => {\n  const initRows = [{ ...rowField }, { ...rowField }, { ...rowField }];\n  return initRows.map((item) => {\n    const id = generateId();\n    return {\n      ...item,\n      name: \"name-\" + id,\n      label: \"label-\" + id,\n    };\n  });\n};\n\nexport const getSingleRow = (stepOptions) => {\n  const row = { ...rowField };\n  const id = generateId();\n  row.name = rowField.name + `-${id}`;\n  row.label = rowField.label + `-${id}`;\n  if (lodash.get(stepOptions, \"[0]\")) {\n    row.step = lodash.get(stepOptions, \"[0].value\");\n  }\n  return row;\n};\n\nexport const getInitRowQuerySchema = () => {\n  const initRows = [{ ...rowQuerySchema }];\n  return initRows.map((item) => {\n    const id = generateId();\n    return {\n      ...item,\n      name: \"name-\" + id,\n      label: \"label-\" + id,\n    };\n  });\n};\n\nexport const getSingleRowQuerySchema = () => {\n  const row = { ...rowQuerySchema };\n  const id = generateId();\n  row.name = rowQuerySchema.name + `-${id}`;\n  row.label = rowQuerySchema.label + `-${id}`;\n  return row;\n};\n\nexport const rowField = {\n  name: \"name\",\n  label: \"label\",\n  fieldType: \"input\",\n  _fieldType: [\"input\"],\n  placeholder: \"\",\n  defaultValue: \"\",\n  step: \"\",\n  require: false,\n  disabled: false,\n  twoColumn: false,\n  extraMargin: false,\n  columnWidth: \"\",\n  cellEllipsis: false,\n  columnHide: false,\n  disabledSorting: false,\n  disableFilter: false,\n};\n\nexport const rowQuerySchema = {\n  name: \"name\",\n  label: \"label\",\n  fieldType: \"input\",\n  placeholder: \"\",\n};\n\nexport const disabledDefaultList = [\n  \"advanced|barcode scanner\",\n  \"upload|single file\",\n  \"upload|multiple images\",\n  \"upload|firebase\",\n  \"upload|google cloud storage\",\n  \"dropdown\",\n  \"advanced|reactive component\",\n];\n\nexport const placeholderDefault = {\n  checkbox: \"true/false\",\n  date: \"YYYY-MM-DD\",\n  \"format|url\": \"http://www.google.com/...\",\n  \"format|tel\": \"0811111111\",\n  \"format|email\": \"abc@example.com\",\n  \"format|thai citizen id\": \"0139499973311\",\n  \"format|thai zipcode\": \"10210\",\n  number: \"0/1/2/...\",\n};\n\nexport const fieldOptions = [\"require\", \"disabled\", \"twoColumn\", \"extraMargin\"];\n\nexport const columnOptions = [\n  \"cellEllipsis\",\n  \"columnHide\",\n  \"disableSorting\",\n  \"disableFilter\",\n];\n\nexport const fieldTree = [\n  { l: \"input\" },\n  { l: \"dropdown\" },\n  { l: \"checkbox\" },\n  { l: \"number\" },\n  { l: \"date\" },\n  { l: \"text area\" },\n  {\n    l: \"upload\",\n    c: [\n      { l: \"single file\" },\n      { l: \"multiple images\" },\n      { l: \"firebase\" },\n      { l: \"google cloud storage\" },\n    ],\n  },\n  {\n    l: \"format\",\n    c: [\n      { l: \"url\" },\n      { l: \"tel\" },\n      { l: \"email\" },\n      { l: \"thai citizen id\" },\n      { l: \"thai zipcode\" },\n    ],\n  },\n  { l: \"advanced\", c: [{ l: \"reactive component\" }, { l: \"barcode scanner\" }] },\n];\n\nexport const queryFieldTree = [\n  \"input\",\n  \"dropdown\",\n  \"number\",\n  \"checkbox\",\n  \"date\",\n];\n","export const fullWidth = {\n  width: \"100%\",\n};\n\nexport const Wrapper1 = {\n  padding: \"1rem\",\n};\n\nexport const Wrapper2 = {\n  padding: \"0 1rem\",\n};\n\nexport const contentWhite = {\n  backgroundColor: \"white\",\n  padding: \"2rem\",\n  borderRadius: 8,\n};\n\nexport const layoutMargin = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  margin: \"0 0 1rem 0\",\n};\n\nexport const checkbox = {\n  marginLeft: 0,\n  marginTop: \"0.5rem\",\n};\n\nexport const input = {\n  maxWidth: 500,\n  marginRight: \"1rem\",\n  marginBottom: \"1rem\",\n};\n\nexport const VerticalSpacer = {\n  margin: \"2rem 0\",\n};\n\nexport const rowInput = {\n  marginBottom: \"1rem\",\n};\n","import _ from \"lodash\";\nimport { disabledDefaultList } from \"./data-field\";\n\nexport const checkIsDisabledDefault = (type) => {\n  const findDisabledIndex = disabledDefaultList.findIndex((v) => v === type);\n  return findDisabledIndex > -1;\n};\n\nexport const createOptions = (options) => {\n  if (!Array.isArray(options)) {\n    return [];\n  }\n  return options.map((item) => ({ label: item, value: item }));\n};\n\nexport const createConfig = (index, options, newForm, dataOptions) => {\n  if (!_.get(options, \"[0]\")) {\n    const defaultConfig = {};\n    dataOptions.forEach((item) => {\n      defaultConfig[item] = false;\n    });\n    newForm[index] = {\n      ...(newForm[index] && newForm[index]),\n      ...defaultConfig,\n    };\n    return newForm;\n  }\n  const keyDiffOptions = _.keyBy(_.difference(dataOptions, options));\n  dataOptions.forEach((item) => {\n    if (keyDiffOptions[item]) {\n      newForm[index][item] = false;\n    } else {\n      newForm[index][item] = true;\n    }\n  });\n  return newForm;\n};\n\n\nexport const createStepOptions = () => {\n  const options = [{ label: 'No step', value: 'No step' }];\n  for (let i = 2; i <= 20; i++) {\n    options.push({ label: i + ' step', value: i })\n  }\n  return options;\n}\n\nexport const getDefaultBooleanConfig = (options) => {\n  if (!Array.isArray(options)) {\n    return options;\n  }\n  return options.find(item => item.label === 'extraMargin')\n}\n\nexport const getHeader = (name, step) => {\n  if (!step && step !== 0) {\n    return name;\n  }\n  return `${name} (${step})`\n}","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport lodash from \"lodash\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport {\n  Input,\n  Form,\n  Checkbox,\n  Collapse,\n  Row,\n  Col,\n  Typography,\n  Select,\n  Divider,\n  Button,\n} from \"antd\";\nimport { SETTINGS } from \"../constants\";\nimport {\n  queryFieldTree,\n  getInitRowQuerySchema,\n  getSingleRowQuerySchema,\n} from \"./data-field\";\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\n\nconst RenderSetting = (props) => {\n  const { settingState, setSettingState } = props;\n  const [optionsStep] = useState(() => logic.createStepOptions());\n\n  const cloneState = () => {\n    const newSettings = { ...settingState };\n    return newSettings;\n  };\n\n  const onChangeCheckbox = (type) => {\n    const newSettings = cloneState();\n    if (newSettings[type]) {\n      delete newSettings[type];\n    } else {\n      newSettings[type] = true;\n    }\n    setSettingState(newSettings);\n  };\n\n  const onChangeField = (key, value) => {\n    const newSettings = cloneState();\n    newSettings[key] = value;\n    if (key === \"step\") {\n      onChangeSteps(newSettings, value);\n      return;\n    }\n    setSettingState(newSettings);\n  };\n\n  const onChangeSteps = (state, numberOfStep) => {\n    if (numberOfStep === \"No step\") {\n      state.step = numberOfStep;\n      state.steps = [];\n    }\n    const steps = [];\n    for (let i = 1; i <= numberOfStep; i++) {\n      steps.push({ placeholder: `label step ${i}`, value: `label step ${i}` });\n    }\n    state.steps = [...steps];\n    setSettingState(state);\n  };\n\n  const onChangeInputSteps = (index, value) => {\n    const newSettings = cloneState();\n    newSettings.steps[index].value = value;\n    setSettingState(newSettings);\n  };\n\n  const onChangCheckboxQuery = () => {\n    const newSettings = cloneState();\n    if (newSettings.querySchema.query) {\n      newSettings.querySchema.schema = [...getInitRowQuerySchema()];\n    }\n    newSettings.querySchema.query = !newSettings.querySchema.query;\n    setSettingState(newSettings);\n  };\n\n  const onChangeFieldQuerySchema = (index, key, value) => {\n    if (!key) {\n      return;\n    }\n    const newSettings = cloneState();\n    if (!newSettings.querySchema.schema[index]) {\n      return;\n    }\n    newSettings.querySchema.schema[index][key] = value;\n    setSettingState(newSettings);\n  };\n\n  const onAddQuerySchema = () => {\n    const newSettings = cloneState();\n    newSettings.querySchema.schema = [\n      ...newSettings.querySchema.schema,\n      { ...getSingleRowQuerySchema() },\n    ];\n    setSettingState(newSettings);\n  };\n\n  const onDeleteQuerySchema = (index) => {\n    const newSettings = cloneState();\n    if (!lodash.get(newSettings.querySchema?.schema, \"[1]\")) {\n      newSettings.querySchema.query = false;\n      newSettings.querySchema.schema = [...getInitRowQuerySchema()];\n    } else {\n      newSettings.querySchema.schema.splice(index, 1);\n    }\n    setSettingState(newSettings);\n  };\n\n  return (\n    <Form>\n      <Typography.Title level={5}>Table Settings</Typography.Title>\n      <Input\n        style={styles.input}\n        placeholder=\"name\"\n        value={settingState?.name}\n        onChange={(event) => onChangeField(\"name\", event.target.value)}\n      />\n      <Input\n        style={styles.input}\n        placeholder=\"description\"\n        value={settingState?.description}\n        onChange={(event) => onChangeField(\"description\", event.target.value)}\n      />\n      <div style={styles.layoutMargin}>\n        {Array.isArray(SETTINGS) &&\n          SETTINGS.map((item, index) => (\n            <Checkbox\n              key={index.toString()}\n              style={{\n                margin: index === 0 ? \"0.2rem 0 0.5rem 0\" : \"0 0 0.5rem 0\",\n              }}\n              checked={settingState[item]}\n              onChange={() => onChangeCheckbox(item)}\n            >\n              {item}\n            </Checkbox>\n          ))}\n        <Divider />\n        <div>\n          <Typography.Title level={5}>Multi-step Form</Typography.Title>\n          <Row>\n            <Typography.Text style={{ padding: \"0.25rem 0.5rem 0 0\" }}>\n              Form Steps\n            </Typography.Text>\n            {Array.isArray(optionsStep) && (\n              <Select\n                defaultValue={settingState?.step || optionsStep[0].value}\n                style={{ flex: 1 }}\n                onChange={(value) => onChangeField(\"step\", value)}\n              >\n                {optionsStep.map((st, si) => (\n                  <Select.Option key={si.toString()} value={st.value}>\n                    {st.label}\n                  </Select.Option>\n                ))}\n              </Select>\n            )}\n          </Row>\n          <div style={{ paddingTop: \"1rem\" }}>\n            {Array.isArray(settingState?.steps) &&\n              settingState.steps.map((item, index) => (\n                <Row key={index.toString()} style={{ padding: \"0.5rem 0\" }}>\n                  <Col style={{ padding: \"0.25rem 0.5rem 0 0\", width: 65 }}>\n                    <Typography.Text>{`step ${index + 1}`}</Typography.Text>\n                  </Col>\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder={item.placeholder}\n                      value={item.value}\n                      onChange={(event) =>\n                        onChangeInputSteps(index, event.target.value)\n                      }\n                    />\n                  </Col>\n                </Row>\n              ))}\n          </div>\n        </div>\n        <Divider />\n        <div>\n          <Typography.Title level={5}>Table Query</Typography.Title>\n          <Checkbox\n            checked={settingState.querySchema?.query || false}\n            onChange={() => onChangCheckboxQuery()}\n          >\n            enable table query\n          </Checkbox>\n          {settingState.querySchema?.query && (\n            <>\n              <div style={{ padding: \"1rem 0 0 0\" }}>\n                {lodash.get(settingState.querySchema?.schema, \"[0]\") && (\n                  <Collapse defaultActiveKey={[\"0\"]} accordion>\n                    {settingState.querySchema.schema.map((qs, qi) => (\n                      <Collapse.Panel\n                        key={qi.toString()}\n                        header={qs.name}\n                        extra={\n                          <Button\n                            type=\"dashed\"\n                            danger\n                            onClick={(event) => {\n                              onDeleteQuerySchema(qi);\n                              event.stopPropagation();\n                            }}\n                          >\n                            Delete\n                          </Button>\n                        }\n                      >\n                        <Row style={styles.rowInput}>\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"name\"\n                              value={qs.name}\n                              onChange={(event) =>\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"name\",\n                                  event.target.value\n                                )\n                              }\n                            />\n                          </Col>\n                          <Col span=\"1\" />\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"label\"\n                              value={qs.label}\n                              onChange={(event) =>\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"label\",\n                                  event.target.value\n                                )\n                              }\n                            />\n                          </Col>\n                        </Row>\n                        <Row style={styles.rowInput}>\n                          <Col flex=\"1\">\n                            <Row>\n                              <Typography.Text\n                                style={{ padding: \"0.25rem 0.5rem 0 0\" }}\n                              >\n                                FieldType\n                              </Typography.Text>\n                              {Array.isArray(queryFieldTree) && (\n                                <Select\n                                  defaultValue={queryFieldTree[0]}\n                                  style={{ flex: 1 }}\n                                  onChange={(value) =>\n                                    onChangeFieldQuerySchema(\n                                      qi,\n                                      \"fieldType\",\n                                      value\n                                    )\n                                  }\n                                >\n                                  {queryFieldTree.map((ft, fi) => (\n                                    <Select.Option\n                                      key={fi.toString()}\n                                      value={ft}\n                                    >\n                                      {ft}\n                                    </Select.Option>\n                                  ))}\n                                </Select>\n                              )}\n                            </Row>\n                          </Col>\n                          <Col span=\"1\" />\n                          <Col flex=\"1\">\n                            <Input\n                              placeholder=\"placeholder\"\n                              value={qs.placeholder}\n                              onChange={(event) => {\n                                onChangeFieldQuerySchema(\n                                  qi,\n                                  \"placeholder\",\n                                  event.target.value\n                                );\n                              }}\n                            />\n                          </Col>\n                        </Row>\n                      </Collapse.Panel>\n                    ))}\n                  </Collapse>\n                )}\n              </div>\n              <div>\n                <Button\n                  block\n                  type=\"primary\"\n                  icon={<PlusOutlined />}\n                  style={styles.VerticalSpacer}\n                  onClick={onAddQuerySchema}\n                >\n                  Add Query\n                </Button>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </Form>\n  );\n};\n\nRenderSetting.propTypes = {\n  formState: PropTypes.array.isRequired,\n  setSettingState: PropTypes.func.isRequired,\n};\n\nexport default RenderSetting;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Form,\n  Button,\n  Collapse,\n  Select,\n  Row,\n  Col,\n  Input,\n  Checkbox,\n  Divider,\n  Typography,\n  Cascader,\n} from \"antd\";\nimport _ from \"lodash\";\nimport {\n  fieldOptions,\n  columnOptions,\n  getSingleRow,\n  placeholderDefault,\n  fieldTree,\n} from \"./data-field\";\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\n\nconst FormFields = (props) => {\n  const { formState, setFormState, settingState } = props;\n\n  const [dataFieldOptions] = useState(() => logic.createOptions(fieldOptions));\n  const [dataColumnOptions] = useState(() =>\n    logic.createOptions(columnOptions)\n  );\n\n  useEffect(() => {\n    if (_.get(settingState?.steps, \"[0]\")) {\n      onSetDefaultStep();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [settingState]);\n\n  const cloneState = () => {\n    const newForm = [...formState];\n    return newForm;\n  };\n\n  const onSetDefaultStep = () => {\n    let newForm = [...formState];\n    if (!Array.isArray(newForm)) {\n      return;\n    }\n    newForm = newForm.map((item) => {\n      const rowForm = { ...item };\n      if (!rowForm.step) {\n        rowForm.step = _.get(settingState.steps, \"[0].value\");\n      }\n      const isStepValueChanged =\n        rowForm.step &&\n        !settingState.steps.find((s) => s.value === rowForm.step);\n      if (isStepValueChanged) {\n        rowForm.step = _.get(settingState.steps, \"[0].value\");\n      }\n      return rowForm;\n    });\n    setFormState(newForm);\n  };\n\n  const onDeleteField = (index) => {\n    if (!Array.isArray(formState)) {\n      return;\n    }\n    if (!_.get(formState, \"[1]\")) {\n      setFormState([{ ...getSingleRow(settingState?.steps) }]);\n      return;\n    }\n    const newForm = cloneState();\n    newForm.splice(index, 1);\n    setFormState(newForm);\n  };\n\n  const onChangeField = (index, key, value) => {\n    if (!Array.isArray(formState) || !key) {\n      return;\n    }\n    let newForm = cloneState();\n    if (!newForm[index] || !newForm[index]?.hasOwnProperty(key)) {\n      return;\n    }\n    newForm[index][key] = value;\n    if (key === \"fieldType\" && logic.checkIsDisabledDefault(value)) {\n      newForm[index].defaultValue = \"\";\n    }\n    setFormState([...newForm]);\n  };\n\n  const onChangeConfig = (key, index, options) => {\n    let newForm = cloneState();\n    const data = key === \"field\" ? fieldOptions : columnOptions;\n    const newOptionConfig = logic.createConfig(index, options, newForm, data);\n    setFormState([...newOptionConfig]);\n  };\n\n  return (\n    <div>\n      <Form>\n        {_.get(formState, \"[0]\") && (\n          <Collapse defaultActiveKey={[\"0\"]} accordion>\n            {formState.map((item, index) => (\n              <Collapse.Panel\n                key={index.toString()}\n                header={logic.getHeader(item.name, item.step)}\n                extra={\n                  <Button\n                    type=\"dashed\"\n                    danger\n                    onClick={(event) => {\n                      onDeleteField(index);\n                      event.stopPropagation();\n                    }}\n                  >\n                    Delete\n                  </Button>\n                }\n              >\n                <Row style={styles.rowInput}>\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder=\"name\"\n                      value={item.name}\n                      onChange={(event) =>\n                        onChangeField(index, \"name\", event.target.value)\n                      }\n                    />\n                  </Col>\n                  <Col span=\"1\" />\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder=\"label\"\n                      value={item.label}\n                      onChange={(event) =>\n                        onChangeField(index, \"label\", event.target.value)\n                      }\n                    />\n                  </Col>\n                </Row>\n                <Row style={styles.rowInput}>\n                  <Col flex=\"1\">\n                    <Row>\n                      <Typography.Text\n                        style={{ padding: \"0.25rem 0.5rem 0 0\" }}\n                      >\n                        FieldType\n                      </Typography.Text>\n                      <Cascader\n                        showSearch\n                        allowClear={false}\n                        fieldNames={{ label: \"l\", value: \"l\", children: \"c\" }}\n                        options={fieldTree}\n                        value={item._fieldType}\n                        onChange={(value) => {\n                          onChangeField(index, \"_fieldType\", value);\n                          onChangeField(index, \"fieldType\", value.join(\"|\"));\n                        }}\n                      />\n                    </Row>\n                  </Col>\n                  <Col span=\"1\" />\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder={\n                        \"defaultValue \" +\n                        (placeholderDefault[item.fieldType]\n                          ? \"ex. \" + placeholderDefault[item.fieldType]\n                          : \"\")\n                      }\n                      disabled={logic.checkIsDisabledDefault(item.fieldType)}\n                      value={item.defaultValue}\n                      onChange={(event) =>\n                        onChangeField(index, \"defaultValue\", event.target.value)\n                      }\n                    />\n                  </Col>\n                </Row>\n                <Row style={styles.rowInput}>\n                  <Col flex=\"1\">\n                    <Input\n                      placeholder=\"placeholder\"\n                      value={item.placeholder}\n                      disabled={item.fieldType === \"checkbox\"}\n                      onChange={(event) =>\n                        onChangeField(index, \"placeholder\", event.target.value)\n                      }\n                    />\n                  </Col>\n                  <Col span=\"1\" />\n                  <Col flex=\"1\">\n                    {_.get(settingState?.steps, \"[0]\") && (\n                      <Row>\n                        <Typography.Text\n                          style={{ padding: \"0.25rem 0.5rem 0 0\" }}\n                        >\n                          Step\n                        </Typography.Text>\n                        <Select\n                          defaultValue={\n                            !_.isNil(item.step)\n                              ? item.step\n                              : settingState.steps[0].value\n                          }\n                          style={{ flex: 1 }}\n                          value={item.step || settingState.steps[0].value}\n                          onChange={(value) =>\n                            onChangeField(index, \"step\", value)\n                          }\n                        >\n                          {settingState.steps.map((st, si) => (\n                            <Select.Option key={si.toString()} value={st.value}>\n                              {st.value || `step ${si}`}\n                            </Select.Option>\n                          ))}\n                        </Select>\n                      </Row>\n                    )}\n                  </Col>\n                </Row>\n                <Checkbox.Group\n                  options={dataFieldOptions || []}\n                  onChange={(option) => onChangeConfig(\"field\", index, option)}\n                />\n                <Divider type=\"horizontal\" />\n                <Row style={{ marginBottom: \"1rem\" }}>\n                  <Col span=\"12\">\n                    <Input\n                      type=\"number\"\n                      placeholder=\"columnWidth\"\n                      value={item.columnWidth}\n                      onChange={(event) =>\n                        onChangeField(index, \"columnWidth\", event.target.value)\n                      }\n                    />\n                  </Col>\n                </Row>\n                <Checkbox.Group\n                  options={dataColumnOptions || []}\n                  onChange={(option) => onChangeConfig(\"column\", index, option)}\n                />\n              </Collapse.Panel>\n            ))}\n          </Collapse>\n        )}\n      </Form>\n    </div>\n  );\n};\n\nFormFields.propTypes = {\n  formState: PropTypes.array.isRequired,\n  setFormState: PropTypes.func.isRequired,\n  settingState: PropTypes.object,\n};\n\nexport default FormFields;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport RenderSetting from \"./setting\";\nimport RenderFormFields from \"./form-fields\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"./styles\";\nimport _ from \"lodash\";\n\nconst LeftPanelView = (props) => {\n  const { view } = props;\n  const otherProps = _.omit({ ...(props && props) }, [\"view\"]) || {};\n\n  if (view === MENU_FORM.setting) {\n    return (\n      <div style={styles.Wrapper1}>\n        <RenderSetting {...otherProps} />\n      </div>\n    );\n  }\n  return (\n    <div style={styles.Wrapper2}>\n      <RenderFormFields {...otherProps} />\n    </div>\n  );\n};\n\nLeftPanelView.propTypes = {\n  view: PropTypes.oneOf([MENU_FORM.form, MENU_FORM.setting]),\n  formState: PropTypes.array.isRequired,\n  setFormState: PropTypes.func.isRequired,\n  settingState: PropTypes.object.isRequired,\n  setSettingState: PropTypes.func.isRequired,\n};\n\nLeftPanelView.defaultProps = {\n  view: MENU_FORM.form,\n};\n\nexport default LeftPanelView;\n","const panelColor = \"rgb(35,39,46)\";\nconst panelColor2 = \"#dfe6e9\";\n\nexport const LayoutContainer = {\n  display: \"flex\",\n  flexDirection: \"column\",\n  width: \"100%\",\n  height: \"100%\",\n  minWidth: 800,\n};\n\nexport const panelContainer = {\n  flex: 1,\n  display: \"flex\",\n  justifyContent: \"space-between\",\n  width: \"100%\",\n};\n\nexport const resizableContainer = {\n  height: \"100%\",\n  width: 5,\n  cursor: \"col-resize\",\n};\n\nexport const leftPanelContainer = {\n  backgroundColor: \"white\",\n  padding: \"1rem\",\n  marginLeft: 6,\n  marginBottom: 6,\n  borderRadius: 8,\n  border: `1px solid ${panelColor}`,\n  position: \"relative\",\n};\n\nexport const rightPanelContainer = {\n  backgroundColor: panelColor,\n};\n\nexport const rightPanelContainer2 = {\n  backgroundColor: panelColor2,\n};\n\nexport const LeftContent = {\n  height: \"100%\",\n};\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useRef, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CheckCircleTwoTone, CloseCircleTwoTone } from \"@ant-design/icons\";\nimport { Row, Button } from \"antd\";\nimport { useWindowSize } from \"./hooks\";\nimport { MENU_FORM } from \"../constants\";\nimport * as styles from \"../styles\";\nimport * as innerStyles from \"./styles\";\n\nconst MIN_WIDTH = 400;\nconst OTHER_ELEM_SIZE = 52;\nconst INNER_ELEM_SIZE = 72;\n\nconst PanelView = (props) => {\n  const {\n    leftView,\n    rightView,\n    rightViewStyle,\n    menu,\n    bottomBar,\n    currentView,\n    validateSchema,\n  } = props;\n  const splitPanelRef = useRef();\n  const leftPanelRef = useRef();\n  const [isDragging, setIsDragging] = useState(false);\n  const [separatorXPosition, setSeparatorXPosition] = useState();\n  const [leftPanelWidth, setLeftPanelWidth] = useState();\n  const [windowHeight] = useWindowSize();\n  const [showError, setShowError] = useState(false);\n\n  useEffect(() => {\n    document.addEventListener(\"mousemove\", onMouseMove);\n    document.addEventListener(\"touchmove\", onTouchMove);\n    document.addEventListener(\"mouseup\", onMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", onMouseMove);\n      document.removeEventListener(\"touchmove\", onTouchMove);\n      document.removeEventListener(\"mouseup\", onMouseUp);\n    };\n  });\n\n  useEffect(() => {\n    if (validateSchema?.isValidate && showError) {\n      setShowError(false);\n    }\n  }, [showError, validateSchema]);\n\n  const onEventMouseDown = (event) => {\n    if (!event) {\n      return;\n    }\n    setSeparatorXPosition(event.clientX);\n    if (!isDragging) {\n      setIsDragging(true);\n    }\n    if (!leftPanelWidth && leftPanelRef.current) {\n      setLeftPanelWidth(leftPanelRef.current.clientWidth);\n    }\n  };\n\n  const onMouseMove = (e) => {\n    if (isDragging) {\n      e.preventDefault();\n    }\n    onMove(e.clientX);\n  };\n\n  const onTouchMove = (e) => {\n    if (!e) {\n      return;\n    }\n    onMove(e.touches[0].clientX);\n  };\n\n  const onMouseUp = () => {\n    setSeparatorXPosition(undefined);\n    setIsDragging(false);\n  };\n\n  const onMove = (clientX) => {\n    if (!clientX) {\n      return;\n    }\n    if (isDragging && leftPanelWidth && separatorXPosition) {\n      const newLeftWidth = leftPanelWidth + clientX - separatorXPosition;\n      setSeparatorXPosition(clientX);\n      if (newLeftWidth < MIN_WIDTH) {\n        setLeftPanelWidth(MIN_WIDTH);\n        return;\n      }\n      if (splitPanelRef.current) {\n        const splitPaneWidth = splitPanelRef.current.clientWidth;\n        if (newLeftWidth > splitPaneWidth - MIN_WIDTH) {\n          setLeftPanelWidth(splitPaneWidth - MIN_WIDTH);\n          return;\n        }\n      }\n      setLeftPanelWidth(newLeftWidth);\n    }\n  };\n\n  const getElemSize = () => {\n    const defaultSize = OTHER_ELEM_SIZE + INNER_ELEM_SIZE;\n    if (currentView === MENU_FORM.form) {\n      return defaultSize + 40 + 60;\n    }\n    return defaultSize;\n  };\n\n  return (\n    <div ref={splitPanelRef} style={styles.panelContainer}>\n      <div\n        ref={leftPanelRef}\n        style={{\n          ...styles.leftPanelContainer,\n          width: leftPanelWidth || \"50%\",\n          ...(windowHeight && {\n            height: windowHeight - OTHER_ELEM_SIZE,\n          }),\n        }}\n      >\n        <div style={{ height: 40 }}>{menu}</div>\n        {currentView === MENU_FORM.form && (\n          <Row\n            style={{\n              alignItems: \"center\",\n              margin: \"0.5rem 1rem 1rem 1rem\",\n              height: 32,\n            }}\n          >\n            {validateSchema?.isValidate && (\n              <CheckCircleTwoTone\n                twoToneColor=\"#52c41a\"\n                style={{ fontSize: 24 }}\n              />\n            )}\n            {!validateSchema?.isValidate && (\n              <CloseCircleTwoTone\n                twoToneColor=\"#eb2f96\"\n                style={{ fontSize: 24 }}\n              />\n            )}\n            <span style={{ paddingLeft: \"0.5rem\" }}>Validate Schema</span>\n            {!validateSchema?.isValidate && (\n              <Button\n                style={{ marginLeft: 16 }}\n                type=\"primary\"\n                danger\n                onClick={() => setShowError(!showError)}\n              >\n                {showError ? \"HIDE ERROR\" : \"SHOW ERROR\"}\n              </Button>\n            )}\n          </Row>\n        )}\n        <div\n          style={{\n            overflow: \"auto\",\n            height: \"100%\",\n            ...(windowHeight && {\n              maxHeight: windowHeight - getElemSize(),\n            }),\n          }}\n        >\n          {leftView}\n        </div>\n        {currentView === MENU_FORM.form && (\n          <div style={{ height: 40, paddingTop: 8 }}>{bottomBar}</div>\n        )}\n      </div>\n      <div style={styles.resizableContainer} onMouseDown={onEventMouseDown} />\n      <div\n        style={{\n          ...(leftPanelRef.current && {\n            height: windowHeight - OTHER_ELEM_SIZE,\n          }),\n          ...(rightViewStyle && rightViewStyle),\n          ...innerStyles.rightPanel,\n        }}\n      >\n        <div>\n          {!showError && rightView}\n          {showError && (\n            <>\n              <h2 style={{ color: \"white\" }}>SCHEMA ERROR</h2>\n              <span style={{ color: \"white\", fontSize: 20 }}>\n                {validateSchema?.message}\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nPanelView.propTypes = {\n  currentView: PropTypes.oneOf([MENU_FORM.form, MENU_FORM.setting]).isRequired,\n  menu: PropTypes.any,\n  bottomBar: PropTypes.any,\n  leftView: PropTypes.any.isRequired,\n  rightView: PropTypes.any.isRequired,\n  rightViewStyle: PropTypes.object,\n  validateSchema: PropTypes.object.isRequired,\n};\n\nPanelView.defaultProps = {\n  rightViewStyle: null,\n  menu: null,\n};\n\nexport default PanelView;\n","import { useLayoutEffect, useState } from \"react\";\n\nexport const useWindowSize = () => {\n  const [size, setSize] = useState([0, 0]);\n  useLayoutEffect(() => {\n    function updateSize() {\n      setSize([window.innerHeight, window.innerWidth]);\n    }\n    window.addEventListener(\"resize\", updateSize);\n    updateSize();\n    return () => window.removeEventListener(\"resize\", updateSize);\n  }, []);\n  return size;\n};\n","import lodash from \"lodash\";\nimport { validateEditor } from \"../../logic\";\n\nconst OMIT_SETTING = [\"step\"];\n\nconst findStep = (steps, target) => {\n  const stepValue = steps.findIndex((item) => item.value === target);\n  if (stepValue < 0) {\n    return 0;\n  }\n  return stepValue;\n};\n\nconst cleanDefault = (row) => {\n  if (!row) {\n    return row;\n  }\n  for (const [key, value] of Object.entries(row)) {\n    if (value || value === 0) {\n      row[key] = value;\n    } else {\n      delete row[key];\n    }\n  }\n  return row;\n};\n\nconst cleanColWidth = (colWidth) => {\n  try {\n    return parseInt(colWidth, 10);\n  } catch (error) {\n    return \"\";\n  }\n};\n\nexport const cleanTableSettingBeforeTrans = (setting) => {\n  if (!setting) {\n    return setting;\n  }\n  const newSetting = { ...setting };\n  const omitSetting = [...OMIT_SETTING];\n  if (lodash.get(newSetting.steps, \"[0]\")) {\n    newSetting.steps = newSetting.steps\n      .map((item, index) => item.value || `label step ${index + 1}`)\n      .join(\",\");\n  }\n  if (!newSetting.steps || !lodash.get(newSetting.steps, \"[0]\")) {\n    omitSetting.push(\"steps\");\n  }\n  if (!newSetting.querySchema?.query) {\n    omitSetting.push(\"querySchema\");\n  }\n  if (newSetting.querySchema?.query) {\n    const schema = [...newSetting.querySchema.schema];\n    newSetting.querySchema = schema;\n  }\n  return lodash.omit(newSetting, omitSetting);\n};\n\nexport const cleanFormBeforeTrans = (editor, settingSteps) => {\n  if (!Array.isArray(editor) || !Array.isArray(settingSteps)) {\n    return editor;\n  }\n  const schema = editor.map((item, index) => {\n    let row = { ...item };\n    row.step = findStep(settingSteps, item.step);\n    if (!item.label) {\n      row.label = `label_${index}`;\n    }\n    if (!item.name) {\n      row.name = `name_${index}`;\n    }\n    if (item.columnWidth) {\n      row.columnWidth = cleanColWidth(item.columnWidth);\n    }\n    return cleanDefault(row);\n  });\n  return schema;\n};\n\nexport const validateSchema = (editor) => {\n  const validateSchema = validateEditor(editor);\n  const error = lodash.get(validateSchema, \"error.details\");\n  if (!lodash.get(error, \"[0].message\")) {\n    return [true, \"\"];\n  }\n  const message = error.map((item) => {\n    return `- ${item.message}\\n`;\n  });\n  return [false, message.join(\" \")];\n};\n","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { Row, Col, Typography, Button } from \"antd\";\nimport lodash from \"lodash\";\nimport { PlusOutlined } from \"@ant-design/icons\";\nimport MenuView from \"./views/menu\";\nimport MenuFormView from \"./views/menu-form\";\nimport RightPanelView from \"./right-panel-views\";\nimport LeftPanelView from \"./left-panel-views\";\nimport PanelContainerView from \"./views/panel\";\nimport { MENU, MENU_FORM } from \"./constants\";\nimport {\n  getInitRowField,\n  getInitRowQuerySchema,\n  getSingleRow,\n} from \"./left-panel-views/data-field\";\n\nimport * as styles from \"./styles\";\nimport * as logic from \"./logic\";\n\nconst DELAY_TIMER = 500;\n\nconst EditorScreen = () => {\n  const [currentMenuState, setCurrentMenuState] = useState({\n    current: MENU.ui,\n  });\n  const [currentMenuFormState, setCurrentMenuFormState] = useState({\n    current: MENU_FORM.form,\n  });\n  const [formState, setFormState] = useState(() => getInitRowField());\n  const [settingState, setSettingState] = useState(() => ({\n    name: \"example-tb-name\",\n    canCreate: true,\n    canUpdate: true,\n    canDelete: true,\n    querySchema: {\n      query: false,\n      schema: [...getInitRowQuerySchema()],\n    },\n    steps: [],\n  }));\n  const [tableSettingProps, setTableSettingProps] = useState();\n  const [schemaProps, setSchemaProps] = useState();\n  const [schemaValidateState, setSchemaValidateState] = useState({\n    isValidate: true,\n    message: \"\",\n  });\n\n  useEffect(() => {\n    if (lodash.get(settingState, \"name\")) {\n      debounceTableTrans();\n    }\n  }, [settingState]);\n\n  useEffect(() => {\n    if (lodash.get(formState, \"[0]\")) {\n      debounceSchemaTrans();\n    }\n  }, [formState]);\n\n  const onSettingChange = () => {\n    const setting = logic.cleanTableSettingBeforeTrans(settingState);\n    setTableSettingProps(setting);\n  };\n\n  const onFormSchemaChange = () => {\n    const schema = logic.cleanFormBeforeTrans(formState, settingState?.steps);\n    setSchemaProps(schema);\n    const [isValidate, message] = logic.validateSchema(schema);\n    setSchemaValidateState({ isValidate, message });\n  };\n\n  const onAddField = () => {\n    if (!Array.isArray(formState)) {\n      return;\n    }\n    const newForm = [...formState];\n    newForm.push({ ...getSingleRow(settingState?.steps) });\n    setFormState(newForm);\n  };\n\n  const debounceTableTrans = lodash.debounce(onSettingChange, DELAY_TIMER);\n  const debounceSchemaTrans = lodash.debounce(onFormSchemaChange, DELAY_TIMER);\n\n  const onEventResetForm = () => {\n    setSettingState({\n      name: \"example-tb-name\",\n      canCreate: true,\n      canUpdate: true,\n      canDelete: true,\n      querySchema: {\n        query: false,\n        schema: [...getInitRowQuerySchema()],\n      },\n      steps: [],\n    });\n    setFormState(() => getInitRowField());\n  };\n\n  return (\n    <div style={styles.LayoutContainer}>\n      <Row>\n        <Col flex=\"1\">\n          <Typography.Title\n            level={3}\n            style={{ position: \"absolute\", left: \"1rem\", top: 6 }}\n          >\n            joi-auto-admin Generator\n          </Typography.Title>\n        </Col>\n        <Col flex=\"1\">\n          <MenuView\n            currentMenu={currentMenuState}\n            setCurrentMenu={setCurrentMenuState}\n          />\n        </Col>\n      </Row>\n      <PanelContainerView\n        validateSchema={schemaValidateState}\n        currentView={currentMenuFormState.current}\n        menu={\n          <MenuFormView\n            currentMenu={currentMenuFormState}\n            setCurrentMenu={setCurrentMenuFormState}\n            onClearForm={onEventResetForm}\n          />\n        }\n        bottomBar={\n          <Button\n            block\n            type=\"primary\"\n            icon={<PlusOutlined />}\n            onClick={onAddField}\n          >\n            Add Field\n          </Button>\n        }\n        leftView={\n          <>\n            <LeftPanelView\n              view={currentMenuFormState.current}\n              formState={formState}\n              setFormState={setFormState}\n              settingState={settingState}\n              setSettingState={setSettingState}\n            />\n          </>\n        }\n        rightView={\n          <RightPanelView\n            view={currentMenuState.current}\n            settings={tableSettingProps}\n            editors={schemaProps || formState}\n          />\n        }\n        rightViewStyle={\n          currentMenuState.current === MENU.ui\n            ? styles.rightPanelContainer2\n            : styles.rightPanelContainer\n        }\n      />\n    </div>\n  );\n};\n\nEditorScreen.propTypes = {};\n\nexport default EditorScreen;\n","import React from \"react\";\nimport EditorScreen from \"./screens/editor-tool\";\n\nconst RenderScreen = () => {\n  return <EditorScreen />;\n};\n\nRenderScreen.propTypes = {};\n\nexport default RenderScreen;\n","import ReactDOM from \"react-dom\";\nimport \"antd/dist/antd.css\";\nimport \"./lib/index.css\";\n// import App from \"./App3\";\n// import App from \"./App4\";\n// import App from \"./App5\";\n// import App from \"./App6\";\n// import App from \"./App7\";\n// import App from \"./App8\";\n// import App from \"./App4\";\n// import App from \"./App9\";\n// import App from \"./App20\";\n// import App from \"./App21\";\nimport React from \"react\";\nimport App from \"./editor\";\n\n// strict mode disabled because antd doesn't support it\n// https://github.com/ant-design/ant-design/issues/22493\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}